import{c as TA,r as ce,j as v,C as Oo,B as J,P as Li,T as Y,A as xr,G as ut,b as oa,d as ot,e as pc,L as zx,f as wA,D as ko,g as Bx,h as Fx,i as Em,k as Ah,l as qx,m as Hx,n as On,o as Tm,M as AA,S as SA,E as RA,p as nt,R as IA,q as CA,s as DA,t as ac,I as si,u as OA,v as kA,w as Jl,x as NA,y as fn,z as MA,F as wm,H as Am,J as Sm,K as Rm,N as da,V as Gx,O as Kx,Q as jA,U as PA,W as VA,X as Qx,Y as UA,Z as _p,_ as bp,$ as LA,a0 as xp,a1 as zA,a2 as BA,a3 as FA,a4 as qA,a5 as HA,a6 as GA,a7 as Yx,a8 as KA,a9 as QA,aa as F_,ab as YA,ac as WA,ad as q_,ae as XA,af as Ep,ag as $A,ah as ZA,ai as JA}from"./mui-d-gs7Bh0.js";import{r as eS,a as tS,g as nS}from"./vendor-DJG_os-6.js";import{u as Fi,N as Wx,a as iS,b as rS,c as aS,R as sS}from"./router-gZPOZJJY.js";import{c as Xx,a as Im,b as oS,u as Ra,d as wr,P as lS}from"./redux-DMc6wR4l.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Tp={exports:{}},$l={},wp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function cS(){return H_||(H_=1,function(i){function e(K,te){var de=K.length;K.push(te);e:for(;0<de;){var Se=de-1>>>1,He=K[Se];if(0<o(He,te))K[Se]=te,K[de]=He,de=Se;else break e}}function n(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var te=K[0],de=K.pop();if(de!==te){K[0]=de;e:for(var Se=0,He=K.length,Et=He>>>1;Se<Et;){var ke=2*(Se+1)-1,xe=K[ke],Je=ke+1,Ct=K[Je];if(0>o(xe,de))Je<He&&0>o(Ct,xe)?(K[Se]=Ct,K[Je]=de,Se=Je):(K[Se]=xe,K[ke]=de,Se=ke);else if(Je<He&&0>o(Ct,de))K[Se]=Ct,K[Je]=de,Se=Je;else break e}}return te}function o(K,te){var de=K.sortIndex-te.sortIndex;return de!==0?de:K.id-te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();i.unstable_now=function(){return d.now()-p}}var g=[],_=[],x=1,S=null,w=3,U=!1,F=!1,G=!1,q=!1,ie=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ee(K){for(var te=n(_);te!==null;){if(te.callback===null)a(_);else if(te.startTime<=K)a(_),te.sortIndex=te.expirationTime,e(g,te);else break;te=n(_)}}function ge(K){if(G=!1,ee(K),!F)if(n(g)!==null)F=!0,be||(be=!0,N());else{var te=n(_);te!==null&&Be(ge,te.startTime-K)}}var be=!1,D=-1,A=5,C=-1;function k(){return q?!0:!(i.unstable_now()-C<A)}function M(){if(q=!1,be){var K=i.unstable_now();C=K;var te=!0;try{e:{F=!1,G&&(G=!1,oe(D),D=-1),U=!0;var de=w;try{t:{for(ee(K),S=n(g);S!==null&&!(S.expirationTime>K&&k());){var Se=S.callback;if(typeof Se=="function"){S.callback=null,w=S.priorityLevel;var He=Se(S.expirationTime<=K);if(K=i.unstable_now(),typeof He=="function"){S.callback=He,ee(K),te=!0;break t}S===n(g)&&a(g),ee(K)}else a(g);S=n(g)}if(S!==null)te=!0;else{var Et=n(_);Et!==null&&Be(ge,Et.startTime-K),te=!1}}break e}finally{S=null,w=de,U=!1}te=void 0}}finally{te?N():be=!1}}}var N;if(typeof ae=="function")N=function(){ae(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Oe=R.port2;R.port1.onmessage=M,N=function(){Oe.postMessage(null)}}else N=function(){ie(M,0)};function Be(K,te){D=ie(function(){K(i.unstable_now())},te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(K){switch(w){case 1:case 2:case 3:var te=3;break;default:te=w}var de=w;w=te;try{return K()}finally{w=de}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var de=w;w=K;try{return te()}finally{w=de}},i.unstable_scheduleCallback=function(K,te,de){var Se=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,K){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=de+He,K={id:x++,callback:te,priorityLevel:K,startTime:de,expirationTime:He,sortIndex:-1},de>Se?(K.sortIndex=de,e(_,K),n(g)===null&&K===n(_)&&(G?(oe(D),D=-1):G=!0,Be(ge,de-Se))):(K.sortIndex=He,e(g,K),F||U||(F=!0,be||(be=!0,N()))),K},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(K){var te=w;return function(){var de=w;w=te;try{return K.apply(this,arguments)}finally{w=de}}}}(Ap)),Ap}var G_;function uS(){return G_||(G_=1,wp.exports=cS()),wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function hS(){if(K_)return $l;K_=1;var i=uS(),e=eS(),n=tS();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(a(188))}function g(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(a(188));return r!==t?null:t}for(var s=t,l=r;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return p(h),t;if(f===l)return p(h),r;f=f.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=f;else{for(var b=!1,E=h.child;E;){if(E===s){b=!0,s=h,l=f;break}if(E===l){b=!0,l=h,s=f;break}E=E.sibling}if(!b){for(E=f.child;E;){if(E===s){b=!0,s=f,l=h;break}if(E===l){b=!0,l=f,s=h;break}E=E.sibling}if(!b)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function N(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case q:return"Profiler";case G:return"StrictMode";case ge:return"Suspense";case be:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case ae:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case ee:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return r=t.displayName||null,r!==null?r:Oe(t.type)||"Memo";case A:r=t._payload,t=t._init;try{return Oe(t(r))}catch{}}return null}var Be=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],He=-1;function Et(t){return{current:t}}function ke(t){0>He||(t.current=Se[He],Se[He]=null,He--)}function xe(t,r){He++,Se[He]=t.current,t.current=r}var Je=Et(null),Ct=Et(null),zt=Et(null),Nn=Et(null);function Hi(t,r){switch(xe(zt,r),xe(Ct,t),xe(Je,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?g_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=g_(r),t=v_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ke(Je),xe(Je,t)}function Wn(){ke(Je),ke(Ct),ke(zt)}function En(t){t.memoizedState!==null&&xe(Nn,t);var r=Je.current,s=v_(r,t.type);r!==s&&(xe(Ct,t),xe(Je,s))}function mn(t){Ct.current===t&&(ke(Je),ke(Ct)),Nn.current===t&&(ke(Nn),Kl._currentValue=de)}var gn=Object.prototype.hasOwnProperty,di=i.unstable_scheduleCallback,fi=i.unstable_cancelCallback,Dr=i.unstable_shouldYield,ka=i.unstable_requestPaint,Dt=i.unstable_now,Na=i.unstable_getCurrentPriorityLevel,pi=i.unstable_ImmediatePriority,Xn=i.unstable_UserBlockingPriority,Gi=i.unstable_NormalPriority,Qo=i.unstable_LowPriority,Or=i.unstable_IdlePriority,re=i.log,fe=i.unstable_setDisableYieldValue,Re=null,Ee=null;function et(t){if(typeof re=="function"&&fe(t),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(Re,t)}catch{}}var ft=Math.clz32?Math.clz32:Zn,$n=Math.log,Ma=Math.LN2;function Zn(t){return t>>>=0,t===0?32:31-($n(t)/Ma|0)|0}var Jn=256,Mn=4194304;function on(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function mi(t,r,s){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?h=on(l):(b&=E,b!==0?h=on(b):s||(s=E&~t,s!==0&&(h=on(s))))):(E=l&~f,E!==0?h=on(E):b!==0?h=on(b):s||(s=l&~t,s!==0&&(h=on(s)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,s=r&-r,f>=s||f===32&&(s&4194048)!==0)?r:h}function ei(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ki(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ja(){var t=Jn;return Jn<<=1,(Jn&4194048)===0&&(Jn=256),t}function Yo(){var t=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),t}function Qi(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function Yi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wo(t,r,s,l,h,f){var b=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var E=t.entanglements,I=t.expirationTimes,L=t.hiddenUpdates;for(s=b&~s;0<s;){var Q=31-ft(s),X=1<<Q;E[Q]=0,I[Q]=-1;var z=L[Q];if(z!==null)for(L[Q]=null,Q=0;Q<z.length;Q++){var B=z[Q];B!==null&&(B.lane&=-536870913)}s&=~X}l!==0&&gi(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~r))}function gi(t,r,s){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-ft(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Xo(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var l=31-ft(s),h=1<<l;h&r|t[l]&r&&(t[l]|=r),s&=~h}}function kr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Nr(){var t=te.p;return t!==0?t:(t=window.event,t===void 0?32:P_(t.type))}function Pc(t,r){var s=te.p;try{return te.p=t,r()}finally{te.p=s}}var at=Math.random().toString(36).slice(2),Ot="__reactFiber$"+at,Tt="__reactProps$"+at,jn="__reactContainer$"+at,$o="__reactEvents$"+at,xd="__reactListeners$"+at,Mr="__reactHandles$"+at,Vc="__reactResources$"+at,Pa="__reactMarker$"+at;function jr(t){delete t[Ot],delete t[Tt],delete t[$o],delete t[xd],delete t[Mr]}function Wi(t){var r=t[Ot];if(r)return r;for(var s=t.parentNode;s;){if(r=s[jn]||s[Ot]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=x_(t);t!==null;){if(s=t[Ot])return s;t=x_(t)}return r}t=s,s=t.parentNode}return null}function vi(t){if(t=t[Ot]||t[jn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function yi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function ln(t){var r=t[Vc];return r||(r=t[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yt(t){t[Pa]=!0}var Zo=new Set,Ds={};function ti(t,r){Xi(t,r),Xi(t+"Capture",r)}function Xi(t,r){for(Ds[t]=r,t=0;t<r.length;t++)Zo.add(r[t])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},Va={};function zc(t){return gn.call(Va,t)?!0:gn.call(Lc,t)?!1:Uc.test(t)?Va[t]=!0:(Lc[t]=!0,!1)}function Pr(t,r,s){if(zc(r))if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+s)}}function _i(t,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+s)}}function Wt(t,r,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(r,s,""+l)}}var Ua,Bc;function $i(t){if(Ua===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);Ua=r&&r[1]||"",Bc=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+t+Bc}var Os=!1;function ks(t,r){if(!t||Os)return"";Os=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var z=B}Reflect.construct(t,[],X)}else{try{X.call()}catch(B){z=B}t.call(X.prototype)}}else{try{throw Error()}catch(B){z=B}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],E=f[1];if(b&&E){var I=b.split(`
`),L=E.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===L.length)for(l=I.length-1,h=L.length-1;1<=l&&0<=h&&I[l]!==L[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==L[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==L[h]){var Q=`
`+I[l].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=l&&0<=h);break}}}finally{Os=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?$i(s):""}function Jo(t){switch(t.tag){case 26:case 27:case 5:return $i(t.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 15:return ks(t.type,!1);case 11:return ks(t.type.render,!1);case 1:return ks(t.type,!0);case 31:return $i("Activity");default:return""}}function Ns(t){try{var r="";do r+=Jo(t),t=t.return;while(t);return r}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function cn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function el(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ed(t){var r=el(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,f=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ms(t){t._valueTracker||(t._valueTracker=Ed(t))}function tl(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),l="";return t&&(l=el(t)?t.checked?"true":"false":t.value),t=l,t!==s?(r.setValue(t),!0):!1}function La(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Td=/[\n"\\]/g;function wt(t){return t.replace(Td,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Tn(t,r,s,l,h,f,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+cn(r)):t.value!==""+cn(r)&&(t.value=""+cn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Vr(t,b,cn(r)):s!=null?Vr(t,b,cn(s)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+cn(E):t.removeAttribute("name")}function za(t,r,s,l,h,f,b,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;s=s!=null?""+cn(s):"",r=r!=null?""+cn(r):s,E||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Vr(t,r,s){r==="number"&&La(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Zi(t,r,s,l){if(t=t.options,r){r={};for(var h=0;h<s.length;h++)r["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=r.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&l&&(t[s].defaultSelected=!0)}else{for(s=""+cn(s),r=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function We(t,r,s){if(r!=null&&(r=""+cn(r),r!==t.value&&(t.value=r),s==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=s!=null?""+cn(s):""}function Ba(t,r,s,l){if(r==null){if(l!=null){if(s!=null)throw Error(a(92));if(Be(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),r=s}s=cn(r),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function Pn(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var Fa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fc(t,r,s){var l=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,s):typeof s!="number"||s===0||Fa.has(r)?r==="float"?t.cssFloat=s:t[r]=(""+s).trim():t[r]=s+"px"}function nl(t,r,s){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&s[h]!==l&&Fc(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Fc(t,f,r[f])}function il(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ad=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(t){return Ad.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ji=null;function Vn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var er=null,tr=null;function rl(t){var r=vi(t);if(r&&(t=r.stateNode)){var s=t[Tt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Tn(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+wt(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var l=s[r];if(l!==t&&l.form===t.form){var h=l[Tt]||null;if(!h)throw Error(a(90));Tn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<s.length;r++)l=s[r],l.form===t.form&&tl(l)}break e;case"textarea":We(t,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&Zi(t,!!s.multiple,r,!1)}}}var bi=!1;function qc(t,r,s){if(bi)return t(r,s);bi=!0;try{var l=t(r);return l}finally{if(bi=!1,(er!==null||tr!==null)&&(Pu(),er&&(r=er,t=tr,tr=er=null,rl(r),t)))for(r=0;r<t.length;r++)rl(t[r])}}function qa(t,r){var s=t.stateNode;if(s===null)return null;var l=s[Tt]||null;if(l===null)return null;s=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,r,typeof s));return s}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(ni)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){Un=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{Un=!1}var xi=null,Ur=null,nr=null;function al(){if(nr)return nr;var t,r=Ur,s=r.length,l,h="value"in xi?xi.value:xi.textContent,f=h.length;for(t=0;t<s&&r[t]===h[t];t++);var b=s-t;for(l=1;l<=b&&r[s-l]===h[f-l];l++);return nr=h.slice(t,1<l?1-l:void 0)}function Ei(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ti(){return!0}function sl(){return!1}function Bt(t){function r(s,l,h,f,b){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(s=t[E],this[E]=s?s(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ti:sl,this.isPropagationStopped=sl,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),r}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=Bt(Ge),Ga=x({},Ge,{view:0,detail:0}),Hc=Bt(Ga),Vs,Us,wi,Ka=x({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wi&&(wi&&t.type==="mousemove"?(Vs=t.screenX-wi.screenX,Us=t.screenY-wi.screenY):Us=Vs=0,wi=t),Vs)},movementY:function(t){return"movementY"in t?t.movementY:Us}}),Ln=Bt(Ka),Gc=x({},Ka,{dataTransfer:0}),Sd=Bt(Gc),Qa=x({},Ga,{relatedTarget:0}),Ls=Bt(Qa),ol=x({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),zs=Bt(ol),Kc=x({},Ge,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bs=Bt(Kc),Rd=x({},Ge,{data:0}),ll=Bt(Rd),Ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Yc[t])?!!r[t]:!1}function Wa(){return cl}var Wc=x({},Ga,{key:function(t){if(t.key){var r=Ya[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(t){return t.type==="keypress"?Ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fs=Bt(Wc),Xc=x({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Bt(Xc),ir=x({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),$c=Bt(ir),Zc=x({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jc=Bt(Zc),eu=x({},Ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qs=Bt(eu),un=x({},Ge,{newState:0,oldState:0}),tu=Bt(un),nu=[9,13,27,32],Ai=ni&&"CompositionEvent"in window,u=null;ni&&"documentMode"in document&&(u=document.documentMode);var m=ni&&"TextEvent"in window&&!u,y=ni&&(!Ai||u&&8<u&&11>=u),T=" ",P=!1;function H(t,r){switch(t){case"keyup":return nu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ne(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ve=!1;function kt(t,r){switch(t){case"compositionend":return ne(r);case"keypress":return r.which!==32?null:(P=!0,T);case"textInput":return t=r.data,t===T&&P?null:t;default:return null}}function Ue(t,r){if(Ve)return t==="compositionend"||!Ai&&H(t,r)?(t=al(),nr=Ur=xi=null,Ve=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return y&&r.locale!=="ko"?null:r.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ft[t.type]:r==="textarea"}function rr(t,r,s,l){er?tr?tr.push(l):tr=[l]:er=l,r=Fu(r,"onChange"),0<r.length&&(s=new Ps("onChange","change",null,s,l),t.push({event:s,listeners:r}))}var Xt=null,Si=null;function hl(t){h_(t,0)}function iu(t){var r=yi(t);if(tl(r))return t}function kg(t,r){if(t==="change")return r}var Ng=!1;if(ni){var Id;if(ni){var Cd="oninput"in document;if(!Cd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Cd=typeof Mg.oninput=="function"}Id=Cd}else Id=!1;Ng=Id&&(!document.documentMode||9<document.documentMode)}function jg(){Xt&&(Xt.detachEvent("onpropertychange",Pg),Si=Xt=null)}function Pg(t){if(t.propertyName==="value"&&iu(Si)){var r=[];rr(r,Si,t,Vn(t)),qc(hl,r)}}function JT(t,r,s){t==="focusin"?(jg(),Xt=r,Si=s,Xt.attachEvent("onpropertychange",Pg)):t==="focusout"&&jg()}function ew(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(Si)}function tw(t,r){if(t==="click")return iu(r)}function nw(t,r){if(t==="input"||t==="change")return iu(r)}function iw(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var wn=typeof Object.is=="function"?Object.is:iw;function dl(t,r){if(wn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),l=Object.keys(r);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!gn.call(r,h)||!wn(t[h],r[h]))return!1}return!0}function Vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,r){var s=Vg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=r&&l>=r)return{node:s,offset:r-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Vg(s)}}function Lg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Lg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function zg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=La(t.document);r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=La(t.document)}return r}function Dd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var rw=ni&&"documentMode"in document&&11>=document.documentMode,Hs=null,Od=null,fl=null,kd=!1;function Bg(t,r,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;kd||Hs==null||Hs!==La(l)||(l=Hs,"selectionStart"in l&&Dd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fl&&dl(fl,l)||(fl=l,l=Fu(Od,"onSelect"),0<l.length&&(r=new Ps("onSelect","select",null,r,s),t.push({event:r,listeners:l}),r.target=Hs)))}function Xa(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Gs={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},Nd={},Fg={};ni&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function $a(t){if(Nd[t])return Nd[t];if(!Gs[t])return t;var r=Gs[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in Fg)return Nd[t]=r[s];return t}var qg=$a("animationend"),Hg=$a("animationiteration"),Gg=$a("animationstart"),aw=$a("transitionrun"),sw=$a("transitionstart"),ow=$a("transitioncancel"),Kg=$a("transitionend"),Qg=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function ii(t,r){Qg.set(t,r),ti(r,[t])}var Yg=new WeakMap;function zn(t,r){if(typeof t=="object"&&t!==null){var s=Yg.get(t);return s!==void 0?s:(r={value:t,source:r,stack:Ns(r)},Yg.set(t,r),r)}return{value:t,source:r,stack:Ns(r)}}var Bn=[],Ks=0,jd=0;function ru(){for(var t=Ks,r=jd=Ks=0;r<t;){var s=Bn[r];Bn[r++]=null;var l=Bn[r];Bn[r++]=null;var h=Bn[r];Bn[r++]=null;var f=Bn[r];if(Bn[r++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Wg(s,h,f)}}function au(t,r,s,l){Bn[Ks++]=t,Bn[Ks++]=r,Bn[Ks++]=s,Bn[Ks++]=l,jd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Pd(t,r,s,l){return au(t,r,s,l),su(t)}function Qs(t,r){return au(t,null,null,r),su(t)}function Wg(t,r,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var h=!1,f=t.return;f!==null;)f.childLanes|=s,l=f.alternate,l!==null&&(l.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-ft(s),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=s|536870912),f):null}function su(t){if(50<Ul)throw Ul=0,qf=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ys={};function lw(t,r,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,r,s,l){return new lw(t,r,s,l)}function Vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ar(t,r){var s=t.alternate;return s===null?(s=An(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Xg(t,r){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,r=s.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ou(t,r,s,l,h,f){var b=0;if(l=t,typeof t=="function")Vd(t)&&(b=1);else if(typeof t=="string")b=uA(t,s,Je.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=An(31,s,r,h),t.elementType=C,t.lanes=f,t;case F:return Za(s.children,h,f,r);case G:b=8,h|=24;break;case q:return t=An(12,s,r,h|2),t.elementType=q,t.lanes=f,t;case ge:return t=An(13,s,r,h),t.elementType=ge,t.lanes=f,t;case be:return t=An(19,s,r,h),t.elementType=be,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ie:case ae:b=10;break e;case oe:b=9;break e;case ee:b=11;break e;case D:b=14;break e;case A:b=16,l=null;break e}b=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return r=An(b,s,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Za(t,r,s,l){return t=An(7,t,l,r),t.lanes=s,t}function Ud(t,r,s){return t=An(6,t,null,r),t.lanes=s,t}function Ld(t,r,s){return r=An(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ws=[],Xs=0,lu=null,cu=0,Fn=[],qn=0,Ja=null,sr=1,or="";function es(t,r){Ws[Xs++]=cu,Ws[Xs++]=lu,lu=t,cu=r}function $g(t,r,s){Fn[qn++]=sr,Fn[qn++]=or,Fn[qn++]=Ja,Ja=t;var l=sr;t=or;var h=32-ft(l)-1;l&=~(1<<h),s+=1;var f=32-ft(r)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,sr=1<<32-ft(r)+h|s<<h|l,or=f+t}else sr=1<<f|s<<h|l,or=t}function zd(t){t.return!==null&&(es(t,1),$g(t,1,0))}function Bd(t){for(;t===lu;)lu=Ws[--Xs],Ws[Xs]=null,cu=Ws[--Xs],Ws[Xs]=null;for(;t===Ja;)Ja=Fn[--qn],Fn[qn]=null,or=Fn[--qn],Fn[qn]=null,sr=Fn[--qn],Fn[qn]=null}var hn=null,pt=null,qe=!1,ts=null,Ri=!1,Fd=Error(a(519));function ns(t){var r=Error(a(418,""));throw gl(zn(r,t)),Fd}function Zg(t){var r=t.stateNode,s=t.type,l=t.memoizedProps;switch(r[Ot]=t,r[Tt]=l,s){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(s=0;s<zl.length;s++)Me(zl[s],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Me("invalid",r),za(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ms(r);break;case"select":Me("invalid",r);break;case"textarea":Me("invalid",r),Ba(r,l.value,l.defaultValue,l.children),Ms(r)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||l.suppressHydrationWarning===!0||m_(r.textContent,s)?(l.popover!=null&&(Me("beforetoggle",r),Me("toggle",r)),l.onScroll!=null&&Me("scroll",r),l.onScrollEnd!=null&&Me("scrollend",r),l.onClick!=null&&(r.onclick=qu),r=!0):r=!1,r||ns(t)}function Jg(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:hn=hn.return}}function pl(t){if(t!==hn)return!1;if(!qe)return Jg(t),qe=!0,!1;var r=t.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||ap(t.type,t.memoizedProps)),s=!s),s&&pt&&ns(t),Jg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(r===0){pt=ai(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++;t=t.nextSibling}pt=null}}else r===27?(r=pt,ea(t.type)?(t=cp,cp=null,pt=t):pt=r):pt=hn?ai(t.stateNode.nextSibling):null;return!0}function ml(){pt=hn=null,qe=!1}function ev(){var t=ts;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),ts=null),t}function gl(t){ts===null?ts=[t]:ts.push(t)}var qd=Et(null),is=null,lr=null;function Lr(t,r,s){xe(qd,r._currentValue),r._currentValue=s}function cr(t){t._currentValue=qd.current,ke(qd)}function Hd(t,r,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===s)break;t=t.return}}function Gd(t,r,s,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var I=0;I<r.length;I++)if(E.context===r[I]){f.lanes|=s,E=f.alternate,E!==null&&(E.lanes|=s),Hd(f.return,s,t),l||(b=null);break e}f=E.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(a(341));b.lanes|=s,f=b.alternate,f!==null&&(f.lanes|=s),Hd(b,s,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function vl(t,r,s,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var E=h.type;wn(h.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(h===Nn.current){if(b=h.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Kl):t=[Kl])}h=h.return}t!==null&&Gd(r,t,s,l),r.flags|=262144}function uu(t){for(t=t.firstContext;t!==null;){if(!wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function rs(t){is=t,lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function tn(t){return tv(is,t)}function hu(t,r){return is===null&&rs(t),tv(t,r)}function tv(t,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},lr===null){if(t===null)throw Error(a(308));lr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else lr=lr.next=r;return s}var cw=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(s){return s()})}},uw=i.unstable_scheduleCallback,hw=i.unstable_NormalPriority,Mt={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new cw,data:new Map,refCount:0}}function yl(t){t.refCount--,t.refCount===0&&uw(hw,function(){t.controller.abort()})}var _l=null,Qd=0,$s=0,Zs=null;function dw(t,r){if(_l===null){var s=_l=[];Qd=0,$s=Xf(),Zs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Qd++,r.then(nv,nv),r}function nv(){if(--Qd===0&&_l!==null){Zs!==null&&(Zs.status="fulfilled");var t=_l;_l=null,$s=0,Zs=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function fw(t,r){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<s.length;h++)(0,s[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var iv=K.S;K.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&dw(t,r),iv!==null&&iv(t,r)};var as=Et(null);function Yd(){var t=as.current;return t!==null?t:it.pooledCache}function du(t,r){r===null?xe(as,as.current):xe(as,r.pool)}function rv(){var t=Yd();return t===null?null:{parent:Mt._currentValue,pool:t}}var bl=Error(a(460)),av=Error(a(474)),fu=Error(a(542)),Wd={then:function(){}};function sv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pu(){}function ov(t,r,s){switch(s=t[s],s===void 0?t.push(r):s!==r&&(r.then(pu,pu),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cv(t),t;default:if(typeof r.status=="string")r.then(pu,pu);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cv(t),t}throw xl=r,bl}}var xl=null;function lv(){if(xl===null)throw Error(a(459));var t=xl;return xl=null,t}function cv(t){if(t===bl||t===fu)throw Error(a(483))}var zr=!1;function Xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(t,r,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=su(t),Wg(t,null,s),r}return au(t,l,r,s),su(t)}function El(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Xo(t,s)}}function Zd(t,r){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,s=s.next}while(s!==null);f===null?h=f=r:f=f.next=r}else h=f=r;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}var Jd=!1;function Tl(){if(Jd){var t=Zs;if(t!==null)throw t}}function wl(t,r,s,l){Jd=!1;var h=t.updateQueue;zr=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var I=E,L=I.next;I.next=null,b===null?f=L:b.next=L,b=I;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,E=Q.lastBaseUpdate,E!==b&&(E===null?Q.firstBaseUpdate=L:E.next=L,Q.lastBaseUpdate=I))}if(f!==null){var X=h.baseState;b=0,Q=L=I=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Le&z)===z:(l&z)===z){z!==0&&z===$s&&(Jd=!0),Q!==null&&(Q=Q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=t,me=E;z=r;var Ze=s;switch(me.tag){case 1:if(Te=me.payload,typeof Te=="function"){X=Te.call(Ze,X,z);break e}X=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=me.payload,z=typeof Te=="function"?Te.call(Ze,X,z):Te,z==null)break e;X=x({},X,z);break e;case 2:zr=!0}}z=E.callback,z!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Q===null?(L=Q=B,I=X):Q=Q.next=B,b|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);Q===null&&(I=X),h.baseState=I,h.firstBaseUpdate=L,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),Xr|=b,t.lanes=b,t.memoizedState=X}}function uv(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function hv(t,r){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)uv(s[t],r)}var Js=Et(null),mu=Et(0);function dv(t,r){t=gr,xe(mu,t),xe(Js,r),gr=t|r.baseLanes}function ef(){xe(mu,gr),xe(Js,Js.current)}function tf(){gr=mu.current,ke(Js),ke(mu)}var qr=0,Ie=null,Xe=null,At=null,gu=!1,eo=!1,ss=!1,vu=0,Al=0,to=null,pw=0;function _t(){throw Error(a(321))}function nf(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!wn(t[s],r[s]))return!1;return!0}function rf(t,r,s,l,h,f){return qr=f,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?Wv:Xv,ss=!1,f=s(l,h),ss=!1,eo&&(f=pv(r,s,l,h)),fv(t),f}function fv(t){K.H=Tu;var r=Xe!==null&&Xe.next!==null;if(qr=0,At=Xe=Ie=null,gu=!1,Al=0,to=null,r)throw Error(a(300));t===null||qt||(t=t.dependencies,t!==null&&uu(t)&&(qt=!0))}function pv(t,r,s,l){Ie=t;var h=0;do{if(eo&&(to=null),Al=0,eo=!1,25<=h)throw Error(a(301));if(h+=1,At=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=xw,f=r(s,l)}while(eo);return f}function mw(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?Sl(r):r,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ie.flags|=1024),r}function af(){var t=vu!==0;return vu=0,t}function sf(t,r,s){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~s}function of(t){if(gu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gu=!1}qr=0,At=Xe=Ie=null,eo=!1,Al=vu=0,to=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ie.memoizedState=At=t:At=At.next=t,At}function St(){if(Xe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var r=At===null?Ie.memoizedState:At.next;if(r!==null)At=r,Xe=t;else{if(t===null)throw Ie.alternate===null?Error(a(467)):Error(a(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},At===null?Ie.memoizedState=At=t:At=At.next=t}return At}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(t){var r=Al;return Al+=1,to===null&&(to=[]),t=ov(to,t,r),r=Ie,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?Wv:Xv),t}function yu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sl(t);if(t.$$typeof===ae)return tn(t)}throw Error(a(438,String(t)))}function cf(t){var r=null,s=Ie.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=lf(),Ie.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(t),l=0;l<t;l++)s[l]=k;return r.index++,s}function ur(t,r){return typeof r=="function"?r(t):r}function _u(t){var r=St();return uf(r,Xe,t)}function uf(t,r,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var E=b=null,I=null,L=r,Q=!1;do{var X=L.lane&-536870913;if(X!==L.lane?(Le&X)===X:(qr&X)===X){var z=L.revertLane;if(z===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),X===$s&&(Q=!0);else if((qr&z)===z){L=L.next,z===$s&&(Q=!0);continue}else X={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(E=I=X,b=f):I=I.next=X,Ie.lanes|=z,Xr|=z;X=L.action,ss&&s(f,X),f=L.hasEagerState?L.eagerState:s(f,X)}else z={lane:X,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},I===null?(E=I=z,b=f):I=I.next=z,Ie.lanes|=X,Xr|=X;L=L.next}while(L!==null&&L!==r);if(I===null?b=f:I.next=E,!wn(f,t.memoizedState)&&(qt=!0,Q&&(s=Zs,s!==null)))throw s;t.memoizedState=f,t.baseState=b,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hf(t){var r=St(),s=r.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,h=s.pending,f=r.memoizedState;if(h!==null){s.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);wn(f,r.memoizedState)||(qt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),s.lastRenderedState=f}return[f,l]}function mv(t,r,s){var l=Ie,h=St(),f=qe;if(f){if(s===void 0)throw Error(a(407));s=s()}else s=r();var b=!wn((Xe||h).memoizedState,s);b&&(h.memoizedState=s,qt=!0),h=h.queue;var E=yv.bind(null,l,h,t);if(Rl(2048,8,E,[t]),h.getSnapshot!==r||b||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,no(9,bu(),vv.bind(null,l,h,s,r),null),it===null)throw Error(a(349));f||(qr&124)!==0||gv(l,r,s)}return s}function gv(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ie.updateQueue,r===null?(r=lf(),Ie.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function vv(t,r,s,l){r.value=s,r.getSnapshot=l,_v(r)&&bv(t)}function yv(t,r,s){return s(function(){_v(r)&&bv(t)})}function _v(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!wn(t,s)}catch{return!0}}function bv(t){var r=Qs(t,2);r!==null&&Dn(r,t,2)}function df(t){var r=vn();if(typeof t=="function"){var s=t;if(t=s(),ss){et(!0);try{s()}finally{et(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:t},r}function xv(t,r,s,l){return t.baseState=s,uf(t,Xe,typeof l=="function"?l:ur)}function gw(t,r,s,l,h){if(Eu(t))throw Error(a(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};K.T!==null?s(!0):f.isTransition=!1,l(f),s=r.pending,s===null?(f.next=r.pending=f,Ev(r,f)):(f.next=s.next,r.pending=s.next=f)}}function Ev(t,r){var s=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=K.T,b={};K.T=b;try{var E=s(h,l),I=K.S;I!==null&&I(b,E),Tv(t,r,E)}catch(L){ff(t,r,L)}finally{K.T=f}}else try{f=s(h,l),Tv(t,r,f)}catch(L){ff(t,r,L)}}function Tv(t,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){wv(t,r,l)},function(l){return ff(t,r,l)}):wv(t,r,s)}function wv(t,r,s){r.status="fulfilled",r.value=s,Av(r),t.state=s,r=t.pending,r!==null&&(s=r.next,s===r?t.pending=null:(s=s.next,r.next=s,Ev(t,s)))}function ff(t,r,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=s,Av(r),r=r.next;while(r!==l)}t.action=null}function Av(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Sv(t,r){return r}function Rv(t,r){if(qe){var s=it.formState;if(s!==null){e:{var l=Ie;if(qe){if(pt){t:{for(var h=pt,f=Ri;h.nodeType!==8;){if(!f){h=null;break t}if(h=ai(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){pt=ai(h.nextSibling),l=h.data==="F!";break e}}ns(l)}l=!1}l&&(r=s[0])}}return s=vn(),s.memoizedState=s.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sv,lastRenderedState:r},s.queue=l,s=Kv.bind(null,Ie,l),l.dispatch=s,l=df(!1),f=yf.bind(null,Ie,!1,l.queue),l=vn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,s=gw.bind(null,Ie,h,f,s),h.dispatch=s,l.memoizedState=t,[r,s,!1]}function Iv(t){var r=St();return Cv(r,Xe,t)}function Cv(t,r,s){if(r=uf(t,r,Sv)[0],t=_u(ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Sl(r)}catch(b){throw b===bl?fu:b}else l=r;r=St();var h=r.queue,f=h.dispatch;return s!==r.memoizedState&&(Ie.flags|=2048,no(9,bu(),vw.bind(null,h,s),null)),[l,f,t]}function vw(t,r){t.action=r}function Dv(t){var r=St(),s=Xe;if(s!==null)return Cv(r,s,t);St(),r=r.memoizedState,s=St();var l=s.queue.dispatch;return s.memoizedState=t,[r,l,!1]}function no(t,r,s,l){return t={tag:t,create:s,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=lf(),Ie.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,r.lastEffect=t),t}function bu(){return{destroy:void 0,resource:void 0}}function Ov(){return St().memoizedState}function xu(t,r,s,l){var h=vn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=no(1|r,bu(),s,l)}function Rl(t,r,s,l){var h=St();l=l===void 0?null:l;var f=h.memoizedState.inst;Xe!==null&&l!==null&&nf(l,Xe.memoizedState.deps)?h.memoizedState=no(r,f,s,l):(Ie.flags|=t,h.memoizedState=no(1|r,f,s,l))}function kv(t,r){xu(8390656,8,t,r)}function Nv(t,r){Rl(2048,8,t,r)}function Mv(t,r){return Rl(4,2,t,r)}function jv(t,r){return Rl(4,4,t,r)}function Pv(t,r){if(typeof r=="function"){t=t();var s=r(t);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Vv(t,r,s){s=s!=null?s.concat([t]):null,Rl(4,4,Pv.bind(null,r,t),s)}function pf(){}function Uv(t,r){var s=St();r=r===void 0?null:r;var l=s.memoizedState;return r!==null&&nf(r,l[1])?l[0]:(s.memoizedState=[t,r],t)}function Lv(t,r){var s=St();r=r===void 0?null:r;var l=s.memoizedState;if(r!==null&&nf(r,l[1]))return l[0];if(l=t(),ss){et(!0);try{t()}finally{et(!1)}}return s.memoizedState=[l,r],l}function mf(t,r,s){return s===void 0||(qr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=s,t=Fy(),Ie.lanes|=t,Xr|=t,s)}function zv(t,r,s,l){return wn(s,r)?s:Js.current!==null?(t=mf(t,s,l),wn(t,r)||(qt=!0),t):(qr&42)===0?(qt=!0,t.memoizedState=s):(t=Fy(),Ie.lanes|=t,Xr|=t,r)}function Bv(t,r,s,l,h){var f=te.p;te.p=f!==0&&8>f?f:8;var b=K.T,E={};K.T=E,yf(t,!1,r,s);try{var I=h(),L=K.S;if(L!==null&&L(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=fw(I,l);Il(t,r,Q,Cn(t))}else Il(t,r,l,Cn(t))}catch(X){Il(t,r,{then:function(){},status:"rejected",reason:X},Cn())}finally{te.p=f,K.T=b}}function yw(){}function gf(t,r,s,l){if(t.tag!==5)throw Error(a(476));var h=Fv(t).queue;Bv(t,h,r,de,s===null?yw:function(){return qv(t),s(l)})}function Fv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:de},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:s},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function qv(t){var r=Fv(t).next.queue;Il(t,r,{},Cn())}function vf(){return tn(Kl)}function Hv(){return St().memoizedState}function Gv(){return St().memoizedState}function _w(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var s=Cn();t=Br(s);var l=Fr(r,t,s);l!==null&&(Dn(l,r,s),El(l,r,s)),r={cache:Kd()},t.payload=r;return}r=r.return}}function bw(t,r,s){var l=Cn();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Eu(t)?Qv(r,s):(s=Pd(t,r,s,l),s!==null&&(Dn(s,t,l),Yv(s,r,l)))}function Kv(t,r,s){var l=Cn();Il(t,r,s,l)}function Il(t,r,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Eu(t))Qv(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var b=r.lastRenderedState,E=f(b,s);if(h.hasEagerState=!0,h.eagerState=E,wn(E,b))return au(t,r,h,0),it===null&&ru(),!1}catch{}finally{}if(s=Pd(t,r,h,l),s!==null)return Dn(s,t,l),Yv(s,r,l),!0}return!1}function yf(t,r,s,l){if(l={lane:2,revertLane:Xf(),action:l,hasEagerState:!1,eagerState:null,next:null},Eu(t)){if(r)throw Error(a(479))}else r=Pd(t,s,l,2),r!==null&&Dn(r,t,2)}function Eu(t){var r=t.alternate;return t===Ie||r!==null&&r===Ie}function Qv(t,r){eo=gu=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function Yv(t,r,s){if((s&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,s|=l,r.lanes=s,Xo(t,s)}}var Tu={readContext:tn,use:yu,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t},Wv={readContext:tn,use:yu,useCallback:function(t,r){return vn().memoizedState=[t,r===void 0?null:r],t},useContext:tn,useEffect:kv,useImperativeHandle:function(t,r,s){s=s!=null?s.concat([t]):null,xu(4194308,4,Pv.bind(null,r,t),s)},useLayoutEffect:function(t,r){return xu(4194308,4,t,r)},useInsertionEffect:function(t,r){xu(4,2,t,r)},useMemo:function(t,r){var s=vn();r=r===void 0?null:r;var l=t();if(ss){et(!0);try{t()}finally{et(!1)}}return s.memoizedState=[l,r],l},useReducer:function(t,r,s){var l=vn();if(s!==void 0){var h=s(r);if(ss){et(!0);try{s(r)}finally{et(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=bw.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var r=vn();return t={current:t},r.memoizedState=t},useState:function(t){t=df(t);var r=t.queue,s=Kv.bind(null,Ie,r);return r.dispatch=s,[t.memoizedState,s]},useDebugValue:pf,useDeferredValue:function(t,r){var s=vn();return mf(s,t,r)},useTransition:function(){var t=df(!1);return t=Bv.bind(null,Ie,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,s){var l=Ie,h=vn();if(qe){if(s===void 0)throw Error(a(407));s=s()}else{if(s=r(),it===null)throw Error(a(349));(Le&124)!==0||gv(l,r,s)}h.memoizedState=s;var f={value:s,getSnapshot:r};return h.queue=f,kv(yv.bind(null,l,f,t),[t]),l.flags|=2048,no(9,bu(),vv.bind(null,l,f,s,r),null),s},useId:function(){var t=vn(),r=it.identifierPrefix;if(qe){var s=or,l=sr;s=(l&~(1<<32-ft(l)-1)).toString(32)+s,r=""+r+"R"+s,s=vu++,0<s&&(r+="H"+s.toString(32)),r+=""}else s=pw++,r=""+r+"r"+s.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:vf,useFormState:Rv,useActionState:Rv,useOptimistic:function(t){var r=vn();r.memoizedState=r.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=yf.bind(null,Ie,!0,s),s.dispatch=r,[t,r]},useMemoCache:cf,useCacheRefresh:function(){return vn().memoizedState=_w.bind(null,Ie)}},Xv={readContext:tn,use:yu,useCallback:Uv,useContext:tn,useEffect:Nv,useImperativeHandle:Vv,useInsertionEffect:Mv,useLayoutEffect:jv,useMemo:Lv,useReducer:_u,useRef:Ov,useState:function(){return _u(ur)},useDebugValue:pf,useDeferredValue:function(t,r){var s=St();return zv(s,Xe.memoizedState,t,r)},useTransition:function(){var t=_u(ur)[0],r=St().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:mv,useId:Hv,useHostTransitionStatus:vf,useFormState:Iv,useActionState:Iv,useOptimistic:function(t,r){var s=St();return xv(s,Xe,t,r)},useMemoCache:cf,useCacheRefresh:Gv},xw={readContext:tn,use:yu,useCallback:Uv,useContext:tn,useEffect:Nv,useImperativeHandle:Vv,useInsertionEffect:Mv,useLayoutEffect:jv,useMemo:Lv,useReducer:hf,useRef:Ov,useState:function(){return hf(ur)},useDebugValue:pf,useDeferredValue:function(t,r){var s=St();return Xe===null?mf(s,t,r):zv(s,Xe.memoizedState,t,r)},useTransition:function(){var t=hf(ur)[0],r=St().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:mv,useId:Hv,useHostTransitionStatus:vf,useFormState:Dv,useActionState:Dv,useOptimistic:function(t,r){var s=St();return Xe!==null?xv(s,Xe,t,r):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:cf,useCacheRefresh:Gv},io=null,Cl=0;function wu(t){var r=Cl;return Cl+=1,io===null&&(io=[]),ov(io,t,r)}function Dl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Au(t,r){throw r.$$typeof===S?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function $v(t){var r=t._init;return r(t._payload)}function Zv(t){function r(j,O){if(t){var V=j.deletions;V===null?(j.deletions=[O],j.flags|=16):V.push(O)}}function s(j,O){if(!t)return null;for(;O!==null;)r(j,O),O=O.sibling;return null}function l(j){for(var O=new Map;j!==null;)j.key!==null?O.set(j.key,j):O.set(j.index,j),j=j.sibling;return O}function h(j,O){return j=ar(j,O),j.index=0,j.sibling=null,j}function f(j,O,V){return j.index=V,t?(V=j.alternate,V!==null?(V=V.index,V<O?(j.flags|=67108866,O):V):(j.flags|=67108866,O)):(j.flags|=1048576,O)}function b(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function E(j,O,V,W){return O===null||O.tag!==6?(O=Ud(V,j.mode,W),O.return=j,O):(O=h(O,V),O.return=j,O)}function I(j,O,V,W){var le=V.type;return le===F?Q(j,O,V.props.children,W,V.key):O!==null&&(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===A&&$v(le)===O.type)?(O=h(O,V.props),Dl(O,V),O.return=j,O):(O=ou(V.type,V.key,V.props,null,j.mode,W),Dl(O,V),O.return=j,O)}function L(j,O,V,W){return O===null||O.tag!==4||O.stateNode.containerInfo!==V.containerInfo||O.stateNode.implementation!==V.implementation?(O=Ld(V,j.mode,W),O.return=j,O):(O=h(O,V.children||[]),O.return=j,O)}function Q(j,O,V,W,le){return O===null||O.tag!==7?(O=Za(V,j.mode,W,le),O.return=j,O):(O=h(O,V),O.return=j,O)}function X(j,O,V){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ud(""+O,j.mode,V),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return V=ou(O.type,O.key,O.props,null,j.mode,V),Dl(V,O),V.return=j,V;case U:return O=Ld(O,j.mode,V),O.return=j,O;case A:var W=O._init;return O=W(O._payload),X(j,O,V)}if(Be(O)||N(O))return O=Za(O,j.mode,V,null),O.return=j,O;if(typeof O.then=="function")return X(j,wu(O),V);if(O.$$typeof===ae)return X(j,hu(j,O),V);Au(j,O)}return null}function z(j,O,V,W){var le=O!==null?O.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return le!==null?null:E(j,O,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case w:return V.key===le?I(j,O,V,W):null;case U:return V.key===le?L(j,O,V,W):null;case A:return le=V._init,V=le(V._payload),z(j,O,V,W)}if(Be(V)||N(V))return le!==null?null:Q(j,O,V,W,null);if(typeof V.then=="function")return z(j,O,wu(V),W);if(V.$$typeof===ae)return z(j,O,hu(j,V),W);Au(j,V)}return null}function B(j,O,V,W,le){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return j=j.get(V)||null,E(O,j,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return j=j.get(W.key===null?V:W.key)||null,I(O,j,W,le);case U:return j=j.get(W.key===null?V:W.key)||null,L(O,j,W,le);case A:var De=W._init;return W=De(W._payload),B(j,O,V,W,le)}if(Be(W)||N(W))return j=j.get(V)||null,Q(O,j,W,le,null);if(typeof W.then=="function")return B(j,O,V,wu(W),le);if(W.$$typeof===ae)return B(j,O,V,hu(O,W),le);Au(O,W)}return null}function Te(j,O,V,W){for(var le=null,De=null,he=O,ve=O=0,Gt=null;he!==null&&ve<V.length;ve++){he.index>ve?(Gt=he,he=null):Gt=he.sibling;var Fe=z(j,he,V[ve],W);if(Fe===null){he===null&&(he=Gt);break}t&&he&&Fe.alternate===null&&r(j,he),O=f(Fe,O,ve),De===null?le=Fe:De.sibling=Fe,De=Fe,he=Gt}if(ve===V.length)return s(j,he),qe&&es(j,ve),le;if(he===null){for(;ve<V.length;ve++)he=X(j,V[ve],W),he!==null&&(O=f(he,O,ve),De===null?le=he:De.sibling=he,De=he);return qe&&es(j,ve),le}for(he=l(he);ve<V.length;ve++)Gt=B(he,j,ve,V[ve],W),Gt!==null&&(t&&Gt.alternate!==null&&he.delete(Gt.key===null?ve:Gt.key),O=f(Gt,O,ve),De===null?le=Gt:De.sibling=Gt,De=Gt);return t&&he.forEach(function(aa){return r(j,aa)}),qe&&es(j,ve),le}function me(j,O,V,W){if(V==null)throw Error(a(151));for(var le=null,De=null,he=O,ve=O=0,Gt=null,Fe=V.next();he!==null&&!Fe.done;ve++,Fe=V.next()){he.index>ve?(Gt=he,he=null):Gt=he.sibling;var aa=z(j,he,Fe.value,W);if(aa===null){he===null&&(he=Gt);break}t&&he&&aa.alternate===null&&r(j,he),O=f(aa,O,ve),De===null?le=aa:De.sibling=aa,De=aa,he=Gt}if(Fe.done)return s(j,he),qe&&es(j,ve),le;if(he===null){for(;!Fe.done;ve++,Fe=V.next())Fe=X(j,Fe.value,W),Fe!==null&&(O=f(Fe,O,ve),De===null?le=Fe:De.sibling=Fe,De=Fe);return qe&&es(j,ve),le}for(he=l(he);!Fe.done;ve++,Fe=V.next())Fe=B(he,j,ve,Fe.value,W),Fe!==null&&(t&&Fe.alternate!==null&&he.delete(Fe.key===null?ve:Fe.key),O=f(Fe,O,ve),De===null?le=Fe:De.sibling=Fe,De=Fe);return t&&he.forEach(function(EA){return r(j,EA)}),qe&&es(j,ve),le}function Ze(j,O,V,W){if(typeof V=="object"&&V!==null&&V.type===F&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case w:e:{for(var le=V.key;O!==null;){if(O.key===le){if(le=V.type,le===F){if(O.tag===7){s(j,O.sibling),W=h(O,V.props.children),W.return=j,j=W;break e}}else if(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===A&&$v(le)===O.type){s(j,O.sibling),W=h(O,V.props),Dl(W,V),W.return=j,j=W;break e}s(j,O);break}else r(j,O);O=O.sibling}V.type===F?(W=Za(V.props.children,j.mode,W,V.key),W.return=j,j=W):(W=ou(V.type,V.key,V.props,null,j.mode,W),Dl(W,V),W.return=j,j=W)}return b(j);case U:e:{for(le=V.key;O!==null;){if(O.key===le)if(O.tag===4&&O.stateNode.containerInfo===V.containerInfo&&O.stateNode.implementation===V.implementation){s(j,O.sibling),W=h(O,V.children||[]),W.return=j,j=W;break e}else{s(j,O);break}else r(j,O);O=O.sibling}W=Ld(V,j.mode,W),W.return=j,j=W}return b(j);case A:return le=V._init,V=le(V._payload),Ze(j,O,V,W)}if(Be(V))return Te(j,O,V,W);if(N(V)){if(le=N(V),typeof le!="function")throw Error(a(150));return V=le.call(V),me(j,O,V,W)}if(typeof V.then=="function")return Ze(j,O,wu(V),W);if(V.$$typeof===ae)return Ze(j,O,hu(j,V),W);Au(j,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,O!==null&&O.tag===6?(s(j,O.sibling),W=h(O,V),W.return=j,j=W):(s(j,O),W=Ud(V,j.mode,W),W.return=j,j=W),b(j)):s(j,O)}return function(j,O,V,W){try{Cl=0;var le=Ze(j,O,V,W);return io=null,le}catch(he){if(he===bl||he===fu)throw he;var De=An(29,he,null,j.mode);return De.lanes=W,De.return=j,De}finally{}}}var ro=Zv(!0),Jv=Zv(!1),Hn=Et(null),Ii=null;function Hr(t){var r=t.alternate;xe(jt,jt.current&1),xe(Hn,t),Ii===null&&(r===null||Js.current!==null||r.memoizedState!==null)&&(Ii=t)}function ey(t){if(t.tag===22){if(xe(jt,jt.current),xe(Hn,t),Ii===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ii=t)}}else Gr()}function Gr(){xe(jt,jt.current),xe(Hn,Hn.current)}function hr(t){ke(Hn),Ii===t&&(Ii=null),ke(jt)}var jt=Et(0);function Su(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||lp(s)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _f(t,r,s,l){r=t.memoizedState,s=s(l,r),s=s==null?r:x({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var bf={enqueueSetState:function(t,r,s){t=t._reactInternals;var l=Cn(),h=Br(l);h.payload=r,s!=null&&(h.callback=s),r=Fr(t,h,l),r!==null&&(Dn(r,t,l),El(r,t,l))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var l=Cn(),h=Br(l);h.tag=1,h.payload=r,s!=null&&(h.callback=s),r=Fr(t,h,l),r!==null&&(Dn(r,t,l),El(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Cn(),l=Br(s);l.tag=2,r!=null&&(l.callback=r),r=Fr(t,l,s),r!==null&&(Dn(r,t,s),El(r,t,s))}};function ty(t,r,s,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):r.prototype&&r.prototype.isPureReactComponent?!dl(s,l)||!dl(h,f):!0}function ny(t,r,s,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,l),r.state!==t&&bf.enqueueReplaceState(r,r.state,null)}function os(t,r){var s=r;if("ref"in r){s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}if(t=t.defaultProps){s===r&&(s=x({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}var Ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function iy(t){Ru(t)}function ry(t){console.error(t)}function ay(t){Ru(t)}function Iu(t,r){try{var s=t.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function sy(t,r,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function xf(t,r,s){return s=Br(s),s.tag=3,s.payload={element:null},s.callback=function(){Iu(t,r)},s}function oy(t){return t=Br(t),t.tag=3,t}function ly(t,r,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){sy(r,s,l)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){sy(r,s,l),typeof h!="function"&&($r===null?$r=new Set([this]):$r.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Ew(t,r,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=s.alternate,r!==null&&vl(r,s,h,!0),s=Hn.current,s!==null){switch(s.tag){case 13:return Ii===null?Gf():s.alternate===null&&mt===0&&(mt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===Wd?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([l]):r.add(l),Qf(t,l,h)),!1;case 22:return s.flags|=65536,l===Wd?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([l]):s.add(l)),Qf(t,l,h)),!1}throw Error(a(435,s.tag))}return Qf(t,l,h),Gf(),!1}if(qe)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Fd&&(t=Error(a(422),{cause:l}),gl(zn(t,s)))):(l!==Fd&&(r=Error(a(423),{cause:l}),gl(zn(r,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=zn(l,s),h=xf(t.stateNode,l,h),Zd(t,h),mt!==4&&(mt=2)),!1;var f=Error(a(520),{cause:l});if(f=zn(f,s),Vl===null?Vl=[f]:Vl.push(f),mt!==4&&(mt=2),r===null)return!0;l=zn(l,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=xf(s.stateNode,l,t),Zd(s,t),!1;case 1:if(r=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&($r===null||!$r.has(f))))return s.flags|=65536,h&=-h,s.lanes|=h,h=oy(h),ly(h,t,s,l),Zd(s,h),!1}s=s.return}while(s!==null);return!1}var cy=Error(a(461)),qt=!1;function $t(t,r,s,l){r.child=t===null?Jv(r,null,s,l):ro(r,t.child,s,l)}function uy(t,r,s,l,h){s=s.render;var f=r.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return rs(r),l=rf(t,r,s,b,f,h),E=af(),t!==null&&!qt?(sf(t,r,h),dr(t,r,h)):(qe&&E&&zd(r),r.flags|=1,$t(t,r,l,h),r.child)}function hy(t,r,s,l,h){if(t===null){var f=s.type;return typeof f=="function"&&!Vd(f)&&f.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=f,dy(t,r,f,l,h)):(t=ou(s.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Cf(t,h)){var b=f.memoizedProps;if(s=s.compare,s=s!==null?s:dl,s(b,l)&&t.ref===r.ref)return dr(t,r,h)}return r.flags|=1,t=ar(f,l),t.ref=r.ref,t.return=r,r.child=t}function dy(t,r,s,l,h){if(t!==null){var f=t.memoizedProps;if(dl(f,l)&&t.ref===r.ref)if(qt=!1,r.pendingProps=l=f,Cf(t,h))(t.flags&131072)!==0&&(qt=!0);else return r.lanes=t.lanes,dr(t,r,h)}return Ef(t,r,s,l,h)}function fy(t,r,s){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|s:s,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return py(t,r,l,s)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&du(r,f!==null?f.cachePool:null),f!==null?dv(r,f):ef(),ey(r);else return r.lanes=r.childLanes=536870912,py(t,r,f!==null?f.baseLanes|s:s,s)}else f!==null?(du(r,f.cachePool),dv(r,f),Gr(),r.memoizedState=null):(t!==null&&du(r,null),ef(),Gr());return $t(t,r,h,s),r.child}function py(t,r,s,l){var h=Yd();return h=h===null?null:{parent:Mt._currentValue,pool:h},r.memoizedState={baseLanes:s,cachePool:h},t!==null&&du(r,null),ef(),ey(r),t!==null&&vl(t,r,l,!0),null}function Cu(t,r){var s=r.ref;if(s===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(r.flags|=4194816)}}function Ef(t,r,s,l,h){return rs(r),s=rf(t,r,s,l,void 0,h),l=af(),t!==null&&!qt?(sf(t,r,h),dr(t,r,h)):(qe&&l&&zd(r),r.flags|=1,$t(t,r,s,h),r.child)}function my(t,r,s,l,h,f){return rs(r),r.updateQueue=null,s=pv(r,l,s,h),fv(t),l=af(),t!==null&&!qt?(sf(t,r,f),dr(t,r,f)):(qe&&l&&zd(r),r.flags|=1,$t(t,r,s,f),r.child)}function gy(t,r,s,l,h){if(rs(r),r.stateNode===null){var f=Ys,b=s.contextType;typeof b=="object"&&b!==null&&(f=tn(b)),f=new s(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Xd(r),b=s.contextType,f.context=typeof b=="object"&&b!==null?tn(b):Ys,f.state=r.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(_f(r,s,b,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&bf.enqueueReplaceState(f,f.state,null),wl(r,l,f,h),Tl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var E=r.memoizedProps,I=os(s,E);f.props=I;var L=f.context,Q=s.contextType;b=Ys,typeof Q=="object"&&Q!==null&&(b=tn(Q));var X=s.getDerivedStateFromProps;Q=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==b)&&ny(r,f,l,b),zr=!1;var z=r.memoizedState;f.state=z,wl(r,l,f,h),Tl(),L=r.memoizedState,E||z!==L||zr?(typeof X=="function"&&(_f(r,s,X,l),L=r.memoizedState),(I=zr||ty(r,s,I,l,z,L,b))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=L),f.props=l,f.state=L,f.context=b,l=I):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,$d(t,r),b=r.memoizedProps,Q=os(s,b),f.props=Q,X=r.pendingProps,z=f.context,L=s.contextType,I=Ys,typeof L=="object"&&L!==null&&(I=tn(L)),E=s.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==X||z!==I)&&ny(r,f,l,I),zr=!1,z=r.memoizedState,f.state=z,wl(r,l,f,h),Tl();var B=r.memoizedState;b!==X||z!==B||zr||t!==null&&t.dependencies!==null&&uu(t.dependencies)?(typeof E=="function"&&(_f(r,s,E,l),B=r.memoizedState),(Q=zr||ty(r,s,Q,l,z,B,I)||t!==null&&t.dependencies!==null&&uu(t.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,B,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,B,I)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&z===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=B),f.props=l,f.state=B,f.context=I,l=Q):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&z===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&z===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Cu(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=ro(r,t.child,null,h),r.child=ro(r,null,s,h)):$t(t,r,s,h),r.memoizedState=f.state,t=r.child):t=dr(t,r,h),t}function vy(t,r,s,l){return ml(),r.flags|=256,$t(t,r,s,l),r.child}var Tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wf(t){return{baseLanes:t,cachePool:rv()}}function Af(t,r,s){return t=t!==null?t.childLanes&~s:0,r&&(t|=Gn),t}function yy(t,r,s){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),b&&(h=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(qe){if(h?Hr(r):Gr(),qe){var E=pt,I;if(I=E){e:{for(I=E,E=Ri;I.nodeType!==8;){if(!E){E=null;break e}if(I=ai(I.nextSibling),I===null){E=null;break e}}E=I}E!==null?(r.memoizedState={dehydrated:E,treeContext:Ja!==null?{id:sr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},I=An(18,null,null,0),I.stateNode=E,I.return=r,r.child=I,hn=r,pt=null,I=!0):I=!1}I||ns(r)}if(E=r.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return lp(E)?r.lanes=32:r.lanes=536870912,null;hr(r)}return E=l.children,l=l.fallback,h?(Gr(),h=r.mode,E=Du({mode:"hidden",children:E},h),l=Za(l,h,s,null),E.return=r,l.return=r,E.sibling=l,r.child=E,h=r.child,h.memoizedState=wf(s),h.childLanes=Af(t,b,s),r.memoizedState=Tf,l):(Hr(r),Sf(r,E))}if(I=t.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(f)r.flags&256?(Hr(r),r.flags&=-257,r=Rf(t,r,s)):r.memoizedState!==null?(Gr(),r.child=t.child,r.flags|=128,r=null):(Gr(),h=l.fallback,E=r.mode,l=Du({mode:"visible",children:l.children},E),h=Za(h,E,s,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,ro(r,t.child,null,s),l=r.child,l.memoizedState=wf(s),l.childLanes=Af(t,b,s),r.memoizedState=Tf,r=h);else if(Hr(r),lp(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var L=b.dgst;b=L,l=Error(a(419)),l.stack="",l.digest=b,gl({value:l,source:null,stack:null}),r=Rf(t,r,s)}else if(qt||vl(t,r,s,!1),b=(s&t.childLanes)!==0,qt||b){if(b=it,b!==null&&(l=s&-s,l=(l&42)!==0?1:kr(l),l=(l&(b.suspendedLanes|s))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Qs(t,l),Dn(b,t,l),cy;E.data==="$?"||Gf(),r=Rf(t,r,s)}else E.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=I.treeContext,pt=ai(E.nextSibling),hn=r,qe=!0,ts=null,Ri=!1,t!==null&&(Fn[qn++]=sr,Fn[qn++]=or,Fn[qn++]=Ja,sr=t.id,or=t.overflow,Ja=r),r=Sf(r,l.children),r.flags|=4096);return r}return h?(Gr(),h=l.fallback,E=r.mode,I=t.child,L=I.sibling,l=ar(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,L!==null?h=ar(L,h):(h=Za(h,E,s,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,E=t.child.memoizedState,E===null?E=wf(s):(I=E.cachePool,I!==null?(L=Mt._currentValue,I=I.parent!==L?{parent:L,pool:L}:I):I=rv(),E={baseLanes:E.baseLanes|s,cachePool:I}),h.memoizedState=E,h.childLanes=Af(t,b,s),r.memoizedState=Tf,l):(Hr(r),s=t.child,t=s.sibling,s=ar(s,{mode:"visible",children:l.children}),s.return=r,s.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=s,r.memoizedState=null,s)}function Sf(t,r){return r=Du({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Du(t,r){return t=An(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Rf(t,r,s){return ro(r,t.child,null,s),t=Sf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function _y(t,r,s){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Hd(t.return,r,s)}function If(t,r,s,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=s,f.tailMode=h)}function by(t,r,s){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if($t(t,r,l.children,s),l=jt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_y(t,s,r);else if(t.tag===19)_y(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(xe(jt,l),h){case"forwards":for(s=r.child,h=null;s!==null;)t=s.alternate,t!==null&&Su(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=r.child,r.child=null):(h=s.sibling,s.sibling=null),If(r,!1,h,s,f);break;case"backwards":for(s=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Su(t)===null){r.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}If(r,!0,s,null,f);break;case"together":If(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function dr(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Xr|=r.lanes,(s&r.childLanes)===0)if(t!==null){if(vl(t,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,s=ar(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=ar(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function Cf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&uu(t)))}function Tw(t,r,s){switch(r.tag){case 3:Hi(r,r.stateNode.containerInfo),Lr(r,Mt,t.memoizedState.cache),ml();break;case 27:case 5:En(r);break;case 4:Hi(r,r.stateNode.containerInfo);break;case 10:Lr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Hr(r),r.flags|=128,null):(s&r.child.childLanes)!==0?yy(t,r,s):(Hr(r),t=dr(t,r,s),t!==null?t.sibling:null);Hr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(s&r.childLanes)!==0,l||(vl(t,r,s,!1),l=(s&r.childLanes)!==0),h){if(l)return by(t,r,s);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),xe(jt,jt.current),l)break;return null;case 22:case 23:return r.lanes=0,fy(t,r,s);case 24:Lr(r,Mt,t.memoizedState.cache)}return dr(t,r,s)}function xy(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps)qt=!0;else{if(!Cf(t,s)&&(r.flags&128)===0)return qt=!1,Tw(t,r,s);qt=(t.flags&131072)!==0}else qt=!1,qe&&(r.flags&1048576)!==0&&$g(r,cu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Vd(l)?(t=os(l,t),r.tag=1,r=gy(null,r,l,t,s)):(r.tag=0,r=Ef(null,r,l,t,s));else{if(l!=null){if(h=l.$$typeof,h===ee){r.tag=11,r=uy(null,r,l,t,s);break e}else if(h===D){r.tag=14,r=hy(null,r,l,t,s);break e}}throw r=Oe(l)||l,Error(a(306,r,""))}}return r;case 0:return Ef(t,r,r.type,r.pendingProps,s);case 1:return l=r.type,h=os(l,r.pendingProps),gy(t,r,l,h,s);case 3:e:{if(Hi(r,r.stateNode.containerInfo),t===null)throw Error(a(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,$d(t,r),wl(r,l,null,s);var b=r.memoizedState;if(l=b.cache,Lr(r,Mt,l),l!==f.cache&&Gd(r,[Mt],s,!0),Tl(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=vy(t,r,l,s);break e}else if(l!==h){h=zn(Error(a(424)),r),gl(h),r=vy(t,r,l,s);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=ai(t.firstChild),hn=r,qe=!0,ts=null,Ri=!0,s=Jv(r,null,l,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ml(),l===h){r=dr(t,r,s);break e}$t(t,r,l,s)}r=r.child}return r;case 26:return Cu(t,r),t===null?(s=A_(r.type,null,r.pendingProps,null))?r.memoizedState=s:qe||(s=r.type,t=r.pendingProps,l=Hu(zt.current).createElement(s),l[Ot]=r,l[Tt]=t,Jt(l,s,t),yt(l),r.stateNode=l):r.memoizedState=A_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return En(r),t===null&&qe&&(l=r.stateNode=E_(r.type,r.pendingProps,zt.current),hn=r,Ri=!0,h=pt,ea(r.type)?(cp=h,pt=ai(l.firstChild)):pt=h),$t(t,r,r.pendingProps.children,s),Cu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&qe&&((h=l=pt)&&(l=$w(l,r.type,r.pendingProps,Ri),l!==null?(r.stateNode=l,hn=r,pt=ai(l.firstChild),Ri=!1,h=!0):h=!1),h||ns(r)),En(r),h=r.type,f=r.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,ap(h,f)?l=null:b!==null&&ap(h,b)&&(r.flags|=32),r.memoizedState!==null&&(h=rf(t,r,mw,null,null,s),Kl._currentValue=h),Cu(t,r),$t(t,r,l,s),r.child;case 6:return t===null&&qe&&((t=s=pt)&&(s=Zw(s,r.pendingProps,Ri),s!==null?(r.stateNode=s,hn=r,pt=null,t=!0):t=!1),t||ns(r)),null;case 13:return yy(t,r,s);case 4:return Hi(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=ro(r,null,l,s):$t(t,r,l,s),r.child;case 11:return uy(t,r,r.type,r.pendingProps,s);case 7:return $t(t,r,r.pendingProps,s),r.child;case 8:return $t(t,r,r.pendingProps.children,s),r.child;case 12:return $t(t,r,r.pendingProps.children,s),r.child;case 10:return l=r.pendingProps,Lr(r,r.type,l.value),$t(t,r,l.children,s),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,rs(r),h=tn(h),l=l(h),r.flags|=1,$t(t,r,l,s),r.child;case 14:return hy(t,r,r.type,r.pendingProps,s);case 15:return dy(t,r,r.type,r.pendingProps,s);case 19:return by(t,r,s);case 31:return l=r.pendingProps,s=r.mode,l={mode:l.mode,children:l.children},t===null?(s=Du(l,s),s.ref=r.ref,r.child=s,s.return=r,r=s):(s=ar(t.child,l),s.ref=r.ref,r.child=s,s.return=r,r=s),r;case 22:return fy(t,r,s);case 24:return rs(r),l=tn(Mt),t===null?(h=Yd(),h===null&&(h=it,f=Kd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=s),h=f),r.memoizedState={parent:l,cache:h},Xd(r),Lr(r,Mt,h)):((t.lanes&s)!==0&&($d(t,r),wl(r,null,null,s),Tl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Lr(r,Mt,l)):(l=f.cache,Lr(r,Mt,l),l!==h.cache&&Gd(r,[Mt],s,!0))),$t(t,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function fr(t){t.flags|=4}function Ey(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!D_(r)){if(r=Hn.current,r!==null&&((Le&4194048)===Le?Ii!==null:(Le&62914560)!==Le&&(Le&536870912)===0||r!==Ii))throw xl=Wd,av;t.flags|=8192}}function Ou(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Yo():536870912,t.lanes|=r,lo|=r)}function Ol(t,r){if(!qe)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(r)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=s,r}function ww(t,r,s){var l=r.pendingProps;switch(Bd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(r),null;case 1:return lt(r),null;case 3:return s=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),cr(Mt),Wn(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(pl(r)?fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ev())),lt(r),null;case 26:return s=r.memoizedState,t===null?(fr(r),s!==null?(lt(r),Ey(r,s)):(lt(r),r.flags&=-16777217)):s?s!==t.memoizedState?(fr(r),lt(r),Ey(r,s)):(lt(r),r.flags&=-16777217):(t.memoizedProps!==l&&fr(r),lt(r),r.flags&=-16777217),null;case 27:mn(r),s=zt.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return lt(r),null}t=Je.current,pl(r)?Zg(r):(t=E_(h,l,s),r.stateNode=t,fr(r))}return lt(r),null;case 5:if(mn(r),s=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(a(166));return lt(r),null}if(t=Je.current,pl(r))Zg(r);else{switch(h=Hu(zt.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}t[Ot]=r,t[Tt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Jt(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&fr(r)}}return lt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(a(166));if(t=zt.current,pl(r)){if(t=r.stateNode,s=r.memoizedProps,l=null,h=hn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ot]=r,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||m_(t.nodeValue,s)),t||ns(r)}else t=Hu(t).createTextNode(l),t[Ot]=r,r.stateNode=t}return lt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=pl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[Ot]=r}else ml(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;lt(r),h=!1}else h=ev(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(hr(r),r):(hr(r),null)}if(hr(r),(r.flags&128)!==0)return r.lanes=s,r;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return s!==t&&s&&(r.child.flags|=8192),Ou(r,r.updateQueue),lt(r),null;case 4:return Wn(),t===null&&ep(r.stateNode.containerInfo),lt(r),null;case 10:return cr(r.type),lt(r),null;case 19:if(ke(jt),h=r.memoizedState,h===null)return lt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Ol(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Su(t),f!==null){for(r.flags|=128,Ol(h,!1),t=f.updateQueue,r.updateQueue=t,Ou(r,t),r.subtreeFlags=0,t=s,s=r.child;s!==null;)Xg(s,t),s=s.sibling;return xe(jt,jt.current&1|2),r.child}t=t.sibling}h.tail!==null&&Dt()>Mu&&(r.flags|=128,l=!0,Ol(h,!1),r.lanes=4194304)}else{if(!l)if(t=Su(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Ou(r,t),Ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return lt(r),null}else 2*Dt()-h.renderingStartTime>Mu&&s!==536870912&&(r.flags|=128,l=!0,Ol(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Dt(),r.sibling=null,t=jt.current,xe(jt,l?t&1|2:t&1),r):(lt(r),null);case 22:case 23:return hr(r),tf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(s&536870912)!==0&&(r.flags&128)===0&&(lt(r),r.subtreeFlags&6&&(r.flags|=8192)):lt(r),s=r.updateQueue,s!==null&&Ou(r,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==s&&(r.flags|=2048),t!==null&&ke(as),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),cr(Mt),lt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function Aw(t,r){switch(Bd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return cr(Mt),Wn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return mn(r),null;case 13:if(hr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));ml()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ke(jt),null;case 4:return Wn(),null;case 10:return cr(r.type),null;case 22:case 23:return hr(r),tf(),t!==null&&ke(as),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return cr(Mt),null;case 25:return null;default:return null}}function Ty(t,r){switch(Bd(r),r.tag){case 3:cr(Mt),Wn();break;case 26:case 27:case 5:mn(r);break;case 4:Wn();break;case 13:hr(r);break;case 19:ke(jt);break;case 10:cr(r.type);break;case 22:case 23:hr(r),tf(),t!==null&&ke(as);break;case 24:cr(Mt)}}function kl(t,r){try{var s=r.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&t)===t){l=void 0;var f=s.create,b=s.inst;l=f(),b.destroy=l}s=s.next}while(s!==h)}}catch(E){tt(r,r.return,E)}}function Kr(t,r,s){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,h=r;var I=s,L=E;try{L()}catch(Q){tt(h,I,Q)}}}l=l.next}while(l!==f)}}catch(Q){tt(r,r.return,Q)}}function wy(t){var r=t.updateQueue;if(r!==null){var s=t.stateNode;try{hv(r,s)}catch(l){tt(t,t.return,l)}}}function Ay(t,r,s){s.props=os(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){tt(t,r,l)}}function Nl(t,r){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(h){tt(t,r,h)}}function Ci(t,r){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){tt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){tt(t,r,h)}else s.current=null}function Sy(t){var r=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){tt(t,t.return,h)}}function Df(t,r,s){try{var l=t.stateNode;Kw(l,t.type,s,r),l[Tt]=r}catch(h){tt(t,t.return,h)}}function Ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ea(t.type)||t.tag===4}function Of(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(t),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=qu));else if(l!==4&&(l===27&&ea(t.type)&&(s=t.stateNode,r=null),t=t.child,t!==null))for(kf(t,r,s),t=t.sibling;t!==null;)kf(t,r,s),t=t.sibling}function ku(t,r,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(l!==4&&(l===27&&ea(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(ku(t,r,s),t=t.sibling;t!==null;)ku(t,r,s),t=t.sibling}function Iy(t){var r=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Jt(r,l,s),r[Ot]=t,r[Tt]=s}catch(f){tt(t,t.return,f)}}var pr=!1,bt=!1,Nf=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Sw(t,r){if(t=t.containerInfo,ip=Xu,t=zg(t),Dd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var b=0,E=-1,I=-1,L=0,Q=0,X=t,z=null;t:for(;;){for(var B;X!==s||h!==0&&X.nodeType!==3||(E=b+h),X!==f||l!==0&&X.nodeType!==3||(I=b+l),X.nodeType===3&&(b+=X.nodeValue.length),(B=X.firstChild)!==null;)z=X,X=B;for(;;){if(X===t)break t;if(z===s&&++L===h&&(E=b),z===f&&++Q===l&&(I=b),(B=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=B}s=E===-1||I===-1?null:{start:E,end:I}}else s=null}s=s||{start:0,end:0}}else s=null;for(rp={focusedElem:t,selectionRange:s},Xu=!1,Ht=r;Ht!==null;)if(r=Ht,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ht=t;else for(;Ht!==null;){switch(r=Ht,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=r,h=f.memoizedProps,f=f.memoizedState,l=s.stateNode;try{var Te=os(s.type,h,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(Te,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){tt(s,s.return,me)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,s=t.nodeType,s===9)op(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":op(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,Ht=t;break}Ht=r.return}}function Dy(t,r,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Qr(t,s),l&4&&kl(5,s);break;case 1:if(Qr(t,s),l&4)if(t=s.stateNode,r===null)try{t.componentDidMount()}catch(b){tt(s,s.return,b)}else{var h=os(s.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){tt(s,s.return,b)}}l&64&&wy(s),l&512&&Nl(s,s.return);break;case 3:if(Qr(t,s),l&64&&(t=s.updateQueue,t!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{hv(t,r)}catch(b){tt(s,s.return,b)}}break;case 27:r===null&&l&4&&Iy(s);case 26:case 5:Qr(t,s),r===null&&l&4&&Sy(s),l&512&&Nl(s,s.return);break;case 12:Qr(t,s);break;case 13:Qr(t,s),l&4&&Ny(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=jw.bind(null,s),Jw(t,s))));break;case 22:if(l=s.memoizedState!==null||pr,!l){r=r!==null&&r.memoizedState!==null||bt,h=pr;var f=bt;pr=l,(bt=r)&&!f?Yr(t,s,(s.subtreeFlags&8772)!==0):Qr(t,s),pr=h,bt=f}break;case 30:break;default:Qr(t,s)}}function Oy(t){var r=t.alternate;r!==null&&(t.alternate=null,Oy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&jr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var st=null,yn=!1;function mr(t,r,s){for(s=s.child;s!==null;)ky(t,r,s),s=s.sibling}function ky(t,r,s){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(Re,s)}catch{}switch(s.tag){case 26:bt||Ci(s,r),mr(t,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:bt||Ci(s,r);var l=st,h=yn;ea(s.type)&&(st=s.stateNode,yn=!1),mr(t,r,s),Fl(s.stateNode),st=l,yn=h;break;case 5:bt||Ci(s,r);case 6:if(l=st,h=yn,st=null,mr(t,r,s),st=l,yn=h,st!==null)if(yn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(s.stateNode)}catch(f){tt(s,r,f)}else try{st.removeChild(s.stateNode)}catch(f){tt(s,r,f)}break;case 18:st!==null&&(yn?(t=st,b_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Xl(t)):b_(st,s.stateNode));break;case 4:l=st,h=yn,st=s.stateNode.containerInfo,yn=!0,mr(t,r,s),st=l,yn=h;break;case 0:case 11:case 14:case 15:bt||Kr(2,s,r),bt||Kr(4,s,r),mr(t,r,s);break;case 1:bt||(Ci(s,r),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ay(s,r,l)),mr(t,r,s);break;case 21:mr(t,r,s);break;case 22:bt=(l=bt)||s.memoizedState!==null,mr(t,r,s),bt=l;break;default:mr(t,r,s)}}function Ny(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xl(t)}catch(s){tt(r,r.return,s)}}function Rw(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Cy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Cy),r;default:throw Error(a(435,t.tag))}}function Mf(t,r){var s=Rw(t);r.forEach(function(l){var h=Pw.bind(null,t,l);s.has(l)||(s.add(l),l.then(h,h))})}function Sn(t,r){var s=r.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],f=t,b=r,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(ea(E.type)){st=E.stateNode,yn=!1;break e}break;case 5:st=E.stateNode,yn=!1;break e;case 3:case 4:st=E.stateNode.containerInfo,yn=!0;break e}E=E.return}if(st===null)throw Error(a(160));ky(f,b,h),st=null,yn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)My(r,t),r=r.sibling}var ri=null;function My(t,r){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(r,t),Rn(t),l&4&&(Kr(3,t,t.return),kl(3,t),Kr(5,t,t.return));break;case 1:Sn(r,t),Rn(t),l&512&&(bt||s===null||Ci(s,s.return)),l&64&&pr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=ri;if(Sn(r,t),Rn(t),l&512&&(bt||s===null||Ci(s,s.return)),l&4){var f=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Pa]||f[Ot]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Jt(f,l,s),f[Ot]=t,yt(f),l=f;break e;case"link":var b=I_("link","href",h).get(l+(s.href||""));if(b){for(var E=0;E<b.length;E++)if(f=b[E],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(E,1);break t}}f=h.createElement(l),Jt(f,l,s),h.head.appendChild(f);break;case"meta":if(b=I_("meta","content",h).get(l+(s.content||""))){for(E=0;E<b.length;E++)if(f=b[E],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(E,1);break t}}f=h.createElement(l),Jt(f,l,s),h.head.appendChild(f);break;default:throw Error(a(468,l))}f[Ot]=t,yt(f),l=f}t.stateNode=l}else C_(h,t.type,t.stateNode);else t.stateNode=R_(h,l,t.memoizedProps);else f!==l?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,l===null?C_(h,t.type,t.stateNode):R_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Df(t,t.memoizedProps,s.memoizedProps)}break;case 27:Sn(r,t),Rn(t),l&512&&(bt||s===null||Ci(s,s.return)),s!==null&&l&4&&Df(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Sn(r,t),Rn(t),l&512&&(bt||s===null||Ci(s,s.return)),t.flags&32){h=t.stateNode;try{Pn(h,"")}catch(B){tt(t,t.return,B)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Df(t,h,s!==null?s.memoizedProps:h)),l&1024&&(Nf=!0);break;case 6:if(Sn(r,t),Rn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(B){tt(t,t.return,B)}}break;case 3:if(Qu=null,h=ri,ri=Gu(r.containerInfo),Sn(r,t),ri=h,Rn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Xl(r.containerInfo)}catch(B){tt(t,t.return,B)}Nf&&(Nf=!1,jy(t));break;case 4:l=ri,ri=Gu(t.stateNode.containerInfo),Sn(r,t),Rn(t),ri=l;break;case 12:Sn(r,t),Rn(t);break;case 13:Sn(r,t),Rn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(zf=Dt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mf(t,l)));break;case 22:h=t.memoizedState!==null;var I=s!==null&&s.memoizedState!==null,L=pr,Q=bt;if(pr=L||h,bt=Q||I,Sn(r,t),bt=Q,pr=L,Rn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(s===null||I||pr||bt||ls(t)),s=null,r=t;;){if(r.tag===5||r.tag===26){if(s===null){I=s=r;try{if(f=I.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=I.stateNode;var X=I.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){tt(I,I.return,B)}}}else if(r.tag===6){if(s===null){I=r;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(B){tt(I,I.return,B)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Mf(t,s))));break;case 19:Sn(r,t),Rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Mf(t,l)));break;case 30:break;case 21:break;default:Sn(r,t),Rn(t)}}function Rn(t){var r=t.flags;if(r&2){try{for(var s,l=t.return;l!==null;){if(Ry(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,f=Of(t);ku(t,f,h);break;case 5:var b=s.stateNode;s.flags&32&&(Pn(b,""),s.flags&=-33);var E=Of(t);ku(t,E,b);break;case 3:case 4:var I=s.stateNode.containerInfo,L=Of(t);kf(t,L,I);break;default:throw Error(a(161))}}catch(Q){tt(t,t.return,Q)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function jy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;jy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Qr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Dy(t,r.alternate,r),r=r.sibling}function ls(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Kr(4,r,r.return),ls(r);break;case 1:Ci(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&Ay(r,r.return,s),ls(r);break;case 27:Fl(r.stateNode);case 26:case 5:Ci(r,r.return),ls(r);break;case 22:r.memoizedState===null&&ls(r);break;case 30:ls(r);break;default:ls(r)}t=t.sibling}}function Yr(t,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,b=f.flags;switch(f.tag){case 0:case 11:case 15:Yr(h,f,s),kl(4,f);break;case 1:if(Yr(h,f,s),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){tt(l,l.return,L)}if(l=f,h=l.updateQueue,h!==null){var E=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)uv(I[h],E)}catch(L){tt(l,l.return,L)}}s&&b&64&&wy(f),Nl(f,f.return);break;case 27:Iy(f);case 26:case 5:Yr(h,f,s),s&&l===null&&b&4&&Sy(f),Nl(f,f.return);break;case 12:Yr(h,f,s);break;case 13:Yr(h,f,s),s&&b&4&&Ny(h,f);break;case 22:f.memoizedState===null&&Yr(h,f,s),Nl(f,f.return);break;case 30:break;default:Yr(h,f,s)}r=r.sibling}}function jf(t,r){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&yl(s))}function Pf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t))}function Di(t,r,s,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Py(t,r,s,l),r=r.sibling}function Py(t,r,s,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Di(t,r,s,l),h&2048&&kl(9,r);break;case 1:Di(t,r,s,l);break;case 3:Di(t,r,s,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t)));break;case 12:if(h&2048){Di(t,r,s,l),t=r.stateNode;try{var f=r.memoizedProps,b=f.id,E=f.onPostCommit;typeof E=="function"&&E(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){tt(r,r.return,I)}}else Di(t,r,s,l);break;case 13:Di(t,r,s,l);break;case 23:break;case 22:f=r.stateNode,b=r.alternate,r.memoizedState!==null?f._visibility&2?Di(t,r,s,l):Ml(t,r):f._visibility&2?Di(t,r,s,l):(f._visibility|=2,ao(t,r,s,l,(r.subtreeFlags&10256)!==0)),h&2048&&jf(b,r);break;case 24:Di(t,r,s,l),h&2048&&Pf(r.alternate,r);break;default:Di(t,r,s,l)}}function ao(t,r,s,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,b=r,E=s,I=l,L=b.flags;switch(b.tag){case 0:case 11:case 15:ao(f,b,E,I,h),kl(8,b);break;case 23:break;case 22:var Q=b.stateNode;b.memoizedState!==null?Q._visibility&2?ao(f,b,E,I,h):Ml(f,b):(Q._visibility|=2,ao(f,b,E,I,h)),h&&L&2048&&jf(b.alternate,b);break;case 24:ao(f,b,E,I,h),h&&L&2048&&Pf(b.alternate,b);break;default:ao(f,b,E,I,h)}r=r.sibling}}function Ml(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=t,l=r,h=l.flags;switch(l.tag){case 22:Ml(s,l),h&2048&&jf(l.alternate,l);break;case 24:Ml(s,l),h&2048&&Pf(l.alternate,l);break;default:Ml(s,l)}r=r.sibling}}var jl=8192;function so(t){if(t.subtreeFlags&jl)for(t=t.child;t!==null;)Vy(t),t=t.sibling}function Vy(t){switch(t.tag){case 26:so(t),t.flags&jl&&t.memoizedState!==null&&dA(ri,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var r=ri;ri=Gu(t.stateNode.containerInfo),so(t),ri=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=jl,jl=16777216,so(t),jl=r):so(t));break;default:so(t)}}function Uy(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Pl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];Ht=l,zy(l,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ly(t),t=t.sibling}function Ly(t){switch(t.tag){case 0:case 11:case 15:Pl(t),t.flags&2048&&Kr(9,t,t.return);break;case 3:Pl(t);break;case 12:Pl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Nu(t)):Pl(t);break;default:Pl(t)}}function Nu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];Ht=l,zy(l,t)}Uy(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Kr(8,r,r.return),Nu(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,Nu(r));break;default:Nu(r)}t=t.sibling}}function zy(t,r){for(;Ht!==null;){var s=Ht;switch(s.tag){case 0:case 11:case 15:Kr(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Ht=l;else e:for(s=t;Ht!==null;){l=Ht;var h=l.sibling,f=l.return;if(Oy(l),l===s){Ht=null;break e}if(h!==null){h.return=f,Ht=h;break e}Ht=f}}}var Iw={getCacheForType:function(t){var r=tn(Mt),s=r.data.get(t);return s===void 0&&(s=t(),r.data.set(t,s)),s}},Cw=typeof WeakMap=="function"?WeakMap:Map,Qe=0,it=null,Ne=null,Le=0,Ye=0,In=null,Wr=!1,oo=!1,Vf=!1,gr=0,mt=0,Xr=0,cs=0,Uf=0,Gn=0,lo=0,Vl=null,_n=null,Lf=!1,zf=0,Mu=1/0,ju=null,$r=null,Zt=0,Zr=null,co=null,uo=0,Bf=0,Ff=null,By=null,Ul=0,qf=null;function Cn(){if((Qe&2)!==0&&Le!==0)return Le&-Le;if(K.T!==null){var t=$s;return t!==0?t:Xf()}return Nr()}function Fy(){Gn===0&&(Gn=(Le&536870912)===0||qe?ja():536870912);var t=Hn.current;return t!==null&&(t.flags|=32),Gn}function Dn(t,r,s){(t===it&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(ho(t,0),Jr(t,Le,Gn,!1)),Yi(t,s),((Qe&2)===0||t!==it)&&(t===it&&((Qe&2)===0&&(cs|=s),mt===4&&Jr(t,Le,Gn,!1)),Oi(t))}function qy(t,r,s){if((Qe&6)!==0)throw Error(a(327));var l=!s&&(r&124)===0&&(r&t.expiredLanes)===0||ei(t,r),h=l?kw(t,r):Kf(t,r,!0),f=l;do{if(h===0){oo&&!l&&Jr(t,r,0,!1);break}else{if(s=t.current.alternate,f&&!Dw(s)){h=Kf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var E=t;h=Vl;var I=E.current.memoizedState.isDehydrated;if(I&&(ho(E,b).flags|=256),b=Kf(E,b,!1),b!==2){if(Vf&&!I){E.errorRecoveryDisabledLanes|=f,cs|=f,h=4;break e}f=_n,_n=h,f!==null&&(_n===null?_n=f:_n.push.apply(_n,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){ho(t,0),Jr(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:Jr(l,r,Gn,!Wr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(h=zf+300-Dt(),10<h)){if(Jr(l,r,Gn,!Wr),mi(l,0,!0)!==0)break e;l.timeoutHandle=y_(Hy.bind(null,l,s,_n,ju,Lf,r,Gn,cs,lo,Wr,f,2,-0,0),h);break e}Hy(l,s,_n,ju,Lf,r,Gn,cs,lo,Wr,f,0,-0,0)}}break}while(!0);Oi(t)}function Hy(t,r,s,l,h,f,b,E,I,L,Q,X,z,B){if(t.timeoutHandle=-1,X=r.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Gl={stylesheets:null,count:0,unsuspend:hA},Vy(r),X=fA(),X!==null)){t.cancelPendingCommit=X($y.bind(null,t,r,f,s,l,h,b,E,I,Q,1,z,B)),Jr(t,f,b,!L);return}$y(t,r,f,s,l,h,b,E,I)}function Dw(t){for(var r=t;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],f=h.getSnapshot;h=h.value;try{if(!wn(f(),h))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Jr(t,r,s,l){r&=~Uf,r&=~cs,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-ft(h),b=1<<f;l[f]=-1,h&=~b}s!==0&&gi(t,s,r)}function Pu(){return(Qe&6)===0?(Ll(0),!1):!0}function Hf(){if(Ne!==null){if(Ye===0)var t=Ne.return;else t=Ne,lr=is=null,of(t),io=null,Cl=0,t=Ne;for(;t!==null;)Ty(t.alternate,t),t=t.return;Ne=null}}function ho(t,r){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Yw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Hf(),it=t,Ne=s=ar(t.current,null),Le=r,Ye=0,In=null,Wr=!1,oo=ei(t,r),Vf=!1,lo=Gn=Uf=cs=Xr=mt=0,_n=Vl=null,Lf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-ft(l),f=1<<h;r|=t[h],l&=~f}return gr=r,ru(),s}function Gy(t,r){Ie=null,K.H=Tu,r===bl||r===fu?(r=lv(),Ye=3):r===av?(r=lv(),Ye=4):Ye=r===cy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,In=r,Ne===null&&(mt=1,Iu(t,zn(r,t.current)))}function Ky(){var t=K.H;return K.H=Tu,t===null?Tu:t}function Qy(){var t=K.A;return K.A=Iw,t}function Gf(){mt=4,Wr||(Le&4194048)!==Le&&Hn.current!==null||(oo=!0),(Xr&134217727)===0&&(cs&134217727)===0||it===null||Jr(it,Le,Gn,!1)}function Kf(t,r,s){var l=Qe;Qe|=2;var h=Ky(),f=Qy();(it!==t||Le!==r)&&(ju=null,ho(t,r)),r=!1;var b=mt;e:do try{if(Ye!==0&&Ne!==null){var E=Ne,I=In;switch(Ye){case 8:Hf(),b=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var L=Ye;if(Ye=0,In=null,fo(t,E,I,L),s&&oo){b=0;break e}break;default:L=Ye,Ye=0,In=null,fo(t,E,I,L)}}Ow(),b=mt;break}catch(Q){Gy(t,Q)}while(!0);return r&&t.shellSuspendCounter++,lr=is=null,Qe=l,K.H=h,K.A=f,Ne===null&&(it=null,Le=0,ru()),b}function Ow(){for(;Ne!==null;)Yy(Ne)}function kw(t,r){var s=Qe;Qe|=2;var l=Ky(),h=Qy();it!==t||Le!==r?(ju=null,Mu=Dt()+500,ho(t,r)):oo=ei(t,r);e:do try{if(Ye!==0&&Ne!==null){r=Ne;var f=In;t:switch(Ye){case 1:Ye=0,In=null,fo(t,r,f,1);break;case 2:case 9:if(sv(f)){Ye=0,In=null,Wy(r);break}r=function(){Ye!==2&&Ye!==9||it!==t||(Ye=7),Oi(t)},f.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:sv(f)?(Ye=0,In=null,Wy(r)):(Ye=0,In=null,fo(t,r,f,7));break;case 5:var b=null;switch(Ne.tag){case 26:b=Ne.memoizedState;case 5:case 27:var E=Ne;if(!b||D_(b)){Ye=0,In=null;var I=E.sibling;if(I!==null)Ne=I;else{var L=E.return;L!==null?(Ne=L,Vu(L)):Ne=null}break t}}Ye=0,In=null,fo(t,r,f,5);break;case 6:Ye=0,In=null,fo(t,r,f,6);break;case 8:Hf(),mt=6;break e;default:throw Error(a(462))}}Nw();break}catch(Q){Gy(t,Q)}while(!0);return lr=is=null,K.H=l,K.A=h,Qe=s,Ne!==null?0:(it=null,Le=0,ru(),mt)}function Nw(){for(;Ne!==null&&!Dr();)Yy(Ne)}function Yy(t){var r=xy(t.alternate,t,gr);t.memoizedProps=t.pendingProps,r===null?Vu(t):Ne=r}function Wy(t){var r=t,s=r.alternate;switch(r.tag){case 15:case 0:r=my(s,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=my(s,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:of(r);default:Ty(s,r),r=Ne=Xg(r,gr),r=xy(s,r,gr)}t.memoizedProps=t.pendingProps,r===null?Vu(t):Ne=r}function fo(t,r,s,l){lr=is=null,of(r),io=null,Cl=0;var h=r.return;try{if(Ew(t,h,r,s,Le)){mt=1,Iu(t,zn(s,t.current)),Ne=null;return}}catch(f){if(h!==null)throw Ne=h,f;mt=1,Iu(t,zn(s,t.current)),Ne=null;return}r.flags&32768?(qe||l===1?t=!0:oo||(Le&536870912)!==0?t=!1:(Wr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Hn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Xy(r,t)):Vu(r)}function Vu(t){var r=t;do{if((r.flags&32768)!==0){Xy(r,Wr);return}t=r.return;var s=ww(r.alternate,r,gr);if(s!==null){Ne=s;return}if(r=r.sibling,r!==null){Ne=r;return}Ne=r=t}while(r!==null);mt===0&&(mt=5)}function Xy(t,r){do{var s=Aw(t.alternate,t);if(s!==null){s.flags&=32767,Ne=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=s}while(t!==null);mt=6,Ne=null}function $y(t,r,s,l,h,f,b,E,I){t.cancelPendingCommit=null;do Uu();while(Zt!==0);if((Qe&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(f=r.lanes|r.childLanes,f|=jd,Wo(t,s,f,b,E,I),t===it&&(Ne=it=null,Le=0),co=r,Zr=t,uo=s,Bf=f,Ff=h,By=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vw(Gi,function(){return n_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=te.p,te.p=2,b=Qe,Qe|=4;try{Sw(t,r,s)}finally{Qe=b,te.p=h,K.T=l}}Zt=1,Zy(),Jy(),e_()}}function Zy(){if(Zt===1){Zt=0;var t=Zr,r=co,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=K.T,K.T=null;var l=te.p;te.p=2;var h=Qe;Qe|=4;try{My(r,t);var f=rp,b=zg(t.containerInfo),E=f.focusedElem,I=f.selectionRange;if(b!==E&&E&&E.ownerDocument&&Lg(E.ownerDocument.documentElement,E)){if(I!==null&&Dd(E)){var L=I.start,Q=I.end;if(Q===void 0&&(Q=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(Q,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var B=z.getSelection(),Te=E.textContent.length,me=Math.min(I.start,Te),Ze=I.end===void 0?me:Math.min(I.end,Te);!B.extend&&me>Ze&&(b=Ze,Ze=me,me=b);var j=Ug(E,me),O=Ug(E,Ze);if(j&&O&&(B.rangeCount!==1||B.anchorNode!==j.node||B.anchorOffset!==j.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var V=X.createRange();V.setStart(j.node,j.offset),B.removeAllRanges(),me>Ze?(B.addRange(V),B.extend(O.node,O.offset)):(V.setEnd(O.node,O.offset),B.addRange(V))}}}}for(X=[],B=E;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var W=X[E];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Xu=!!ip,rp=ip=null}finally{Qe=h,te.p=l,K.T=s}}t.current=r,Zt=2}}function Jy(){if(Zt===2){Zt=0;var t=Zr,r=co,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=K.T,K.T=null;var l=te.p;te.p=2;var h=Qe;Qe|=4;try{Dy(t,r.alternate,r)}finally{Qe=h,te.p=l,K.T=s}}Zt=3}}function e_(){if(Zt===4||Zt===3){Zt=0,ka();var t=Zr,r=co,s=uo,l=By;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,co=Zr=null,t_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&($r=null),Cs(s),r=r.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(Re,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=K.T,h=te.p,te.p=2,K.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];f(E.value,{componentStack:E.stack})}}finally{K.T=r,te.p=h}}(uo&3)!==0&&Uu(),Oi(t),h=t.pendingLanes,(s&4194090)!==0&&(h&42)!==0?t===qf?Ul++:(Ul=0,qf=t):Ul=0,Ll(0)}}function t_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,yl(r)))}function Uu(t){return Zy(),Jy(),e_(),n_()}function n_(){if(Zt!==5)return!1;var t=Zr,r=Bf;Bf=0;var s=Cs(uo),l=K.T,h=te.p;try{te.p=32>s?32:s,K.T=null,s=Ff,Ff=null;var f=Zr,b=uo;if(Zt=0,co=Zr=null,uo=0,(Qe&6)!==0)throw Error(a(331));var E=Qe;if(Qe|=4,Ly(f.current),Py(f,f.current,b,s),Qe=E,Ll(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(Re,f)}catch{}return!0}finally{te.p=h,K.T=l,t_(t,r)}}function i_(t,r,s){r=zn(s,r),r=xf(t.stateNode,r,2),t=Fr(t,r,2),t!==null&&(Yi(t,2),Oi(t))}function tt(t,r,s){if(t.tag===3)i_(t,t,s);else for(;r!==null;){if(r.tag===3){i_(r,t,s);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){t=zn(s,t),s=oy(2),l=Fr(r,s,2),l!==null&&(ly(s,l,r,t),Yi(l,2),Oi(l));break}}r=r.return}}function Qf(t,r,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Cw;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(s)||(Vf=!0,h.add(s),t=Mw.bind(null,t,r,s),r.then(t,t))}function Mw(t,r,s){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,it===t&&(Le&s)===s&&(mt===4||mt===3&&(Le&62914560)===Le&&300>Dt()-zf?(Qe&2)===0&&ho(t,0):Uf|=s,lo===Le&&(lo=0)),Oi(t)}function r_(t,r){r===0&&(r=Yo()),t=Qs(t,r),t!==null&&(Yi(t,r),Oi(t))}function jw(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),r_(t,s)}function Pw(t,r){var s=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(r),r_(t,s)}function Vw(t,r){return di(t,r)}var Lu=null,po=null,Yf=!1,zu=!1,Wf=!1,us=0;function Oi(t){t!==po&&t.next===null&&(po===null?Lu=po=t:po=po.next=t),zu=!0,Yf||(Yf=!0,Lw())}function Ll(t,r){if(!Wf&&zu){Wf=!0;do for(var s=!1,l=Lu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-ft(42|t)+1)-1,f&=h&~(b&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,l_(l,f))}else f=Le,f=mi(l,l===it?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ei(l,f)||(s=!0,l_(l,f));l=l.next}while(s);Wf=!1}}function Uw(){a_()}function a_(){zu=Yf=!1;var t=0;us!==0&&(Qw()&&(t=us),us=0);for(var r=Dt(),s=null,l=Lu;l!==null;){var h=l.next,f=s_(l,r);f===0?(l.next=null,s===null?Lu=h:s.next=h,h===null&&(po=s)):(s=l,(t!==0||(f&3)!==0)&&(zu=!0)),l=h}Ll(t)}function s_(t,r){for(var s=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-ft(f),E=1<<b,I=h[b];I===-1?((E&s)===0||(E&l)!==0)&&(h[b]=Ki(E,r)):I<=r&&(t.expiredLanes|=E),f&=~E}if(r=it,s=Le,s=mi(t,t===r?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===r&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fi(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ei(t,s)){if(r=s&-s,r===t.callbackPriority)return r;switch(l!==null&&fi(l),Cs(s)){case 2:case 8:s=Xn;break;case 32:s=Gi;break;case 268435456:s=Or;break;default:s=Gi}return l=o_.bind(null,t),s=di(s,l),t.callbackPriority=r,t.callbackNode=s,r}return l!==null&&l!==null&&fi(l),t.callbackPriority=2,t.callbackNode=null,2}function o_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Uu()&&t.callbackNode!==s)return null;var l=Le;return l=mi(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(qy(t,l,r),s_(t,Dt()),t.callbackNode!=null&&t.callbackNode===s?o_.bind(null,t):null)}function l_(t,r){if(Uu())return null;qy(t,r,!0)}function Lw(){Ww(function(){(Qe&6)!==0?di(pi,Uw):a_()})}function Xf(){return us===0&&(us=ja()),us}function c_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:js(""+t)}function u_(t,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,t.id&&s.setAttribute("form",t.id),r.parentNode.insertBefore(s,r),t=new FormData(t),s.parentNode.removeChild(s),t}function zw(t,r,s,l,h){if(r==="submit"&&s&&s.stateNode===h){var f=c_((h[Tt]||null).action),b=l.submitter;b&&(r=(r=b[Tt]||null)?c_(r.formAction):b.getAttribute("formAction"),r!==null&&(f=r,b=null));var E=new Ps("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(us!==0){var I=b?u_(h,b):new FormData(h);gf(s,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(E.preventDefault(),I=b?u_(h,b):new FormData(h),gf(s,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var $f=0;$f<Md.length;$f++){var Zf=Md[$f],Bw=Zf.toLowerCase(),Fw=Zf[0].toUpperCase()+Zf.slice(1);ii(Bw,"on"+Fw)}ii(qg,"onAnimationEnd"),ii(Hg,"onAnimationIteration"),ii(Gg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(aw,"onTransitionRun"),ii(sw,"onTransitionStart"),ii(ow,"onTransitionCancel"),ii(Kg,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function h_(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var b=l.length-1;0<=b;b--){var E=l[b],I=E.instance,L=E.currentTarget;if(E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=L;try{f(h)}catch(Q){Ru(Q)}h.currentTarget=null,f=I}else for(b=0;b<l.length;b++){if(E=l[b],I=E.instance,L=E.currentTarget,E=E.listener,I!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=L;try{f(h)}catch(Q){Ru(Q)}h.currentTarget=null,f=I}}}}function Me(t,r){var s=r[$o];s===void 0&&(s=r[$o]=new Set);var l=t+"__bubble";s.has(l)||(d_(r,t,2,!1),s.add(l))}function Jf(t,r,s){var l=0;r&&(l|=4),d_(s,t,l,r)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function ep(t){if(!t[Bu]){t[Bu]=!0,Zo.forEach(function(s){s!=="selectionchange"&&(qw.has(s)||Jf(s,!1,t),Jf(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bu]||(r[Bu]=!0,Jf("selectionchange",!1,r))}}function d_(t,r,s,l){switch(P_(r)){case 2:var h=gA;break;case 8:h=vA;break;default:h=pp}s=h.bind(null,r,s,t),h=void 0,!Un||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,s,{capture:!0,passive:h}):t.addEventListener(r,s,!0):h!==void 0?t.addEventListener(r,s,{passive:h}):t.addEventListener(r,s,!1)}function tp(t,r,s,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===h)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;E!==null;){if(b=Wi(E),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=f=b;continue e}E=E.parentNode}}l=l.return}qc(function(){var L=f,Q=Vn(s),X=[];e:{var z=Qg.get(t);if(z!==void 0){var B=Ps,Te=t;switch(t){case"keypress":if(Ei(s)===0)break e;case"keydown":case"keyup":B=Fs;break;case"focusin":Te="focus",B=Ls;break;case"focusout":Te="blur",B=Ls;break;case"beforeblur":case"afterblur":B=Ls;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=$c;break;case qg:case Hg:case Gg:B=zs;break;case Kg:B=Jc;break;case"scroll":case"scrollend":B=Hc;break;case"wheel":B=qs;break;case"copy":case"cut":case"paste":B=Bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=ul;break;case"toggle":case"beforetoggle":B=tu}var me=(r&4)!==0,Ze=!me&&(t==="scroll"||t==="scrollend"),j=me?z!==null?z+"Capture":null:z;me=[];for(var O=L,V;O!==null;){var W=O;if(V=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||V===null||j===null||(W=qa(O,j),W!=null&&me.push(Bl(O,W,V))),Ze)break;O=O.return}0<me.length&&(z=new B(z,Te,null,s,Q),X.push({event:z,listeners:me}))}}if((r&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",z&&s!==Ji&&(Te=s.relatedTarget||s.fromElement)&&(Wi(Te)||Te[jn]))break e;if((B||z)&&(z=Q.window===Q?Q:(z=Q.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Te=s.relatedTarget||s.toElement,B=L,Te=Te?Wi(Te):null,Te!==null&&(Ze=c(Te),me=Te.tag,Te!==Ze||me!==5&&me!==27&&me!==6)&&(Te=null)):(B=null,Te=L),B!==Te)){if(me=Ln,W="onMouseLeave",j="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(me=ul,W="onPointerLeave",j="onPointerEnter",O="pointer"),Ze=B==null?z:yi(B),V=Te==null?z:yi(Te),z=new me(W,O+"leave",B,s,Q),z.target=Ze,z.relatedTarget=V,W=null,Wi(Q)===L&&(me=new me(j,O+"enter",Te,s,Q),me.target=V,me.relatedTarget=Ze,W=me),Ze=W,B&&Te)t:{for(me=B,j=Te,O=0,V=me;V;V=mo(V))O++;for(V=0,W=j;W;W=mo(W))V++;for(;0<O-V;)me=mo(me),O--;for(;0<V-O;)j=mo(j),V--;for(;O--;){if(me===j||j!==null&&me===j.alternate)break t;me=mo(me),j=mo(j)}me=null}else me=null;B!==null&&f_(X,z,B,me,!1),Te!==null&&Ze!==null&&f_(X,Ze,Te,me,!0)}}e:{if(z=L?yi(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var le=kg;else if(Nt(z))if(Ng)le=nw;else{le=ew;var De=JT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&il(L.elementType)&&(le=kg):le=tw;if(le&&(le=le(t,L))){rr(X,le,s,Q);break e}De&&De(t,z,L),t==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&Vr(z,"number",z.value)}switch(De=L?yi(L):window,t){case"focusin":(Nt(De)||De.contentEditable==="true")&&(Hs=De,Od=L,fl=null);break;case"focusout":fl=Od=Hs=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Bg(X,s,Q);break;case"selectionchange":if(rw)break;case"keydown":case"keyup":Bg(X,s,Q)}var he;if(Ai)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Ve?H(t,s)&&(ve="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ve="onCompositionStart");ve&&(y&&s.locale!=="ko"&&(Ve||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Ve&&(he=al()):(xi=Q,Ur="value"in xi?xi.value:xi.textContent,Ve=!0)),De=Fu(L,ve),0<De.length&&(ve=new ll(ve,t,null,s,Q),X.push({event:ve,listeners:De}),he?ve.data=he:(he=ne(s),he!==null&&(ve.data=he)))),(he=m?kt(t,s):Ue(t,s))&&(ve=Fu(L,"onBeforeInput"),0<ve.length&&(De=new ll("onBeforeInput","beforeinput",null,s,Q),X.push({event:De,listeners:ve}),De.data=he)),zw(X,t,L,s,Q)}h_(X,r)})}function Bl(t,r,s){return{instance:t,listener:r,currentTarget:s}}function Fu(t,r){for(var s=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=qa(t,s),h!=null&&l.unshift(Bl(t,h,f)),h=qa(t,r),h!=null&&l.push(Bl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function f_(t,r,s,l,h){for(var f=r._reactName,b=[];s!==null&&s!==l;){var E=s,I=E.alternate,L=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||L===null||(I=L,h?(L=qa(s,f),L!=null&&b.unshift(Bl(s,L,I))):h||(L=qa(s,f),L!=null&&b.push(Bl(s,L,I)))),s=s.return}b.length!==0&&t.push({event:r,listeners:b})}var Hw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function p_(t){return(typeof t=="string"?t:""+t).replace(Hw,`
`).replace(Gw,"")}function m_(t,r){return r=p_(r),p_(t)===r}function qu(){}function $e(t,r,s,l,h,f){switch(s){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Pn(t,""+l);break;case"className":_i(t,"class",l);break;case"tabIndex":_i(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(t,s,l);break;case"style":nl(t,l,f);break;case"data":if(r!=="object"){_i(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=js(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(r!=="input"&&$e(t,r,"name",h.name,h,null),$e(t,r,"formEncType",h.formEncType,h,null),$e(t,r,"formMethod",h.formMethod,h,null),$e(t,r,"formTarget",h.formTarget,h,null)):($e(t,r,"encType",h.encType,h,null),$e(t,r,"method",h.method,h,null),$e(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=js(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=qu);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=js(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Pr(t,"popover",l);break;case"xlinkActuate":Wt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Wt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Wt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Wt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Wt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Wt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Wt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=wd.get(s)||s,Pr(t,s,l))}}function np(t,r,s,l,h,f){switch(s){case"style":nl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&Pn(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ds.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),r=s.slice(2,h?s.length-7:void 0),f=t[Tt]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(r,l,h);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Pr(t,s,l)}}}function Jt(t,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,h=!1,f;for(f in s)if(s.hasOwnProperty(f)){var b=s[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:$e(t,r,f,b,s,null)}}h&&$e(t,r,"srcSet",s.srcSet,s,null),l&&$e(t,r,"src",s.src,s,null);return;case"input":Me("invalid",t);var E=f=b=h=null,I=null,L=null;for(l in s)if(s.hasOwnProperty(l)){var Q=s[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":b=Q;break;case"checked":I=Q;break;case"defaultChecked":L=Q;break;case"value":f=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,r));break;default:$e(t,r,l,Q,s,null)}}za(t,f,E,I,L,b,h,!1),Ms(t);return;case"select":Me("invalid",t),l=b=f=null;for(h in s)if(s.hasOwnProperty(h)&&(E=s[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:$e(t,r,h,E,s,null)}r=f,s=b,t.multiple=!!l,r!=null?Zi(t,!!l,r,!1):s!=null&&Zi(t,!!l,s,!0);return;case"textarea":Me("invalid",t),f=h=l=null;for(b in s)if(s.hasOwnProperty(b)&&(E=s[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:$e(t,r,b,E,s,null)}Ba(t,l,h,f),Ms(t);return;case"option":for(I in s)if(s.hasOwnProperty(I)&&(l=s[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$e(t,r,I,l,s,null)}return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<zl.length;l++)Me(zl[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in s)if(s.hasOwnProperty(L)&&(l=s[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:$e(t,r,L,l,s,null)}return;default:if(il(r)){for(Q in s)s.hasOwnProperty(Q)&&(l=s[Q],l!==void 0&&np(t,r,Q,l,s,void 0));return}}for(E in s)s.hasOwnProperty(E)&&(l=s[E],l!=null&&$e(t,r,E,l,s,null))}function Kw(t,r,s,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,E=null,I=null,L=null,Q=null;for(B in s){var X=s[B];if(s.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":I=X;default:l.hasOwnProperty(B)||$e(t,r,B,null,l,X)}}for(var z in l){var B=l[z];if(X=s[z],l.hasOwnProperty(z)&&(B!=null||X!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":Q=B;break;case"value":b=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(137,r));break;default:B!==X&&$e(t,r,z,B,l,X)}}Tn(t,b,E,I,L,Q,f,h);return;case"select":B=b=E=z=null;for(f in s)if(I=s[f],s.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":B=I;default:l.hasOwnProperty(f)||$e(t,r,f,null,l,I)}for(h in l)if(f=l[h],I=s[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":b=f;default:f!==I&&$e(t,r,h,f,l,I)}r=E,s=b,l=B,z!=null?Zi(t,!!s,z,!1):!!l!=!!s&&(r!=null?Zi(t,!!s,r,!0):Zi(t,!!s,s?[]:"",!1));return;case"textarea":B=z=null;for(E in s)if(h=s[E],s.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$e(t,r,E,null,l,h)}for(b in l)if(h=l[b],f=s[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==f&&$e(t,r,b,h,l,f)}We(t,z,B);return;case"option":for(var Te in s)if(z=s[Te],s.hasOwnProperty(Te)&&z!=null&&!l.hasOwnProperty(Te))switch(Te){case"selected":t.selected=!1;break;default:$e(t,r,Te,null,l,z)}for(I in l)if(z=l[I],B=s[I],l.hasOwnProperty(I)&&z!==B&&(z!=null||B!=null))switch(I){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:$e(t,r,I,z,l,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in s)z=s[me],s.hasOwnProperty(me)&&z!=null&&!l.hasOwnProperty(me)&&$e(t,r,me,null,l,z);for(L in l)if(z=l[L],B=s[L],l.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,r));break;default:$e(t,r,L,z,l,B)}return;default:if(il(r)){for(var Ze in s)z=s[Ze],s.hasOwnProperty(Ze)&&z!==void 0&&!l.hasOwnProperty(Ze)&&np(t,r,Ze,void 0,l,z);for(Q in l)z=l[Q],B=s[Q],!l.hasOwnProperty(Q)||z===B||z===void 0&&B===void 0||np(t,r,Q,z,l,B);return}}for(var j in s)z=s[j],s.hasOwnProperty(j)&&z!=null&&!l.hasOwnProperty(j)&&$e(t,r,j,null,l,z);for(X in l)z=l[X],B=s[X],!l.hasOwnProperty(X)||z===B||z==null&&B==null||$e(t,r,X,z,l,B)}var ip=null,rp=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function g_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function ap(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var sp=null;function Qw(){var t=window.event;return t&&t.type==="popstate"?t===sp?!1:(sp=t,!0):(sp=null,!1)}var y_=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,Ww=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(t){return __.resolve(null).then(t).catch(Xw)}:y_;function Xw(t){setTimeout(function(){throw t})}function ea(t){return t==="head"}function b_(t,r){var s=r,l=0,h=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(0<l&&8>l){s=l;var b=t.ownerDocument;if(s&1&&Fl(b.documentElement),s&2&&Fl(b.body),s&4)for(s=b.head,Fl(s),b=s.firstChild;b;){var E=b.nextSibling,I=b.nodeName;b[Pa]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=E}}if(h===0){t.removeChild(f),Xl(r);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=f}while(s);Xl(r)}function op(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":op(s),jr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function $w(t,r,s,l){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Pa])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ai(t.nextSibling),t===null)break}return null}function Zw(t,r,s){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ai(t.nextSibling),t===null))return null;return t}function lp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Jw(t,r){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")r();else{var l=function(){r(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ai(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var cp=null;function x_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}function E_(t,r,s){switch(r=Hu(s),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Fl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);jr(t)}var Kn=new Map,T_=new Set;function Gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vr=te.d;te.d={f:eA,r:tA,D:nA,C:iA,L:rA,m:aA,X:oA,S:sA,M:lA};function eA(){var t=vr.f(),r=Pu();return t||r}function tA(t){var r=vi(t);r!==null&&r.tag===5&&r.type==="form"?qv(r):vr.r(t)}var go=typeof document>"u"?null:document;function w_(t,r,s){var l=go;if(l&&typeof r=="string"&&r){var h=wt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),T_.has(h)||(T_.add(h),t={rel:t,crossOrigin:s,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Jt(r,"link",t),yt(r),l.head.appendChild(r)))}}function nA(t){vr.D(t),w_("dns-prefetch",t,null)}function iA(t,r){vr.C(t,r),w_("preconnect",t,r)}function rA(t,r,s){vr.L(t,r,s);var l=go;if(l&&t&&r){var h='link[rel="preload"][as="'+wt(r)+'"]';r==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+wt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+wt(s.imageSizes)+'"]')):h+='[href="'+wt(t)+'"]';var f=h;switch(r){case"style":f=vo(t);break;case"script":f=yo(t)}Kn.has(f)||(t=x({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:t,as:r},s),Kn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(ql(f))||r==="script"&&l.querySelector(Hl(f))||(r=l.createElement("link"),Jt(r,"link",t),yt(r),l.head.appendChild(r)))}}function aA(t,r){vr.m(t,r);var s=go;if(s&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(t)}if(!Kn.has(f)&&(t=x({rel:"modulepreload",href:t},r),Kn.set(f,t),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Hl(f)))return}l=s.createElement("link"),Jt(l,"link",t),yt(l),s.head.appendChild(l)}}}function sA(t,r,s){vr.S(t,r,s);var l=go;if(l&&t){var h=ln(l).hoistableStyles,f=vo(t);r=r||"default";var b=h.get(f);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(ql(f)))E.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":r},s),(s=Kn.get(f))&&up(t,s);var I=b=l.createElement("link");yt(I),Jt(I,"link",t),I._p=new Promise(function(L,Q){I.onload=L,I.onerror=Q}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ku(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:E},h.set(f,b)}}}function oA(t,r){vr.X(t,r);var s=go;if(s&&t){var l=ln(s).hoistableScripts,h=yo(t),f=l.get(h);f||(f=s.querySelector(Hl(h)),f||(t=x({src:t,async:!0},r),(r=Kn.get(h))&&hp(t,r),f=s.createElement("script"),yt(f),Jt(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function lA(t,r){vr.M(t,r);var s=go;if(s&&t){var l=ln(s).hoistableScripts,h=yo(t),f=l.get(h);f||(f=s.querySelector(Hl(h)),f||(t=x({src:t,async:!0,type:"module"},r),(r=Kn.get(h))&&hp(t,r),f=s.createElement("script"),yt(f),Jt(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function A_(t,r,s,l){var h=(h=zt.current)?Gu(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=vo(s.href),s=ln(h).hoistableStyles,l=s.get(r),l||(l={type:"style",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=vo(s.href);var f=ln(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(ql(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Kn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Kn.set(t,s),f||cA(h,t,s,b.state))),r&&l===null)throw Error(a(528,""));return b}if(r&&l!==null)throw Error(a(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yo(s),s=ln(h).hoistableScripts,l=s.get(r),l||(l={type:"script",instance:null,count:0,state:null},s.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function vo(t){return'href="'+wt(t)+'"'}function ql(t){return'link[rel="stylesheet"]['+t+"]"}function S_(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function cA(t,r,s,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",s),yt(r),t.head.appendChild(r))}function yo(t){return'[src="'+wt(t)+'"]'}function Hl(t){return"script[async]"+t}function R_(t,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+wt(s.href)+'"]');if(l)return r.instance=l,yt(l),l;var h=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),yt(l),Jt(l,"style",h),Ku(l,s.precedence,t),r.instance=l;case"stylesheet":h=vo(s.href);var f=t.querySelector(ql(h));if(f)return r.state.loading|=4,r.instance=f,yt(f),f;l=S_(s),(h=Kn.get(h))&&up(l,h),f=(t.ownerDocument||t).createElement("link"),yt(f);var b=f;return b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),Jt(f,"link",l),r.state.loading|=4,Ku(f,s.precedence,t),r.instance=f;case"script":return f=yo(s.src),(h=t.querySelector(Hl(f)))?(r.instance=h,yt(h),h):(l=s,(h=Kn.get(f))&&(l=x({},s),hp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),yt(h),Jt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ku(l,s.precedence,t));return r.instance}function Ku(t,r,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===r)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(t,r.firstChild))}function up(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function hp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Qu=null;function I_(t,r,s){if(Qu===null){var l=new Map,h=Qu=new Map;h.set(s,l)}else h=Qu,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var f=s[h];if(!(f[Pa]||f[Ot]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(r)||"";b=t+b;var E=l.get(b);E?E.push(f):l.set(b,[f])}}return l}function C_(t,r,s){t=t.ownerDocument||t,t.head.insertBefore(s,r==="title"?t.querySelector("head > title"):null)}function uA(t,r,s){if(s===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function D_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Gl=null;function hA(){}function dA(t,r,s){if(Gl===null)throw Error(a(475));var l=Gl;if(r.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=vo(s.href),f=t.querySelector(ql(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Yu.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,yt(f);return}f=t.ownerDocument||t,s=S_(s),(h=Kn.get(h))&&up(s,h),f=f.createElement("link"),yt(f);var b=f;b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),Jt(f,"link",s),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Yu.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function fA(){if(Gl===null)throw Error(a(475));var t=Gl;return t.stylesheets&&t.count===0&&dp(t,t.stylesheets),0<t.count?function(r){var s=setTimeout(function(){if(t.stylesheets&&dp(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Yu(){if(this.count--,this.count===0){if(this.stylesheets)dp(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wu=null;function dp(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wu=new Map,r.forEach(pA,t),Wu=null,Yu.call(t))}function pA(t,r){if(!(r.state.loading&4)){var s=Wu.get(t);if(s)var l=s.get(null);else{s=new Map,Wu.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),l=b)}l&&s.set(null,l)}h=r.instance,b=h.getAttribute("data-precedence"),f=s.get(b)||l,f===l&&s.set(null,h),s.set(b,h),this.count++,l=Yu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Kl={$$typeof:ae,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function mA(t,r,s,l,h,f,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.hiddenUpdates=Qi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function O_(t,r,s,l,h,f,b,E,I,L,Q,X){return t=new mA(t,r,s,b,E,I,L,X),r=1,f===!0&&(r|=24),f=An(3,null,null,r),t.current=f,f.stateNode=t,r=Kd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:s,cache:r},Xd(f),t}function k_(t){return t?(t=Ys,t):Ys}function N_(t,r,s,l,h,f){h=k_(h),l.context===null?l.context=h:l.pendingContext=h,l=Br(r),l.payload={element:s},f=f===void 0?null:f,f!==null&&(l.callback=f),s=Fr(t,l,r),s!==null&&(Dn(s,t,r),El(s,t,r))}function M_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function fp(t,r){M_(t,r),(t=t.alternate)&&M_(t,r)}function j_(t){if(t.tag===13){var r=Qs(t,67108864);r!==null&&Dn(r,t,67108864),fp(t,67108864)}}var Xu=!0;function gA(t,r,s,l){var h=K.T;K.T=null;var f=te.p;try{te.p=2,pp(t,r,s,l)}finally{te.p=f,K.T=h}}function vA(t,r,s,l){var h=K.T;K.T=null;var f=te.p;try{te.p=8,pp(t,r,s,l)}finally{te.p=f,K.T=h}}function pp(t,r,s,l){if(Xu){var h=mp(l);if(h===null)tp(t,r,l,$u,s),V_(t,l);else if(_A(h,t,r,s,l))l.stopPropagation();else if(V_(t,l),r&4&&-1<yA.indexOf(t)){for(;h!==null;){var f=vi(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=on(f.pendingLanes);if(b!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var I=1<<31-ft(b);E.entanglements[1]|=I,b&=~I}Oi(f),(Qe&6)===0&&(Mu=Dt()+500,Ll(0))}}break;case 13:E=Qs(f,2),E!==null&&Dn(E,f,2),Pu(),fp(f,2)}if(f=mp(l),f===null&&tp(t,r,l,$u,s),f===h)break;h=f}h!==null&&l.stopPropagation()}else tp(t,r,l,null,s)}}function mp(t){return t=Vn(t),gp(t)}var $u=null;function gp(t){if($u=null,t=Wi(t),t!==null){var r=c(t);if(r===null)t=null;else{var s=r.tag;if(s===13){if(t=d(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return $u=t,null}function P_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Na()){case pi:return 2;case Xn:return 8;case Gi:case Qo:return 32;case Or:return 268435456;default:return 32}default:return 32}}var vp=!1,ta=null,na=null,ia=null,Ql=new Map,Yl=new Map,ra=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V_(t,r){switch(t){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":Ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(r.pointerId)}}function Wl(t,r,s,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:s,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=vi(r),r!==null&&j_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function _A(t,r,s,l,h){switch(r){case"focusin":return ta=Wl(ta,t,r,s,l,h),!0;case"dragenter":return na=Wl(na,t,r,s,l,h),!0;case"mouseover":return ia=Wl(ia,t,r,s,l,h),!0;case"pointerover":var f=h.pointerId;return Ql.set(f,Wl(Ql.get(f)||null,t,r,s,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Yl.set(f,Wl(Yl.get(f)||null,t,r,s,l,h)),!0}return!1}function U_(t){var r=Wi(t.target);if(r!==null){var s=c(r);if(s!==null){if(r=s.tag,r===13){if(r=d(s),r!==null){t.blockedOn=r,Pc(t.priority,function(){if(s.tag===13){var l=Cn();l=kr(l);var h=Qs(s,l);h!==null&&Dn(h,s,l),fp(s,l)}});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=mp(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Ji=l,s.target.dispatchEvent(l),Ji=null}else return r=vi(s),r!==null&&j_(r),t.blockedOn=s,!1;r.shift()}return!0}function L_(t,r,s){Zu(t)&&s.delete(r)}function bA(){vp=!1,ta!==null&&Zu(ta)&&(ta=null),na!==null&&Zu(na)&&(na=null),ia!==null&&Zu(ia)&&(ia=null),Ql.forEach(L_),Yl.forEach(L_)}function Ju(t,r){t.blockedOn===r&&(t.blockedOn=null,vp||(vp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bA)))}var eh=null;function z_(t){eh!==t&&(eh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){eh===t&&(eh=null);for(var r=0;r<t.length;r+=3){var s=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(gp(l||s)===null)continue;break}var f=vi(s);f!==null&&(t.splice(r,3),r-=3,gf(f,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function Xl(t){function r(I){return Ju(I,t)}ta!==null&&Ju(ta,t),na!==null&&Ju(na,t),ia!==null&&Ju(ia,t),Ql.forEach(r),Yl.forEach(r);for(var s=0;s<ra.length;s++){var l=ra[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ra.length&&(s=ra[0],s.blockedOn===null);)U_(s),s.blockedOn===null&&ra.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],f=s[l+1],b=h[Tt]||null;if(typeof f=="function")b||z_(s);else if(b){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[Tt]||null)E=b.formAction;else if(gp(h)!==null)continue}else E=b.action;typeof E=="function"?s[l+1]=E:(s.splice(l,3),l-=3),z_(s)}}}function yp(t){this._internalRoot=t}th.prototype.render=yp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var s=r.current,l=Cn();N_(s,l,t,r,null,null)},th.prototype.unmount=yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;N_(t.current,2,null,t,null,null),Pu(),r[jn]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var r=Nr();t={blockedOn:null,target:t,priority:r};for(var s=0;s<ra.length&&r!==0&&r<ra[s].priority;s++);ra.splice(s,0,t),s===0&&U_(t)}};var B_=e.version;if(B_!=="19.1.0")throw Error(a(527,B_,"19.1.0"));te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var xA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Re=nh.inject(xA),Ee=nh}catch{}}return $l.createRoot=function(t,r){if(!o(t))throw Error(a(299));var s=!1,l="",h=iy,f=ry,b=ay,E=null;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(E=r.unstable_transitionCallbacks)),r=O_(t,1,!1,null,null,s,l,h,f,b,E,null),t[jn]=r.current,ep(t),new yp(r)},$l.hydrateRoot=function(t,r,s){if(!o(t))throw Error(a(299));var l=!1,h="",f=iy,b=ry,E=ay,I=null,L=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(I=s.unstable_transitionCallbacks),s.formState!==void 0&&(L=s.formState)),r=O_(t,1,!0,r,s??null,l,h,f,b,E,I,L),r.context=k_(null),s=r.current,l=Cn(),l=kr(l),h=Br(l),h.callback=null,Fr(s,h,l),s=l,r.current.lanes=s,Yi(r,s),Oi(r),t[jn]=r.current,ep(t),new th(r)},$l.version="19.1.0",$l}var Q_;function dS(){if(Q_)return Tp.exports;Q_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tp.exports=hS(),Tp.exports}var fS=dS();const pS={user:null,profile:null,isLoading:!0},$x=Xx({name:"user",initialState:pS,reducers:{setUser:(i,e)=>{i.user=e.payload,i.isLoading=!1},setProfile:(i,e)=>{i.profile=e.payload},updateProfile:(i,e)=>{i.profile&&(i.profile={...i.profile,...e.payload})},removeUser:i=>{i.user=null,i.profile=null,i.isLoading=!1},setLoading:(i,e)=>{i.isLoading=e.payload}}}),{setUser:wo,setProfile:Fp,removeUser:Xh,setLoading:mS}=$x.actions,gS=$x.reducer,vS=()=>{};var Y_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},yS=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const o=i[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],d=i[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Jx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,p=d?i[o+1]:0,g=o+2<i.length,_=g?i[o+2]:0,x=c>>2,S=(c&3)<<4|p>>4;let w=(p&15)<<2|_>>6,U=_&63;g||(U=64,d||(w=64)),a.push(n[x],n[S],n[w],n[U])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Zx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):yS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const _=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||_==null||S==null)throw new _S;const w=c<<2|p>>4;if(a.push(w),_!==64){const U=p<<4&240|_>>2;if(a.push(U),S!==64){const F=_<<6&192|S;a.push(F)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _S extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bS=function(i){const e=Zx(i);return Jx.encodeByteArray(e,!0)},Sh=function(i){return bS(i).replace(/\./g,"")},e0=function(i){try{return Jx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=()=>xS().__FIREBASE_DEFAULTS__,TS=()=>{if(typeof process>"u"||typeof Y_>"u")return;const i=Y_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},wS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&e0(i[1]);return e&&JSON.parse(e)},$h=()=>{try{return vS()||ES()||TS()||wS()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},t0=i=>{var e,n;return(n=(e=$h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},n0=i=>{const e=t0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},i0=()=>{var i;return(i=$h())===null||i===void 0?void 0:i.config},r0=i=>{var e;return(e=$h())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cm(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Sh(JSON.stringify(n)),Sh(JSON.stringify(d)),""].join(".")}const sc={};function SS(){const i={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?i.emulator.push(e):i.prod.push(e);return i}function RS(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let W_=!1;function Dm(i,e){if(typeof window>"u"||typeof document>"u"||!Ia(window.location.host)||sc[i]===e||sc[i]||W_)return;sc[i]=e;function n(w){return`__firebase__banner__${w}`}const a="__firebase__banner",c=SS().prod.length>0;function d(){const w=document.getElementById(a);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,U){w.setAttribute("width","24"),w.setAttribute("id",U),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function _(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{W_=!0,d()},w}function x(w,U){w.setAttribute("id",U),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=RS(a),U=n("text"),F=document.getElementById(U)||document.createElement("span"),G=n("learnmore"),q=document.getElementById(G)||document.createElement("a"),ie=n("preprendIcon"),oe=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ae=w.element;p(ae),x(q,G);const ee=_();g(oe,ie),ae.append(oe,F,q,ee),document.body.appendChild(ae)}c?(F.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function CS(){var i;const e=(i=$h())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function kS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NS(){const i=sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function MS(){return!CS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function PS(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="FirebaseError";class qi extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=VS,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?US(c,a):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new qi(o,p,a)}}function US(i,e){return i.replace(LS,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const LS=/\{\$([^}]+)}/g;function zS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function gs(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=i[o],d=e[o];if(X_(c)&&X_(d)){if(!gs(c,d))return!1}else if(c!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function X_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(i){const e=[];for(const[n,a]of Object.entries(i))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function ec(i){const e={};return i.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function tc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function BS(i,e){const n=new FS(i,e);return n.subscribe.bind(n)}class FS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");qS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Sp),o.error===void 0&&(o.error=Sp),o.complete===void 0&&(o.complete=Sp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qS(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(i){return i&&i._delegate?i._delegate:i}class _a{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new AS;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const a=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KS(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);a===p&&d.resolve(o)}return o}onInit(e,n){var a;const o=this.normalizeInstanceIdentifier(n),c=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:GS(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GS(i){return i===hs?void 0:i}function KS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const YS={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},WS=je.INFO,XS={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},$S=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),o=XS[e];if(o)console[o](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=WS,this._logHandler=$S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const ZS=(i,e)=>e.some(n=>i instanceof n);let $_,Z_;function JS(){return $_||($_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e1(){return Z_||(Z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s0=new WeakMap,qp=new WeakMap,o0=new WeakMap,Rp=new WeakMap,km=new WeakMap;function t1(i){const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(pa(i.result)),o()},d=()=>{a(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&s0.set(n,i)}).catch(()=>{}),km.set(e,i),e}function n1(i){if(qp.has(i))return;const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{a(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});qp.set(i,e)}let Hp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return qp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||o0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pa(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function i1(i){Hp=i(Hp)}function r1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(Ip(this),e,...n);return o0.set(a,e.sort?e.sort():[e]),pa(a)}:e1().includes(i)?function(...e){return i.apply(Ip(this),e),pa(s0.get(this))}:function(...e){return pa(i.apply(Ip(this),e))}}function a1(i){return typeof i=="function"?r1(i):(i instanceof IDBTransaction&&n1(i),ZS(i,JS())?new Proxy(i,Hp):i)}function pa(i){if(i instanceof IDBRequest)return t1(i);if(Rp.has(i))return Rp.get(i);const e=a1(i);return e!==i&&(Rp.set(i,e),km.set(e,i)),e}const Ip=i=>km.get(i);function s1(i,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),p=pa(d);return a&&d.addEventListener("upgradeneeded",g=>{a(pa(d.result),g.oldVersion,g.newVersion,pa(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const o1=["get","getKey","getAll","getAllKeys","count"],l1=["put","add","delete","clear"],Cp=new Map;function J_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cp.get(e))return Cp.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=l1.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||o1.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return a&&(_=_.index(p.shift())),(await Promise.all([_[n](...p),o&&g.done]))[0]};return Cp.set(e,c),c}i1(i=>({...i,get:(e,n,a)=>J_(e,n)||i.get(e,n,a),has:(e,n)=>!!J_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u1(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function u1(i){const e=i.getComponent();return e?.type==="VERSION"}const Gp="@firebase/app",eb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Om("@firebase/app"),h1="@firebase/app-compat",d1="@firebase/analytics-compat",f1="@firebase/analytics",p1="@firebase/app-check-compat",m1="@firebase/app-check",g1="@firebase/auth",v1="@firebase/auth-compat",y1="@firebase/database",_1="@firebase/data-connect",b1="@firebase/database-compat",x1="@firebase/functions",E1="@firebase/functions-compat",T1="@firebase/installations",w1="@firebase/installations-compat",A1="@firebase/messaging",S1="@firebase/messaging-compat",R1="@firebase/performance",I1="@firebase/performance-compat",C1="@firebase/remote-config",D1="@firebase/remote-config-compat",O1="@firebase/storage",k1="@firebase/storage-compat",N1="@firebase/firestore",M1="@firebase/ai",j1="@firebase/firestore-compat",P1="firebase",V1="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="[DEFAULT]",U1={[Gp]:"fire-core",[h1]:"fire-core-compat",[f1]:"fire-analytics",[d1]:"fire-analytics-compat",[m1]:"fire-app-check",[p1]:"fire-app-check-compat",[g1]:"fire-auth",[v1]:"fire-auth-compat",[y1]:"fire-rtdb",[_1]:"fire-data-connect",[b1]:"fire-rtdb-compat",[x1]:"fire-fn",[E1]:"fire-fn-compat",[T1]:"fire-iid",[w1]:"fire-iid-compat",[A1]:"fire-fcm",[S1]:"fire-fcm-compat",[R1]:"fire-perf",[I1]:"fire-perf-compat",[C1]:"fire-rc",[D1]:"fire-rc-compat",[O1]:"fire-gcs",[k1]:"fire-gcs-compat",[N1]:"fire-fst",[j1]:"fire-fst-compat",[M1]:"fire-vertex","fire-js":"fire-js",[P1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map,L1=new Map,Qp=new Map;function tb(i,e){try{i.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function vs(i){const e=i.name;if(Qp.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,i);for(const n of Rh.values())tb(n,i);for(const n of L1.values())tb(n,i);return!0}function Zh(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ma=new wc("app","Firebase",z1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ma.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=V1;function l0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Kp,automaticDataCollectionEnabled:!0},e),o=a.name;if(typeof o!="string"||!o)throw ma.create("bad-app-name",{appName:String(o)});if(n||(n=i0()),!n)throw ma.create("no-options");const c=Rh.get(o);if(c){if(gs(n,c.options)&&gs(a,c.config))return c;throw ma.create("duplicate-app",{appName:o})}const d=new QS(o);for(const g of Qp.values())d.addComponent(g);const p=new B1(n,a,d);return Rh.set(o,p),p}function Nm(i=Kp){const e=Rh.get(i);if(!e&&i===Kp&&i0())return l0();if(!e)throw ma.create("no-app",{appName:i});return e}function ji(i,e,n){var a;let o=(a=U1[i])!==null&&a!==void 0?a:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const p=[`Unable to register library "${o}" with version "${e}":`];c&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&p.push("and"),d&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(p.join(" "));return}vs(new _a(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firebase-heartbeat-database",q1=1,mc="firebase-heartbeat-store";let Dp=null;function c0(){return Dp||(Dp=s1(F1,q1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ma.create("idb-open",{originalErrorMessage:i.message})})),Dp}async function H1(i){try{const n=(await c0()).transaction(mc),a=await n.objectStore(mc).get(u0(i));return await n.done,a}catch(e){if(e instanceof qi)Ar.warn(e.message);else{const n=ma.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(n.message)}}}async function nb(i,e){try{const a=(await c0()).transaction(mc,"readwrite");await a.objectStore(mc).put(e,u0(i)),await a.done}catch(n){if(n instanceof qi)Ar.warn(n.message);else{const a=ma.create("idb-set",{originalErrorMessage:n?.message});Ar.warn(a.message)}}}function u0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=1024,K1=30;class Q1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W1(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ib();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>K1){const d=X1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ar.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ib(),{heartbeatsToSend:a,unsentEntries:o}=Y1(this._heartbeatsCache.heartbeats),c=Sh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Ar.warn(n),""}}}function ib(){return new Date().toISOString().substring(0,10)}function Y1(i,e=G1){const n=[];let a=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),rb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),rb(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class W1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?PS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await H1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return nb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function rb(i){return Sh(JSON.stringify({version:2,heartbeats:i})).length}function X1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i){vs(new _a("platform-logger",e=>new c1(e),"PRIVATE")),vs(new _a("heartbeat",e=>new Q1(e),"PRIVATE")),ji(Gp,eb,i),ji(Gp,eb,"esm2017"),ji("fire-js","")}$1("");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firebasestorage.googleapis.com",d0="storageBucket",Z1=2*60*1e3,J1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt extends qi{constructor(e,n,a=0){super(Op(e),`Firebase Storage: ${n} (${Op(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Op(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function Op(i){return"storage/"+i}function Mm(){const i="An unknown error occurred, please check the error payload for server response.";return new vt(gt.UNKNOWN,i)}function eR(i){return new vt(gt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function tR(i){return new vt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nR(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vt(gt.UNAUTHENTICATED,i)}function iR(){return new vt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function rR(i){return new vt(gt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function aR(){return new vt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sR(){return new vt(gt.CANCELED,"User canceled the upload/download.")}function oR(i){return new vt(gt.INVALID_URL,"Invalid URL '"+i+"'.")}function lR(i){return new vt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function cR(){return new vt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d0+"' property when initializing the app?")}function uR(){return new vt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hR(){return new vt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dR(i){return new vt(gt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yp(i){return new vt(gt.INVALID_ARGUMENT,i)}function f0(){return new vt(gt.APP_DELETED,"The Firebase app was deleted.")}function fR(i){return new vt(gt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oc(i,e){return new vt(gt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Zl(i){throw new vt(gt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=pn.makeFromUrl(e,n)}catch{return new pn(e,"")}if(a.path==="")return a;throw lR(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function c(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function _(ee){ee.path_=decodeURIComponent(ee.path)}const x="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",U=new RegExp(`^https?://${S}/${x}/b/${o}/o${w}`,"i"),F={bucket:1,path:3},G=n===h0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,q="([^?#]*)",ie=new RegExp(`^https?://${G}/${o}/${q}`,"i"),ae=[{regex:p,indices:g,postModify:c},{regex:U,indices:F,postModify:_},{regex:ie,indices:{bucket:1,path:2},postModify:_}];for(let ee=0;ee<ae.length;ee++){const ge=ae[ee],be=ge.regex.exec(e);if(be){const D=be[ge.indices.bucket];let A=be[ge.indices.path];A||(A=""),a=new pn(D,A),ge.postModify(a);break}}if(a==null)throw oR(e);return a}}class pR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(i,e,n){let a=1,o=null,c=null,d=!1,p=0;function g(){return p===2}let _=!1;function x(...q){_||(_=!0,e.apply(null,q))}function S(q){o=setTimeout(()=>{o=null,i(U,g())},q)}function w(){c&&clearTimeout(c)}function U(q,...ie){if(_){w();return}if(q){w(),x.call(null,q,...ie);return}if(g()||d){w(),x.call(null,q,...ie);return}a<64&&(a*=2);let ae;p===1?(p=2,ae=0):ae=(a+Math.random())*1e3,S(ae)}let F=!1;function G(q){F||(F=!0,w(),!_&&(o!==null?(q||(p=2),clearTimeout(o),S(0)):q||(p=1)))}return S(0),c=setTimeout(()=>{d=!0,G(!0)},n),G}function gR(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(i){return i!==void 0}function yR(i){return typeof i=="object"&&!Array.isArray(i)}function jm(i){return typeof i=="string"||i instanceof String}function ab(i){return Pm()&&i instanceof Blob}function Pm(){return typeof Blob<"u"}function Wp(i,e,n,a){if(a<e)throw Yp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(a>n)throw Yp(`Invalid value for '${i}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(i,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${i}`}function p0(i){const e=encodeURIComponent;let n="?";for(const a in i)if(i.hasOwnProperty(a)){const o=e(a)+"="+e(i[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var ms;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ms||(ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,a,o,c,d,p,g,_,x,S,w=!0,U=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=x,this.connectionFactory_=S,this.retry=w,this.isUsingEmulator=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,G)=>{this.resolve_=F,this.reject_=G,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new ih(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=p=>{const g=p.loaded,_=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const p=c.getErrorCode()===ms.NO_ERROR,g=c.getStatus();if(!p||_R(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===ms.ABORT;a(!1,new ih(!1,null,x));return}const _=this.successCodes_.indexOf(g)!==-1;a(!0,new ih(_,c))})},n=(a,o)=>{const c=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());vR(g)?c(g):c()}catch(g){d(g)}else if(p!==null){const g=Mm();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?f0():sR();d(g)}else{const g=aR();d(g)}};this.canceled_?n(!1,new ih(!1,null,!0)):this.backoffId_=mR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ih{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function xR(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function ER(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function TR(i,e){e&&(i["X-Firebase-GMPID"]=e)}function wR(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function AR(i,e,n,a,o,c,d=!0,p=!1){const g=p0(i.urlParams),_=i.url+g,x=Object.assign({},i.headers);return TR(x,e),xR(x,n),ER(x,c),wR(x,a),new bR(_,i.method,x,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,d,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RR(...i){const e=SR();if(e!==void 0){const n=new e;for(let a=0;a<i.length;a++)n.append(i[a]);return n.getBlob()}else{if(Pm())return new Blob(i);throw new vt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function IR(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(i){if(typeof atob>"u")throw dR("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kp{constructor(e,n){this.data=e,this.contentType=n||null}}function DR(i,e){switch(i){case Mi.RAW:return new kp(m0(e));case Mi.BASE64:case Mi.BASE64URL:return new kp(g0(i,e));case Mi.DATA_URL:return new kp(kR(e),NR(e))}throw Mm()}function m0(i){const e=[];for(let n=0;n<i.length;n++){let a=i.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=a,d=i.charCodeAt(++n);a=65536|(c&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function OR(i){let e;try{e=decodeURIComponent(i)}catch{throw oc(Mi.DATA_URL,"Malformed data URL.")}return m0(e)}function g0(i,e){switch(i){case Mi.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw oc(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw oc(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=CR(e)}catch(o){throw o.message.includes("polyfill")?o:oc(i,"Invalid character found")}const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}class v0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw oc(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=MR(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function kR(i){const e=new v0(i);return e.base64?g0(Mi.BASE64,e.rest):OR(e.rest)}function NR(i){return new v0(i).contentType}function MR(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){let a=0,o="";ab(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(ab(this.data_)){const a=this.data_,o=IR(a,e,n);return o===null?null:new la(o)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new la(a,!0)}}static getBlob(...e){if(Pm()){const n=e.map(a=>a instanceof la?a.data_:a);return new la(RR.apply(null,n))}else{const n=e.map(d=>jm(d)?DR(Mi.RAW,d).data:d.data_);let a=0;n.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let c=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[c++]=d[p]}),new la(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(i){let e;try{e=JSON.parse(i)}catch{return null}return yR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function PR(i,e){const n=e.split("/").filter(a=>a.length>0).join("/");return i.length===0?n:i+"/"+n}function y0(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(i,e){return e}class dn{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||VR}}let rh=null;function UR(i){return!jm(i)||i.length<2?i:y0(i)}function _0(){if(rh)return rh;const i=[];i.push(new dn("bucket")),i.push(new dn("generation")),i.push(new dn("metageneration")),i.push(new dn("name","fullPath",!0));function e(c,d){return UR(d)}const n=new dn("name");n.xform=e,i.push(n);function a(c,d){return d!==void 0?Number(d):d}const o=new dn("size");return o.xform=a,i.push(o),i.push(new dn("timeCreated")),i.push(new dn("updated")),i.push(new dn("md5Hash",null,!0)),i.push(new dn("cacheControl",null,!0)),i.push(new dn("contentDisposition",null,!0)),i.push(new dn("contentEncoding",null,!0)),i.push(new dn("contentLanguage",null,!0)),i.push(new dn("contentType",null,!0)),i.push(new dn("metadata","customMetadata",!0)),rh=i,rh}function LR(i,e){function n(){const a=i.bucket,o=i.fullPath,c=new pn(a,o);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:n})}function zR(i,e,n){const a={};a.type="file";const o=n.length;for(let c=0;c<o;c++){const d=n[c];a[d.local]=d.xform(a,e[d.server])}return LR(a,i),a}function b0(i,e,n){const a=Vm(e);return a===null?null:zR(i,a,n)}function BR(i,e,n,a){const o=Vm(e);if(o===null||!jm(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(_=>{const x=i.bucket,S=i.fullPath,w="/b/"+d(x)+"/o/"+d(S),U=Sc(w,n,a),F=p0({alt:"media",token:_});return U+F})[0]}function FR(i,e){const n={},a=e.length;for(let o=0;o<a;o++){const c=e[o];c.writable&&(n[c.server]=i[c.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="prefixes",ob="items";function qR(i,e,n){const a={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sb])for(const o of n[sb]){const c=o.replace(/\/$/,""),d=i._makeStorageReference(new pn(e,c));a.prefixes.push(d)}if(n[ob])for(const o of n[ob]){const c=i._makeStorageReference(new pn(e,o.name));a.items.push(c)}return a}function HR(i,e,n){const a=Vm(n);return a===null?null:qR(i,e,a)}class Jh{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(i){if(!i)throw Mm()}function GR(i,e){function n(a,o){const c=b0(i,o,e);return Um(c!==null),c}return n}function KR(i,e){function n(a,o){const c=HR(i,e,o);return Um(c!==null),c}return n}function QR(i,e){function n(a,o){const c=b0(i,o,e);return Um(c!==null),BR(c,o,i.host,i._protocol)}return n}function Lm(i){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=iR():o=nR():n.getStatus()===402?o=tR(i.bucket):n.getStatus()===403?o=rR(i.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function x0(i){const e=Lm(i);function n(a,o){let c=e(a,o);return a.getStatus()===404&&(c=eR(i.path)),c.serverResponse=o.serverResponse,c}return n}function YR(i,e,n,a,o){const c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",n.length>0&&(c.delimiter=n),a&&(c.pageToken=a),o&&(c.maxResults=o);const d=e.bucketOnlyServerUrl(),p=Sc(d,i.host,i._protocol),g="GET",_=i.maxOperationRetryTime,x=new Jh(p,g,KR(i,e.bucket),_);return x.urlParams=c,x.errorHandler=Lm(e),x}function WR(i,e,n){const a=e.fullServerUrl(),o=Sc(a,i.host,i._protocol),c="GET",d=i.maxOperationRetryTime,p=new Jh(o,c,QR(i,n),d);return p.errorHandler=x0(e),p}function XR(i,e){const n=e.fullServerUrl(),a=Sc(n,i.host,i._protocol),o="DELETE",c=i.maxOperationRetryTime;function d(g,_){}const p=new Jh(a,o,d,c);return p.successCodes=[200,204],p.errorHandler=x0(e),p}function $R(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function ZR(i,e,n){const a=Object.assign({},n);return a.fullPath=i.path,a.size=e.size(),a.contentType||(a.contentType=$R(null,e)),a}function JR(i,e,n,a,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let ae="";for(let ee=0;ee<2;ee++)ae=ae+Math.random().toString().slice(2);return ae}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const _=ZR(e,a,o),x=FR(_,n),S="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,w=`\r
--`+g+"--",U=la.getBlob(S,a,w);if(U===null)throw uR();const F={name:_.fullPath},G=Sc(c,i.host,i._protocol),q="POST",ie=i.maxUploadRetryTime,oe=new Jh(G,q,GR(i,n),ie);return oe.urlParams=F,oe.headers=d,oe.body=U.uploadData(),oe.errorHandler=Lm(e),oe}class eI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o,c){if(this.sent_)throw Zl("cannot .send() more than once");if(Ia(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tI extends eI{initXhr(){this.xhr_.responseType="text"}}function ed(){return new tI}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this._service=e,n instanceof pn?this._location=n:this._location=pn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ys(e,n)}get root(){const e=new pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y0(this._location.path)}get storage(){return this._service}get parent(){const e=jR(this._location.path);if(e===null)return null;const n=new pn(this._location.bucket,e);return new ys(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fR(e)}}function nI(i,e,n){i._throwIfRoot("uploadBytes");const a=JR(i.storage,i._location,_0(),new la(e,!0),n);return i.storage.makeRequestWithTokens(a,ed).then(o=>({metadata:o,ref:i}))}function iI(i){const e={prefixes:[],items:[]};return E0(i,e).then(()=>e)}async function E0(i,e,n){const o=await rI(i,{pageToken:n});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await E0(i,e,o.nextPageToken)}function rI(i,e){e!=null&&typeof e.maxResults=="number"&&Wp("options.maxResults",1,1e3,e.maxResults);const n=e||{},a=YR(i.storage,i._location,"/",n.pageToken,n.maxResults);return i.storage.makeRequestWithTokens(a,ed)}function aI(i){i._throwIfRoot("getDownloadURL");const e=WR(i.storage,i._location,_0());return i.storage.makeRequestWithTokens(e,ed).then(n=>{if(n===null)throw hR();return n})}function sI(i){i._throwIfRoot("deleteObject");const e=XR(i.storage,i._location);return i.storage.makeRequestWithTokens(e,ed)}function oI(i,e){const n=PR(i._location.path,e),a=new pn(i._location.bucket,n);return new ys(i.storage,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(i){return/^[A-Za-z]+:\/\//.test(i)}function cI(i,e){return new ys(i,e)}function T0(i,e){if(i instanceof zm){const n=i;if(n._bucket==null)throw cR();const a=new ys(n,n._bucket);return e!=null?T0(a,e):a}else return e!==void 0?oI(i,e):i}function uI(i,e){if(e&&lI(e)){if(i instanceof zm)return cI(i,e);throw Yp("To use ref(service, url), the first argument must be a Storage instance.")}else return T0(i,e)}function lb(i,e){const n=e?.[d0];return n==null?null:pn.makeFromBucketSpec(n,i)}function hI(i,e,n,a={}){i.host=`${e}:${n}`;const o=Ia(e);o&&(Cm(`https://${i.host}/b`),Dm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=a;c&&(i._overrideAuthToken=typeof c=="string"?c:a0(c,i.app.options.projectId))}class zm{constructor(e,n,a,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=h0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z1,this._maxUploadRetryTime=J1,this._requests=new Set,o!=null?this._bucket=pn.makeFromBucketSpec(o,this._host):this._bucket=lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pn.makeFromBucketSpec(this._url,e):this._bucket=lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ys(this,e)}_makeRequest(e,n,a,o,c=!0){if(this._deleted)return new pR(f0());{const d=AR(e,this._appId,a,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const cb="@firebase/storage",ub="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="storage";function dI(i,e,n){return i=Lt(i),nI(i,e,n)}function fI(i){return i=Lt(i),iI(i)}function A0(i){return i=Lt(i),aI(i)}function pI(i){return i=Lt(i),sI(i)}function Bm(i,e){return i=Lt(i),uI(i,e)}function mI(i=Nm(),e){i=Lt(i);const a=Zh(i,w0).getImmediate({identifier:e}),o=n0("storage");return o&&gI(a,...o),a}function gI(i,e,n,a={}){hI(i,e,n,a)}function vI(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),a=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new zm(n,a,o,e,Ts)}function yI(){vs(new _a(w0,vI,"PUBLIC").setMultipleInstances(!0)),ji(cb,ub,""),ji(cb,ub,"esm2017")}yI();var _I="firebase",bI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(_I,bI,"app");function Fm(i,e){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(i);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(i,a[o])&&(n[a[o]]=i[a[o]]);return n}function ws(i,e,n,a){function o(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function p(x){try{_(a.next(x))}catch(S){d(S)}}function g(x){try{_(a.throw(x))}catch(S){d(S)}}function _(x){x.done?c(x.value):o(x.value).then(p,g)}_((a=a.apply(i,e||[])).next())})}function S0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xI=S0,R0=new wc("auth","Firebase",S0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Om("@firebase/auth");function EI(i,...e){Ih.logLevel<=je.WARN&&Ih.warn(`Auth (${Ts}): ${i}`,...e)}function fh(i,...e){Ih.logLevel<=je.ERROR&&Ih.error(`Auth (${Ts}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(i,...e){throw Hm(i,...e)}function ci(i,...e){return Hm(i,...e)}function qm(i,e,n){const a=Object.assign(Object.assign({},xI()),{[e]:n});return new wc("auth","Firebase",a).create(e,{appName:i.name})}function Er(i){return qm(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TI(i,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Yn(i,"argument-error"),qm(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hm(i,...e){if(typeof i!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(n,...a)}return R0.create(i,...e)}function ye(i,e,...n){if(!i)throw Hm(e,...n)}function _r(i){const e="INTERNAL ASSERTION FAILED: "+i;throw fh(e),new Error(e)}function Sr(i,e){i||_r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function wI(){return hb()==="http:"||hb()==="https:"}function hb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wI()||OS()||"connection"in navigator)?navigator.onLine:!0}function SI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=IS()||kS()}get(){return AI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(i,e){Sr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CI=new Rc(3e4,6e4);function Ca(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Da(i,e,n,a,o={}){return C0(i,o,async()=>{let c={},d={};a&&(e==="GET"?d=a:c={body:JSON.stringify(a)});const p=Ac(Object.assign({key:i.config.apiKey},d)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const _=Object.assign({method:e,headers:g},c);return DS()||(_.referrerPolicy="no-referrer"),i.emulatorConfig&&Ia(i.emulatorConfig.host)&&(_.credentials="include"),I0.fetch()(await D0(i,i.config.apiHost,n,p),_)})}async function C0(i,e,n){i._canInitEmulator=!1;const a=Object.assign(Object.assign({},RI),e);try{const o=new OI(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ah(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,_]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ah(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw ah(i,"user-disabled",d);const x=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw qm(i,x,_);Yn(i,x)}}catch(o){if(o instanceof qi)throw o;Yn(i,"network-request-failed",{message:String(o)})}}async function Ic(i,e,n,a,o={}){const c=await Da(i,e,n,a,o);return"mfaPendingCredential"in c&&Yn(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function D0(i,e,n,a){const o=`${e}${n}?${a}`,c=i,d=c.config.emulator?Gm(i.config,o):`${i.config.apiScheme}://${o}`;return II.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function DI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(ci(this.auth,"network-request-failed")),CI.get())})}}function ah(i,e,n){const a={appName:i.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=ci(i,e,a);return o.customData._tokenResponse=n,o}function db(i){return i!==void 0&&i.enterprise!==void 0}class kI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NI(i,e){return Da(i,"GET","/v2/recaptchaConfig",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(i,e){return Da(i,"POST","/v1/accounts:delete",e)}async function Ch(i,e){return Da(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jI(i,e=!1){const n=Lt(i),a=await n.getIdToken(e),o=Km(a);ye(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:a,authTime:lc(Np(o.auth_time)),issuedAtTime:lc(Np(o.iat)),expirationTime:lc(Np(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Np(i){return Number(i)*1e3}function Km(i){const[e,n,a]=i.split(".");if(e===void 0||n===void 0||a===void 0)return fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=e0(n);return o?JSON.parse(o):(fh("Failed to decode base64 JWT payload"),null)}catch(o){return fh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function fb(i){const e=Km(i);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(i,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof qi&&PI(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function PI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(i){var e;const n=i.auth,a=await i.getIdToken(),o=await gc(i,Ch(n,{idToken:a}));ye(o?.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?O0(c.providerUserInfo):[],p=LI(i.providerData,d),g=i.isAnonymous,_=!(i.email&&c.passwordHash)&&!p?.length,x=g?_:!1,S={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new $p(c.createdAt,c.lastLoginAt),isAnonymous:x};Object.assign(i,S)}async function UI(i){const e=Lt(i);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LI(i,e){return[...i.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function O0(i){return i.map(e=>{var{providerId:n}=e,a=Fm(e,["providerId"]);return{providerId:n,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(i,e){const n=await C0(i,{},async()=>{const a=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await D0(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return i.emulatorConfig&&Ia(i.emulatorConfig.host)&&(g.credentials="include"),I0.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BI(i,e){return Da(i,"POST","/v2/accounts:revokeToken",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=fb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:c}=await zI(e,n);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:c}=n,d=new So;return a&&(ye(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(ye(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(ye(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(i,e){ye(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:a,stsTokenManager:o}=e,c=Fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=a,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new $p(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await gc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jI(this,e)}reload(){return UI(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Dh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await gc(this,MI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var a,o,c,d,p,g,_,x;const S=(a=n.displayName)!==null&&a!==void 0?a:void 0,w=(o=n.email)!==null&&o!==void 0?o:void 0,U=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,F=(d=n.photoURL)!==null&&d!==void 0?d:void 0,G=(p=n.tenantId)!==null&&p!==void 0?p:void 0,q=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,ie=(_=n.createdAt)!==null&&_!==void 0?_:void 0,oe=(x=n.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:ae,emailVerified:ee,isAnonymous:ge,providerData:be,stsTokenManager:D}=n;ye(ae&&D,e,"internal-error");const A=So.fromJSON(this.name,D);ye(typeof ae=="string",e,"internal-error"),sa(S,e.name),sa(w,e.name),ye(typeof ee=="boolean",e,"internal-error"),ye(typeof ge=="boolean",e,"internal-error"),sa(U,e.name),sa(F,e.name),sa(G,e.name),sa(q,e.name),sa(ie,e.name),sa(oe,e.name);const C=new oi({uid:ae,auth:e,email:w,emailVerified:ee,displayName:S,isAnonymous:ge,photoURL:F,phoneNumber:U,tenantId:G,stsTokenManager:A,createdAt:ie,lastLoginAt:oe});return be&&Array.isArray(be)&&(C.providerData=be.map(k=>Object.assign({},k))),q&&(C._redirectEventId=q),C}static async _fromIdTokenResponse(e,n,a=!1){const o=new So;o.updateFromServerResponse(n);const c=new oi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Dh(c),c}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];ye(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?O0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,p=new So;p.updateFromIdToken(a);const g=new oi({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $p(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;function br(i){Sr(i instanceof Function,"Expected a class definition");let e=pb.get(i);return e?(Sr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,pb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}k0.type="NONE";const mb=k0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i,e,n){return`firebase:${i}:${e}:${n}`}class Ro{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=ph(this.userKey,o.apiKey,c),this.fullPersistenceKey=ph("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ch(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Ro(br(mb),e,a);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=o[0]||br(mb);const d=ph(a,e.config.apiKey,e.name);let p=null;for(const _ of n)try{const x=await _._get(d);if(x){let S;if(typeof x=="string"){const w=await Ch(e,{idToken:x}).catch(()=>{});if(!w)break;S=await oi._fromGetAccountInfoResponse(e,w,x)}else S=oi._fromJSON(e,x);_!==c&&(p=S),c=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ro(c,e,a):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Ro(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(U0(e))return"Blackberry";if(L0(e))return"Webos";if(M0(e))return"Safari";if((e.includes("chrome/")||j0(e))&&!e.includes("edge/"))return"Chrome";if(V0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(n);if(a?.length===2)return a[1]}return"Other"}function N0(i=sn()){return/firefox\//i.test(i)}function M0(i=sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j0(i=sn()){return/crios\//i.test(i)}function P0(i=sn()){return/iemobile/i.test(i)}function V0(i=sn()){return/android/i.test(i)}function U0(i=sn()){return/blackberry/i.test(i)}function L0(i=sn()){return/webos/i.test(i)}function Qm(i=sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FI(i=sn()){var e;return Qm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qI(){return NS()&&document.documentMode===10}function z0(i=sn()){return Qm(i)||V0(i)||L0(i)||U0(i)||/windows phone/i.test(i)||P0(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(i,e=[]){let n;switch(i){case"Browser":n=gb(sn());break;case"Worker":n=`${gb(sn())}-${i}`;break;default:n=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ts}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(i,e={}){return Da(i,"GET","/v2/passwordPolicy",Ca(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=6;class QI{constructor(e){var n,a,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:KI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,a,o,c,d,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(a=g.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vb(this),this.idTokenSubscription=new vb(this),this.beforeStateQueue=new HI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var a,o,c;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ch(this,{idToken:e}),a=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let o=a,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===p)&&g?.user&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Er(this));const n=e?Lt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GI(this),n=new QI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await BI(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(n["X-Firebase-Client"]=a);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&EI(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Oa(i){return Lt(i)}class vb{constructor(e){this.auth=e,this.observer=null,this.addObserver=BS(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WI(i){td=i}function F0(i){return td.loadJS(i)}function XI(){return td.recaptchaEnterpriseScript}function $I(){return td.gapiScript}function ZI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class JI{constructor(){this.enterprise=new e2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class e2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const t2="recaptcha-enterprise",q0="NO_RECAPTCHA";class n2{constructor(e){this.type=t2,this.auth=Oa(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{NI(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const _=new kI(g);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(g=>{p(g)})})}function o(c,d,p){const g=window.grecaptcha;db(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(q0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JI().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(p=>{if(!n&&db(window.grecaptcha))o(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XI();g.length!==0&&(g+=p),F0(g).then(()=>{o(p,c,d)}).catch(_=>{d(_)})}}).catch(p=>{d(p)})})}}async function yb(i,e,n,a=!1,o=!1){const c=new n2(i);let d;if(o)d=q0;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,_=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Zp(i,e,n,a,o){var c;if(!((c=i._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await yb(i,e,n,n==="getOobCode");return a(i,d)}else return a(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await yb(i,e,n,n==="getOobCode");return a(i,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(i,e){const n=Zh(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(gs(c,e??{}))return o;Yn(o,"already-initialized")}return n.initialize({options:e})}function r2(i,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(br);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e?.popupRedirectResolver)}function a2(i,e,n){const a=Oa(i);ye(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=H0(e),{host:d,port:p}=s2(e),g=p===null?"":`:${p}`,_={url:`${c}//${d}${g}/`},x=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){ye(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ye(gs(_,a.config.emulator)&&gs(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,Ia(d)?(Cm(`${c}//${d}${g}`),Dm("Auth",!0)):o2()}function H0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function s2(i){const e=H0(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:_b(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:_b(d)}}}function _b(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function o2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,n){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function l2(i,e){return Da(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(i,e){return Ic(i,"POST","/v1/accounts:signInWithPassword",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Ca(i,e))}async function h2(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Ym{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new vc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new vc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,n,"signInWithPassword",c2);case"emailLink":return u2(e,{email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zp(e,a,"signUpPassword",l2);case"emailLink":return h2(e,{idToken:n,email:this._email,oobCode:this._password});default:Yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(i,e){return Ic(i,"POST","/v1/accounts:signInWithIdp",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="http://localhost";class _s extends Ym{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o}=n,c=Fm(n,["providerId","signInMethod"]);if(!a||!o)return null;const d=new _s(a,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Io(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Io(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Io(e,n)}buildRequest(){const e={requestUri:d2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p2(i){const e=ec(tc(i)).link,n=e?ec(tc(e)).deep_link_id:null,a=ec(tc(i)).deep_link_id;return(a?ec(tc(a)).link:null)||a||n||e||i}class Wm{constructor(e){var n,a,o,c,d,p;const g=ec(tc(e)),_=(n=g.apiKey)!==null&&n!==void 0?n:null,x=(a=g.oobCode)!==null&&a!==void 0?a:null,S=f2((o=g.mode)!==null&&o!==void 0?o:null);ye(_&&x&&S,"argument-error"),this.apiKey=_,this.operation=S,this.code=x,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=g.lang)!==null&&d!==void 0?d:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=p2(e);try{return new Wm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,n){return vc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Wm.parseLink(n);return ye(a,"argument-error"),vc._fromEmailAndCode(e,a.code,a.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Cc{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.FACEBOOK_SIGN_IN_METHOD="facebook.com";ca.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return yr.credential(n,a)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Cc{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Cc{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return ha.credential(n,a)}catch{return null}}}ha.TWITTER_SIGN_IN_METHOD="twitter.com";ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(i,e){return Ic(i,"POST","/v1/accounts:signUp",Ca(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const c=await oi._fromIdTokenResponse(e,a,o),d=bb(a);return new bs({user:c,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=bb(a);return new bs({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function bb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends qi{constructor(e,n,a,o){var c;super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Oh(e,n,a,o)}}function G0(i,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(i,c,e,a):c})}async function g2(i,e,n=!1){const a=await gc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return bs._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(i,e,n=!1){const{auth:a}=i;if(xn(a.app))return Promise.reject(Er(a));const o="reauthenticate";try{const c=await gc(i,G0(a,o,e,i),n);ye(c.idToken,a,"internal-error");const d=Km(c.idToken);ye(d,a,"internal-error");const{sub:p}=d;return ye(i.uid===p,a,"user-mismatch"),bs._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Yn(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(i,e,n=!1){if(xn(i.app))return Promise.reject(Er(i));const a="signIn",o=await G0(i,a,e),c=await bs._fromIdTokenResponse(i,a,o);return n||await i._updateCurrentUser(c.user),c}async function y2(i,e){return K0(Oa(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(i){const e=Oa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _2(i,e,n){if(xn(i.app))return Promise.reject(Er(i));const a=Oa(i),d=await Zp(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",m2).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Q0(i),g}),p=await bs._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function b2(i,e,n){return xn(i.app)?Promise.reject(Er(i)):y2(Lt(i),Fo.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Q0(i),a})}function x2(i,e,n,a){return Lt(i).onIdTokenChanged(e,n,a)}function E2(i,e,n){return Lt(i).beforeAuthStateChanged(e,n)}function T2(i,e,n,a){return Lt(i).onAuthStateChanged(e,n,a)}function $m(i){return Lt(i).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=1e3,A2=10;class W0 extends Y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);qI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,A2):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},w2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W0.type="LOCAL";const S2=W0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}X0.type="SESSION";const $0=X0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new nd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const p=Array.from(d).map(async _=>_(n.origin,c)),g=await R2(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(i="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const _=Zm("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===_)switch(w.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(w.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function C2(i){Pi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function D2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O2(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function k2(){return Z0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="firebaseLocalStorageDb",N2=1,Nh="firebaseLocalStorage",eE="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function id(i,e){return i.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function M2(){const i=indexedDB.deleteDatabase(J0);return new Dc(i).toPromise()}function Jp(){const i=indexedDB.open(J0,N2);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(Nh,{keyPath:eE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(Nh)?e(a):(a.close(),await M2(),e(await Jp()))})})}async function xb(i,e,n){const a=id(i,!0).put({[eE]:e,value:n});return new Dc(a).toPromise()}async function j2(i,e){const n=id(i,!1).get(e),a=await new Dc(n).toPromise();return a===void 0?null:a.value}function Eb(i,e){const n=id(i,!0).delete(e);return new Dc(n).toPromise()}const P2=800,V2=3;class tE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>V2)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(k2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D2(),!this.activeServiceWorker)return;this.sender=new I2(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((n=a[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await xb(e,kh,"1"),await Eb(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>xb(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>j2(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Eb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=id(o,!1).getAll();return new Dc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tE.type="LOCAL";const U2=tE;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(i,e){return e?br(e):(ye(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Ym{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function L2(i){return K0(i.auth,new Jm(i),i.bypassAuthState)}function z2(i){const{auth:e,user:n}=i;return ye(n,e,"internal-error"),v2(n,new Jm(i),i.bypassAuthState)}async function B2(i){const{auth:e,user:n}=i;return ye(n,e,"internal-error"),g2(n,new Jm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L2;case"linkViaPopup":case"linkViaRedirect":return B2;case"reauthViaPopup":case"reauthViaRedirect":return z2;default:Yn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Rc(2e3,1e4);async function q2(i,e,n){if(xn(i.app))return Promise.reject(ci(i,"operation-not-supported-in-this-environment"));const a=Oa(i);TI(i,e,Xm);const o=nE(a,n);return new fs(a,"signInViaPopup",e,o).executeNotNull()}class fs extends iE{constructor(e,n,a,o,c){super(e,n,o,c),this.provider=a,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if(!((a=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,F2.get())};e()}}fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="pendingRedirect",mh=new Map;class G2 extends iE{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const a=await K2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K2(i,e){const n=W2(e),a=Y2(i);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function Q2(i,e){mh.set(i._key(),e)}function Y2(i){return br(i._redirectPersistence)}function W2(i){return ph(H2,i.config.apiKey,i.name)}async function X2(i,e,n=!1){if(xn(i.app))return Promise.reject(Er(i));const a=Oa(i),o=nE(a,e),d=await new G2(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=10*60*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!rE(e)){const o=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";n.onError(ci(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function rE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function J2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(i,e={}){return Da(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nC=/^https?/;async function iC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await eC(i);for(const n of e)try{if(rC(n))return}catch{}Yn(i,"unauthorized-domain")}function rC(i){const e=Xp(),{protocol:n,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&a===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!nC.test(n))return!1;if(tC.test(i))return a===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Rc(3e4,6e4);function wb(){const i=Pi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function sC(i){return new Promise((e,n)=>{var a,o,c;function d(){wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wb(),n(ci(i,"network-request-failed"))},timeout:aC.get()})}if(!((o=(a=Pi().gapi)===null||a===void 0?void 0:a.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Pi().gapi)===null||c===void 0)&&c.load)d();else{const p=ZI("iframefcb");return Pi()[p]=()=>{gapi.load?d():n(ci(i,"network-request-failed"))},F0(`${$I()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw gh=null,e})}let gh=null;function oC(i){return gh=gh||sC(i),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Rc(5e3,15e3),cC="__/auth/iframe",uC="emulator/auth/iframe",hC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fC(i){const e=i.config;ye(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Gm(e,uC):`https://${i.config.authDomain}/${cC}`,a={apiKey:e.apiKey,appName:i.name,v:Ts},o=dC.get(i.config.apiHost);o&&(a.eid=o);const c=i._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${Ac(a).slice(1)}`}async function pC(i){const e=await oC(i),n=Pi().gapi;return ye(n,i,"internal-error"),e.open({where:document.body,url:fC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hC,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const d=ci(i,"network-request-failed"),p=Pi().setTimeout(()=>{c(d)},lC.get());function g(){Pi().clearTimeout(p),o(a)}a.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gC=500,vC=600,yC="_blank",_C="http://localhost";class Ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bC(i,e,n,a=gC,o=vC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g=Object.assign(Object.assign({},mC),{width:a.toString(),height:o.toString(),top:c,left:d}),_=sn().toLowerCase();n&&(p=j0(_)?yC:n),N0(_)&&(e=e||_C,g.scrollbars="yes");const x=Object.entries(g).reduce((w,[U,F])=>`${w}${U}=${F},`,"");if(FI(_)&&p!=="_self")return xC(e||"",p),new Ab(null);const S=window.open(e||"",p,x);ye(S,i,"popup-blocked");try{S.focus()}catch{}return new Ab(S)}function xC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="__/auth/handler",TC="emulator/auth/handler",wC=encodeURIComponent("fac");async function Sb(i,e,n,a,o,c){ye(i.config.authDomain,i,"auth-domain-config-required"),ye(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:a,v:Ts,eventId:o};if(e instanceof Xm){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",zS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,S]of Object.entries({}))d[x]=S}if(e instanceof Cc){const x=e.getScopes().filter(S=>S!=="");x.length>0&&(d.scopes=x.join(","))}i.tenantId&&(d.tid=i.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await i._getAppCheckToken(),_=g?`#${wC}=${encodeURIComponent(g)}`:"";return`${AC(i)}?${Ac(p).slice(1)}${_}`}function AC({config:i}){return i.emulator?Gm(i,TC):`https://${i.authDomain}/${EC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="webStorageSupport";class SC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$0,this._completeRedirectFn=X2,this._overrideRedirectResult=Q2}async _openPopup(e,n,a,o){var c;Sr((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await Sb(e,n,a,Xp(),o);return bC(e,d,Zm())}async _openRedirect(e,n,a,o){await this._originValidation(e);const c=await Sb(e,n,a,Xp(),o);return C2(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Sr(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await pC(e),a=new Z2(e);return n.register("authEvent",o=>(ye(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mp,{type:Mp},o=>{var c;const d=(c=o?.[0])===null||c===void 0?void 0:c[Mp];d!==void 0&&n(!!d),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return z0()||M0()||Qm()}}const RC=SC;var Rb="@firebase/auth",Ib="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DC(i){vs(new _a("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;ye(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B0(i)},_=new YI(a,o,c,g);return r2(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),vs(new _a("auth-internal",e=>{const n=Oa(e.getProvider("auth").getImmediate());return(a=>new IC(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(Rb,Ib,CC(i)),ji(Rb,Ib,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=5*60,kC=r0("authIdTokenMaxAge")||OC;let Cb=null;const NC=i=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>kC)return;const o=n?.token;Cb!==o&&(Cb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function MC(i=Nm()){const e=Zh(i,"auth");if(e.isInitialized())return e.getImmediate();const n=i2(i,{popupRedirectResolver:RC,persistence:[U2,S2,$0]}),a=r0("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=NC(c.toString());E2(n,d,()=>d(n.currentUser)),x2(n,p=>d(p))}}const o=t0("auth");return o&&a2(n,`http://${o}`),n}function jC(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}WI({loadJS(i){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=o=>{const c=ci("internal-error");c.customData=o,n(c)},a.type="text/javascript",a.charset="UTF-8",jC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DC("Browser");var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ga,aE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,A){function C(){}C.prototype=A.prototype,D.D=A.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(k,M,N){for(var R=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)R[Oe-2]=arguments[Oe];return A.prototype[M].apply(k,R)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,C){C||(C=0);var k=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)k[M]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(M=0;16>M;++M)k[M]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=D.g[0],C=D.g[1],M=D.g[2];var N=D.g[3],R=A+(N^C&(M^N))+k[0]+3614090360&4294967295;A=C+(R<<7&4294967295|R>>>25),R=N+(M^A&(C^M))+k[1]+3905402710&4294967295,N=A+(R<<12&4294967295|R>>>20),R=M+(C^N&(A^C))+k[2]+606105819&4294967295,M=N+(R<<17&4294967295|R>>>15),R=C+(A^M&(N^A))+k[3]+3250441966&4294967295,C=M+(R<<22&4294967295|R>>>10),R=A+(N^C&(M^N))+k[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=N+(M^A&(C^M))+k[5]+1200080426&4294967295,N=A+(R<<12&4294967295|R>>>20),R=M+(C^N&(A^C))+k[6]+2821735955&4294967295,M=N+(R<<17&4294967295|R>>>15),R=C+(A^M&(N^A))+k[7]+4249261313&4294967295,C=M+(R<<22&4294967295|R>>>10),R=A+(N^C&(M^N))+k[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=N+(M^A&(C^M))+k[9]+2336552879&4294967295,N=A+(R<<12&4294967295|R>>>20),R=M+(C^N&(A^C))+k[10]+4294925233&4294967295,M=N+(R<<17&4294967295|R>>>15),R=C+(A^M&(N^A))+k[11]+2304563134&4294967295,C=M+(R<<22&4294967295|R>>>10),R=A+(N^C&(M^N))+k[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=N+(M^A&(C^M))+k[13]+4254626195&4294967295,N=A+(R<<12&4294967295|R>>>20),R=M+(C^N&(A^C))+k[14]+2792965006&4294967295,M=N+(R<<17&4294967295|R>>>15),R=C+(A^M&(N^A))+k[15]+1236535329&4294967295,C=M+(R<<22&4294967295|R>>>10),R=A+(M^N&(C^M))+k[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=N+(C^M&(A^C))+k[6]+3225465664&4294967295,N=A+(R<<9&4294967295|R>>>23),R=M+(A^C&(N^A))+k[11]+643717713&4294967295,M=N+(R<<14&4294967295|R>>>18),R=C+(N^A&(M^N))+k[0]+3921069994&4294967295,C=M+(R<<20&4294967295|R>>>12),R=A+(M^N&(C^M))+k[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=N+(C^M&(A^C))+k[10]+38016083&4294967295,N=A+(R<<9&4294967295|R>>>23),R=M+(A^C&(N^A))+k[15]+3634488961&4294967295,M=N+(R<<14&4294967295|R>>>18),R=C+(N^A&(M^N))+k[4]+3889429448&4294967295,C=M+(R<<20&4294967295|R>>>12),R=A+(M^N&(C^M))+k[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=N+(C^M&(A^C))+k[14]+3275163606&4294967295,N=A+(R<<9&4294967295|R>>>23),R=M+(A^C&(N^A))+k[3]+4107603335&4294967295,M=N+(R<<14&4294967295|R>>>18),R=C+(N^A&(M^N))+k[8]+1163531501&4294967295,C=M+(R<<20&4294967295|R>>>12),R=A+(M^N&(C^M))+k[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=N+(C^M&(A^C))+k[2]+4243563512&4294967295,N=A+(R<<9&4294967295|R>>>23),R=M+(A^C&(N^A))+k[7]+1735328473&4294967295,M=N+(R<<14&4294967295|R>>>18),R=C+(N^A&(M^N))+k[12]+2368359562&4294967295,C=M+(R<<20&4294967295|R>>>12),R=A+(C^M^N)+k[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=N+(A^C^M)+k[8]+2272392833&4294967295,N=A+(R<<11&4294967295|R>>>21),R=M+(N^A^C)+k[11]+1839030562&4294967295,M=N+(R<<16&4294967295|R>>>16),R=C+(M^N^A)+k[14]+4259657740&4294967295,C=M+(R<<23&4294967295|R>>>9),R=A+(C^M^N)+k[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=N+(A^C^M)+k[4]+1272893353&4294967295,N=A+(R<<11&4294967295|R>>>21),R=M+(N^A^C)+k[7]+4139469664&4294967295,M=N+(R<<16&4294967295|R>>>16),R=C+(M^N^A)+k[10]+3200236656&4294967295,C=M+(R<<23&4294967295|R>>>9),R=A+(C^M^N)+k[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=N+(A^C^M)+k[0]+3936430074&4294967295,N=A+(R<<11&4294967295|R>>>21),R=M+(N^A^C)+k[3]+3572445317&4294967295,M=N+(R<<16&4294967295|R>>>16),R=C+(M^N^A)+k[6]+76029189&4294967295,C=M+(R<<23&4294967295|R>>>9),R=A+(C^M^N)+k[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=N+(A^C^M)+k[12]+3873151461&4294967295,N=A+(R<<11&4294967295|R>>>21),R=M+(N^A^C)+k[15]+530742520&4294967295,M=N+(R<<16&4294967295|R>>>16),R=C+(M^N^A)+k[2]+3299628645&4294967295,C=M+(R<<23&4294967295|R>>>9),R=A+(M^(C|~N))+k[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=N+(C^(A|~M))+k[7]+1126891415&4294967295,N=A+(R<<10&4294967295|R>>>22),R=M+(A^(N|~C))+k[14]+2878612391&4294967295,M=N+(R<<15&4294967295|R>>>17),R=C+(N^(M|~A))+k[5]+4237533241&4294967295,C=M+(R<<21&4294967295|R>>>11),R=A+(M^(C|~N))+k[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=N+(C^(A|~M))+k[3]+2399980690&4294967295,N=A+(R<<10&4294967295|R>>>22),R=M+(A^(N|~C))+k[10]+4293915773&4294967295,M=N+(R<<15&4294967295|R>>>17),R=C+(N^(M|~A))+k[1]+2240044497&4294967295,C=M+(R<<21&4294967295|R>>>11),R=A+(M^(C|~N))+k[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=N+(C^(A|~M))+k[15]+4264355552&4294967295,N=A+(R<<10&4294967295|R>>>22),R=M+(A^(N|~C))+k[6]+2734768916&4294967295,M=N+(R<<15&4294967295|R>>>17),R=C+(N^(M|~A))+k[13]+1309151649&4294967295,C=M+(R<<21&4294967295|R>>>11),R=A+(M^(C|~N))+k[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=N+(C^(A|~M))+k[11]+3174756917&4294967295,N=A+(R<<10&4294967295|R>>>22),R=M+(A^(N|~C))+k[2]+718787259&4294967295,M=N+(R<<15&4294967295|R>>>17),R=C+(N^(M|~A))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+N&4294967295}a.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var C=A-this.blockSize,k=this.B,M=this.h,N=0;N<A;){if(M==0)for(;N<=C;)o(this,D,N),N+=this.blockSize;if(typeof D=="string"){for(;N<A;)if(k[M++]=D.charCodeAt(N++),M==this.blockSize){o(this,k),M=0;break}}else for(;N<A;)if(k[M++]=D[N++],M==this.blockSize){o(this,k),M=0;break}}this.h=M,this.o+=A},a.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var C=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=C&255,C/=256;for(this.u(D),D=Array(16),A=C=0;4>A;++A)for(var k=0;32>k;k+=8)D[C++]=this.g[A]>>>k&255;return D};function c(D,A){var C=p;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=A(D)}function d(D,A){this.h=A;for(var C=[],k=!0,M=D.length-1;0<=M;M--){var N=D[M]|0;k&&N==A||(C[M]=N,k=!1)}this.g=C}var p={};function g(D){return-128<=D&&128>D?c(D,function(A){return new d([A|0],0>A?-1:0)}):new d([D|0],0>D?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return S;if(0>D)return q(_(-D));for(var A=[],C=1,k=0;D>=C;k++)A[k]=D/C|0,C*=4294967296;return new d(A,0)}function x(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return q(x(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=_(Math.pow(A,8)),k=S,M=0;M<D.length;M+=8){var N=Math.min(8,D.length-M),R=parseInt(D.substring(M,M+N),A);8>N?(N=_(Math.pow(A,N)),k=k.j(N).add(_(R))):(k=k.j(C),k=k.add(_(R)))}return k}var S=g(0),w=g(1),U=g(16777216);i=d.prototype,i.m=function(){if(G(this))return-q(this).m();for(var D=0,A=1,C=0;C<this.g.length;C++){var k=this.i(C);D+=(0<=k?k:4294967296+k)*A,A*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(F(this))return"0";if(G(this))return"-"+q(this).toString(D);for(var A=_(Math.pow(D,6)),C=this,k="";;){var M=ee(C,A).g;C=ie(C,M.j(A));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=M,F(C))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function F(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function G(D){return D.h==-1}i.l=function(D){return D=ie(this,D),G(D)?-1:F(D)?0:1};function q(D){for(var A=D.g.length,C=[],k=0;k<A;k++)C[k]=~D.g[k];return new d(C,~D.h).add(w)}i.abs=function(){return G(this)?q(this):this},i.add=function(D){for(var A=Math.max(this.g.length,D.g.length),C=[],k=0,M=0;M<=A;M++){var N=k+(this.i(M)&65535)+(D.i(M)&65535),R=(N>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);k=R>>>16,N&=65535,R&=65535,C[M]=R<<16|N}return new d(C,C[C.length-1]&-2147483648?-1:0)};function ie(D,A){return D.add(q(A))}i.j=function(D){if(F(this)||F(D))return S;if(G(this))return G(D)?q(this).j(q(D)):q(q(this).j(D));if(G(D))return q(this.j(q(D)));if(0>this.l(U)&&0>D.l(U))return _(this.m()*D.m());for(var A=this.g.length+D.g.length,C=[],k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var M=0;M<D.g.length;M++){var N=this.i(k)>>>16,R=this.i(k)&65535,Oe=D.i(M)>>>16,Be=D.i(M)&65535;C[2*k+2*M]+=R*Be,oe(C,2*k+2*M),C[2*k+2*M+1]+=N*Be,oe(C,2*k+2*M+1),C[2*k+2*M+1]+=R*Oe,oe(C,2*k+2*M+1),C[2*k+2*M+2]+=N*Oe,oe(C,2*k+2*M+2)}for(k=0;k<A;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=A;k<2*A;k++)C[k]=0;return new d(C,0)};function oe(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function ae(D,A){this.g=D,this.h=A}function ee(D,A){if(F(A))throw Error("division by zero");if(F(D))return new ae(S,S);if(G(D))return A=ee(q(D),A),new ae(q(A.g),q(A.h));if(G(A))return A=ee(D,q(A)),new ae(q(A.g),A.h);if(30<D.g.length){if(G(D)||G(A))throw Error("slowDivide_ only works with positive integers.");for(var C=w,k=A;0>=k.l(D);)C=ge(C),k=ge(k);var M=be(C,1),N=be(k,1);for(k=be(k,2),C=be(C,2);!F(k);){var R=N.add(k);0>=R.l(D)&&(M=M.add(C),N=R),k=be(k,1),C=be(C,1)}return A=ie(D,M.j(A)),new ae(M,A)}for(M=S;0<=D.l(A);){for(C=Math.max(1,Math.floor(D.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=_(C),R=N.j(A);G(R)||0<R.l(D);)C-=k,N=_(C),R=N.j(A);F(N)&&(N=w),M=M.add(N),D=ie(D,R)}return new ae(M,D)}i.A=function(D){return ee(this,D).h},i.and=function(D){for(var A=Math.max(this.g.length,D.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)&D.i(k);return new d(C,this.h&D.h)},i.or=function(D){for(var A=Math.max(this.g.length,D.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)|D.i(k);return new d(C,this.h|D.h)},i.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)^D.i(k);return new d(C,this.h^D.h)};function ge(D){for(var A=D.g.length+1,C=[],k=0;k<A;k++)C[k]=D.i(k)<<1|D.i(k-1)>>>31;return new d(C,D.h)}function be(D,A){var C=A>>5;A%=32;for(var k=D.g.length-C,M=[],N=0;N<k;N++)M[N]=0<A?D.i(N+C)>>>A|D.i(N+C+1)<<32-A:D.i(N+C);return new d(M,D.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,aE=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=x,ga=d}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sE,nc,oE,vh,em,lE,cE,uE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var a=n(this);function o(u,m){if(m)e:{var y=a;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in y))break e;y=y[P]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,T=!1,P={next:function(){if(!T&&y<u.length){var H=y++;return{value:m(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}o("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function x(u,m,y){return u.call.apply(u.bind,arguments)}function S(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,T),u.apply(m,P)}}return function(){return u.apply(m,arguments)}}function w(u,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:S,w.apply(null,arguments)}function U(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function F(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,P,H){for(var ne=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ne[Ve-2]=arguments[Ve];return m.prototype[P].apply(T,ne)}}function G(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function q(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const P=u.length||0,H=T.length||0;u.length=P+H;for(let ne=0;ne<H;ne++)u[P+ne]=T[ne]}else u.push(T)}}class ie{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(u){return/^[\s\xa0]*$/.test(u)}function ae(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ee(u){return ee[" "](u),u}ee[" "]=function(){};var ge=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function be(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function D(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function A(u){const m={};for(const y in u)m[y]=u[y];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let y,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(y in T)u[y]=T[y];for(let H=0;H<C.length;H++)y=C[H],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function M(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function N(u){p.setTimeout(()=>{throw u},0)}function R(){var u=Se;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Oe{constructor(){this.h=this.g=null}add(m,y){const T=Be.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Be=new ie(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let te,de=!1,Se=new Oe,He=()=>{const u=p.Promise.resolve(void 0);te=()=>{u.then(Et)}};var Et=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){N(y)}var m=Be;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}de=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};p.addEventListener("test",y,m),p.removeEventListener("test",y,m)}catch{}return u}();function Ct(u,m){if(xe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ge){e:{try{ee(m.nodeName);var P=!0;break e}catch{}P=!1}P||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:zt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ct.aa.h.call(this)}}F(Ct,xe);var zt={2:"touch",3:"pen",4:"mouse"};Ct.prototype.h=function(){Ct.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Nn="closure_listenable_"+(1e6*Math.random()|0),Hi=0;function Wn(u,m,y,T,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=P,this.key=++Hi,this.da=this.fa=!1}function En(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mn(u){this.src=u,this.g={},this.h=0}mn.prototype.add=function(u,m,y,T,P){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ne=di(u,m,T,P);return-1<ne?(m=u[ne],y||(m.fa=!1)):(m=new Wn(m,this.src,H,!!T,P),m.fa=y,u.push(m)),m};function gn(u,m){var y=m.type;if(y in u.g){var T=u.g[y],P=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=P)&&Array.prototype.splice.call(T,P,1),H&&(En(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function di(u,m,y,T){for(var P=0;P<u.length;++P){var H=u[P];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==T)return P}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),Dr={};function ka(u,m,y,T,P){if(Array.isArray(m)){for(var H=0;H<m.length;H++)ka(u,m[H],y,T,P);return null}return y=fe(y),u&&u[Nn]?u.K(m,y,_(T)?!!T.capture:!1,P):Dt(u,m,y,!1,T,P)}function Dt(u,m,y,T,P,H){if(!m)throw Error("Invalid event type");var ne=_(P)?!!P.capture:!!P,Ve=Or(u);if(Ve||(u[fi]=Ve=new mn(u)),y=Ve.add(m,y,T,ne,H),y.proxy)return y;if(T=Na(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)Je||(P=ne),P===void 0&&(P=!1),u.addEventListener(m.toString(),T,P);else if(u.attachEvent)u.attachEvent(Gi(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Na(){function u(y){return m.call(u.src,u.listener,y)}const m=Qo;return u}function pi(u,m,y,T,P){if(Array.isArray(m))for(var H=0;H<m.length;H++)pi(u,m[H],y,T,P);else T=_(T)?!!T.capture:!!T,y=fe(y),u&&u[Nn]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],y=di(H,y,T,P),-1<y&&(En(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Or(u))&&(m=u.g[m.toString()],u=-1,m&&(u=di(m,y,T,P)),(y=-1<u?m[u]:null)&&Xn(y))}function Xn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Nn])gn(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(Gi(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Or(m))?(gn(y,u),y.h==0&&(y.src=null,m[fi]=null)):En(u)}}}function Gi(u){return u in Dr?Dr[u]:Dr[u]="on"+u}function Qo(u,m){if(u.da)u=!0;else{m=new Ct(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&Xn(u),u=y.call(T,m)}return u}function Or(u){return u=u[fi],u instanceof mn?u:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(u){return typeof u=="function"?u:(u[re]||(u[re]=function(m){return u.handleEvent(m)}),u[re])}function Re(){ke.call(this),this.i=new mn(this),this.M=this,this.F=null}F(Re,ke),Re.prototype[Nn]=!0,Re.prototype.removeEventListener=function(u,m,y,T){pi(this,u,m,y,T)};function Ee(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new xe(m,u);else if(m instanceof xe)m.target=m.target||u;else{var P=m;m=new xe(T,u),k(m,P)}if(P=!0,y)for(var H=y.length-1;0<=H;H--){var ne=m.g=y[H];P=et(ne,T,!0,m)&&P}if(ne=m.g=u,P=et(ne,T,!0,m)&&P,P=et(ne,T,!1,m)&&P,y)for(H=0;H<y.length;H++)ne=m.g=y[H],P=et(ne,T,!1,m)&&P}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)En(y[T]);delete u.g[m],u.h--}}this.F=null},Re.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},Re.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function et(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,H=0;H<m.length;++H){var ne=m[H];if(ne&&!ne.da&&ne.capture==y){var Ve=ne.listener,kt=ne.ha||ne.src;ne.fa&&gn(u.i,ne),P=Ve.call(kt,T)!==!1&&P}}return P&&!T.defaultPrevented}function ft(u,m,y){if(typeof u=="function")y&&(u=w(u,y));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function $n(u){u.g=ft(()=>{u.g=null,u.i&&(u.i=!1,$n(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ma extends ke{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$n(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(u){ke.call(this),this.h=u,this.g={}}F(Zn,ke);var Jn=[];function Mn(u){be(u.g,function(m,y){this.g.hasOwnProperty(y)&&Xn(m)},u),u.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),Mn(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=p.JSON.stringify,mi=p.JSON.parse,ei=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Ki(){}Ki.prototype.h=null;function ja(u){return u.h||(u.h=u.i())}function Yo(){}var Qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yi(){xe.call(this,"d")}F(Yi,xe);function Wo(){xe.call(this,"c")}F(Wo,xe);var gi={},Xo=null;function kr(){return Xo=Xo||new Re}gi.La="serverreachability";function Cs(u){xe.call(this,gi.La,u)}F(Cs,xe);function Nr(u){const m=kr();Ee(m,new Cs(m))}gi.STAT_EVENT="statevent";function Pc(u,m){xe.call(this,gi.STAT_EVENT,u),this.stat=m}F(Pc,xe);function at(u){const m=kr();Ee(m,new Pc(m,u))}gi.Ma="timingevent";function Ot(u,m){xe.call(this,gi.Ma,u),this.size=m}F(Ot,xe);function Tt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function $o(u,m,y,T,P,H){u.info(function(){if(u.g)if(H)for(var ne="",Ve=H.split("&"),kt=0;kt<Ve.length;kt++){var Ue=Ve[kt].split("=");if(1<Ue.length){var Ft=Ue[0];Ue=Ue[1];var Nt=Ft.split("_");ne=2<=Nt.length&&Nt[1]=="type"?ne+(Ft+"="+Ue+"&"):ne+(Ft+"=redacted&")}}else ne=null;else ne=H;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+m+`
`+y+`
`+ne})}function xd(u,m,y,T,P,H,ne){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+m+`
`+y+`
`+H+" "+ne})}function Mr(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Pa(u,y)+(T?" "+T:"")})}function Vc(u,m){u.info(function(){return"TIMEOUT: "+m})}jn.prototype.info=function(){};function Pa(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var P=T[1];if(Array.isArray(P)&&!(1>P.length)){var H=P[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ne=1;ne<P.length;ne++)P[ne]=""}}}}return on(y)}catch{return m}}var jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vi;function yi(){}F(yi,Ki),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},vi=new yi;function ln(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var Zo={},Ds={};function ti(u,m,y){u.L=1,u.v=Ba(Tn(m)),u.m=y,u.P=!0,Xi(u,null)}function Xi(u,m){u.F=Date.now(),Va(u),u.A=Tn(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),rl(y.i,"t",T),u.C=0,y=u.j.J,u.h=new yt,u.g=Jc(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Ma(w(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(Jn[0]=P.toString()),P=Jn);for(var H=0;H<P.length;H++){var ne=ka(y,P[H],T||m.handleEvent,!1,m.h||m);if(!ne)break;m.g[ne.key]=ne}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Nr(),$o(u.i,u.u,u.A,u.l,u.R,u.m)}ln.prototype.ca=function(u){u=u.target;const m=this.M;m&&Ln(u)==3?m.j():this.Y(u)},ln.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Ln(this.g);var m=this.g.Ba();const rr=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Gc(this.g)))){this.J||Nt!=4||m==7||(m==8||0>=rr?Nr(3):Nr(2)),Pr(this);var y=this.g.Z();this.X=y;t:if(Uc(this)){var T=Gc(this.g);u="";var P=T.length,H=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),_i(this);var ne="";break t}this.h.i=new p.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(H&&m==P-1)});T.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,xd(this.i,this.u,this.A,this.l,this.R,Nt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,kt=this.g;if((Ve=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(Ve)){var Ue=Ve;break t}}Ue=null}if(y=Ue)Mr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,y);else{this.o=!1,this.s=3,at(12),Wt(this),_i(this);break e}}if(this.P){y=!0;let Xt;for(;!this.J&&this.C<ne.length;)if(Xt=Lc(this,ne),Xt==Ds){Nt==4&&(this.s=4,at(14),y=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Zo){this.s=4,at(15),Mr(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else Mr(this.i,this.l,Xt,null),Ua(this,Xt);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ne.length!=0||this.h.h||(this.s=1,at(16),y=!1),this.o=this.o&&y,!y)Mr(this.i,this.l,ne,"[Invalid Chunked Response]"),Wt(this),_i(this);else if(0<ne.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Wa(Ft),Ft.M=!0,at(11))}}else Mr(this.i,this.l,ne,null),Ua(this,ne);Nt==4&&Wt(this),this.o&&!this.J&&(Nt==4?Xc(this.j,this):(this.o=!1,Va(this)))}else Sd(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Wt(this),_i(this)}}}catch{}finally{}};function Uc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lc(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Ds:(y=Number(m.substring(y,T)),isNaN(y)?Zo:(T+=1,T+y>m.length?Ds:(m=m.slice(T,T+y),u.C=T+y,m)))}ln.prototype.cancel=function(){this.J=!0,Wt(this)};function Va(u){u.S=Date.now()+u.I,zc(u,u.I)}function zc(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tt(w(u.ba,u),m)}function Pr(u){u.B&&(p.clearTimeout(u.B),u.B=null)}ln.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vc(this.i,this.A),this.L!=2&&(Nr(),at(17)),Wt(this),this.s=2,_i(this)):zc(this,this.S-u)};function _i(u){u.j.G==0||u.J||Xc(u.j,u)}function Wt(u){Pr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Mn(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Ua(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Jo(y.h,u))){if(!u.K&&Jo(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Fs(y),zs(y);else break e;cl(y),at(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=Tt(w(y.Za,y),6e3));if(1>=ks(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ir(y,11)}else if((u.K||y.g==u)&&Fs(y),!oe(m))for(P=y.Da.g.parse(m),m=0;m<P.length;m++){let Ue=P[m];if(y.T=Ue[0],Ue=Ue[1],y.G==2)if(Ue[0]=="c"){y.K=Ue[1],y.ia=Ue[2];const Ft=Ue[3];Ft!=null&&(y.la=Ft,y.j.info("VER="+y.la));const Nt=Ue[4];Nt!=null&&(y.Aa=Nt,y.j.info("SVER="+y.Aa));const rr=Ue[5];rr!=null&&typeof rr=="number"&&0<rr&&(T=1.5*rr,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const Xt=u.g;if(Xt){const Si=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var H=T.h;H.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Ns(H,H.h),H.h=null))}if(T.D){const hl=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(T.ya=hl,We(T.I,T.D,hl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var ne=u;if(T.qa=Zc(T,T.J?T.ia:null,T.W),ne.K){cn(T.h,ne);var Ve=ne,kt=T.L;kt&&(Ve.I=kt),Ve.B&&(Pr(Ve),Va(Ve)),T.g=ne}else Yc(T);0<y.i.length&&Bs(y)}else Ue[0]!="stop"&&Ue[0]!="close"||ir(y,7);else y.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ir(y,7):ol(y):Ue[0]!="noop"&&y.l&&y.l.ta(Ue),y.v=0)}}Nr(4)}catch{}}var Bc=class{constructor(u,m){this.g=u,this.map=m}};function $i(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Os(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ks(u){return u.h?1:u.g?u.g.size:0}function Jo(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ns(u,m){u.g?u.g.add(m):u.h=m}function cn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}$i.prototype.cancel=function(){if(this.i=el(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function el(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return G(u.i)}function Ed(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function Ms(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function tl(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Ms(u),T=Ed(u),P=T.length,H=0;H<P;H++)m.call(void 0,T[H],y&&y[H],u)}var La=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),P=null;if(0<=T){var H=u[y].substring(0,T);P=u[y].substring(T+1)}else H=u[y];m(H,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function wt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wt){this.h=u.h,za(this,u.j),this.o=u.o,this.g=u.g,Vr(this,u.s),this.l=u.l;var m=u.i,y=new Ji;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Zi(this,y),this.m=u.m}else u&&(m=String(u).match(La))?(this.h=!1,za(this,m[1]||"",!0),this.o=Pn(m[2]||""),this.g=Pn(m[3]||"",!0),Vr(this,m[4]),this.l=Pn(m[5]||"",!0),Zi(this,m[6]||"",!0),this.m=Pn(m[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}wt.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Fa(m,nl,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Fa(m,nl,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Fa(y,y.charAt(0)=="/"?wd:il,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Fa(y,js)),u.join("")};function Tn(u){return new wt(u)}function za(u,m,y){u.j=y?Pn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Vr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Zi(u,m,y){m instanceof Ji?(u.i=m,qc(u.i,u.h)):(y||(m=Fa(m,Ad)),u.i=new Ji(m,u.h))}function We(u,m,y){u.i.set(m,y)}function Ba(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fa(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Fc),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nl=/[#\/\?@]/g,il=/[#\?:]/g,wd=/[#\?]/g,Ad=/[#\?@]/g,js=/#/g;function Ji(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Td(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}i=Ji.prototype,i.add=function(u,m){Vn(this),this.i=null,u=bi(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function er(u,m){Vn(u),m=bi(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function tr(u,m){return Vn(u),m=bi(u,m),u.g.has(m)}i.forEach=function(u,m){Vn(this),this.g.forEach(function(y,T){y.forEach(function(P){u.call(m,P,T,this)},this)},this)},i.na=function(){Vn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const P=u[T];for(let H=0;H<P.length;H++)y.push(m[T])}return y},i.V=function(u){Vn(this);let m=[];if(typeof u=="string")tr(this,u)&&(m=m.concat(this.g.get(bi(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},i.set=function(u,m){return Vn(this),this.i=null,u=bi(this,u),tr(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function rl(u,m,y){er(u,m),0<y.length&&(u.i=null,u.g.set(bi(u,m),G(y)),u.h+=y.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const H=encodeURIComponent(String(T)),ne=this.V(T);for(T=0;T<ne.length;T++){var P=H;ne[T]!==""&&(P+="="+encodeURIComponent(String(ne[T]))),u.push(P)}}return this.i=u.join("&")};function bi(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qc(u,m){m&&!u.j&&(Vn(u),u.i=null,u.g.forEach(function(y,T){var P=T.toLowerCase();T!=P&&(er(this,T),rl(this,P,y))},u)),u.j=m}function qa(u,m){const y=new jn;if(p.Image){const T=new Image;T.onload=U(Un,y,"TestLoadImage: loaded",!0,m,T),T.onerror=U(Un,y,"TestLoadImage: error",!1,m,T),T.onabort=U(Un,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=U(Un,y,"TestLoadImage: timeout",!1,m,T),p.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function ni(u,m){const y=new jn,T=new AbortController,P=setTimeout(()=>{T.abort(),Un(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(P),H.ok?Un(y,"TestPingServer: ok",!0,m):Un(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Un(y,"TestPingServer: error",!1,m)})}function Un(u,m,y,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(y)}catch{}}function Ha(){this.g=new ei}function xi(u,m,y){const T=y||"";try{tl(u,function(P,H){let ne=P;_(P)&&(ne=on(P)),m.push(T+H+"="+encodeURIComponent(ne))})}catch(P){throw m.push(T+"type="+encodeURIComponent("_badmap")),P}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}F(Ur,Ki),Ur.prototype.g=function(){return new nr(this.l,this.j)},Ur.prototype.i=function(u){return function(){return u}}({});function nr(u,m){Re.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(nr,Re),i=nr.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ti(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ei(this):Ti(this),this.readyState==3&&al(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,Ei(this))},i.Qa=function(u){this.g&&(this.response=u,Ei(this))},i.ga=function(){this.g&&Ei(this)};function Ei(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ti(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ti(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sl(u){let m="";return be(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function Bt(u,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=sl(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):We(u,m,y))}function Ge(u){Re.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Ge,Re);var Ps=/^https?$/i,Ga=["POST","PUT"];i=Ge.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vi.g(),this.v=this.o?ja(this.o):ja(vi),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Hc(this,H);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)y.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())y.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),P=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Ga,m,void 0))||T||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ne]of y)this.g.setRequestHeader(H,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ka(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Hc(this,H)}};function Hc(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Vs(u),wi(u)}function Vs(u){u.A||(u.A=!0,Ee(u,"complete"),Ee(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ee(this,"complete"),Ee(this,"abort"),wi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),Ge.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Us(this):this.bb())},i.bb=function(){Us(this)};function Us(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)ft(u.Ea,0,u);else if(Ee(u,"readystatechange"),Ln(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=ne===0){var P=String(u.D).match(La)[1]||null;!P&&p.self&&p.self.location&&(P=p.self.location.protocol.slice(0,-1)),T=!Ps.test(P?P.toLowerCase():"")}y=T}if(y)Ee(u,"complete"),Ee(u,"success");else{u.m=6;try{var H=2<Ln(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Vs(u)}}finally{wi(u)}}}}function wi(u,m){if(u.g){Ka(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ee(u,"ready");try{y.onreadystatechange=T}catch{}}}function Ka(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),mi(m)}};function Gc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sd(u){const m={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(oe(u[T]))continue;var y=M(u[T]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[P]||[];m[P]=H,H.push(y)}D(m,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qa(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Ls(u){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qa("baseRetryDelayMs",5e3,u),this.cb=Qa("retryDelaySeedMs",1e4,u),this.Wa=Qa("forwardChannelMaxRetries",2,u),this.wa=Qa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $i(u&&u.concurrentRequestLimit),this.Da=new Ha,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ls.prototype,i.la=8,i.G=1,i.connect=function(u,m,y,T){at(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Zc(this,null,this.W),Bs(this)};function ol(u){if(Kc(u),u.G==3){var m=u.U++,y=Tn(u.I);if(We(y,"SID",u.K),We(y,"RID",m),We(y,"TYPE","terminate"),Ya(u,y),m=new ln(u,u.j,m),m.L=2,m.v=Ba(Tn(y)),y=!1,p.navigator&&p.navigator.sendBeacon)try{y=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&p.Image&&(new Image().src=m.v,y=!0),y||(m.g=Jc(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Va(m)}$c(u)}function zs(u){u.g&&(Wa(u),u.g.cancel(),u.g=null)}function Kc(u){zs(u),u.u&&(p.clearTimeout(u.u),u.u=null),Fs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Bs(u){if(!Os(u.h)&&!u.s){u.s=!0;var m=u.Ga;te||He(),de||(te(),de=!0),Se.add(m,u),u.B=0}}function Rd(u,m){return ks(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tt(w(u.Ga,u,m),ul(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const P=new ln(this,this.j,u);let H=this.o;if(this.S&&(H?(H=A(H),k(H,this.S)):H=this.S),this.m!==null||this.O||(P.H=H,H=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Qc(this,P,m),y=Tn(this.I),We(y,"RID",u),We(y,"CVER",22),this.D&&We(y,"X-HTTP-Session-Id",this.D),Ya(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(sl(H)))+"&"+m:this.m&&Bt(y,this.m,H)),Ns(this.h,P),this.Ua&&We(y,"TYPE","init"),this.P?(We(y,"$req",m),We(y,"SID","null"),P.T=!0,ti(P,y,null)):ti(P,y,m),this.G=2}}else this.G==3&&(u?ll(this,u):this.i.length==0||Os(this.h)||ll(this))};function ll(u,m){var y;m?y=m.l:y=u.U++;const T=Tn(u.I);We(T,"SID",u.K),We(T,"RID",y),We(T,"AID",u.T),Ya(u,T),u.m&&u.o&&Bt(T,u.m,u.o),y=new ln(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Qc(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ns(u.h,y),ti(y,T,m)}function Ya(u,m){u.H&&be(u.H,function(y,T){We(m,T,y)}),u.l&&tl({},function(y,T){We(m,T,y)})}function Qc(u,m,y){y=Math.min(u.i.length,y);var T=u.l?w(u.l.Na,u.l,u):null;e:{var P=u.i;let H=-1;for(;;){const ne=["count="+y];H==-1?0<y?(H=P[0].g,ne.push("ofs="+H)):H=0:ne.push("ofs="+H);let Ve=!0;for(let kt=0;kt<y;kt++){let Ue=P[kt].g;const Ft=P[kt].map;if(Ue-=H,0>Ue)H=Math.max(0,P[kt].g-100),Ve=!1;else try{xi(Ft,ne,"req"+Ue+"_")}catch{T&&T(Ft)}}if(Ve){T=ne.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,T}function Yc(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;te||He(),de||(te(),de=!0),Se.add(m,u),u.v=0}}function cl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tt(w(u.Fa,u),ul(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tt(w(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),zs(this),Wc(this))};function Wa(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Wc(u){u.g=new ln(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Tn(u.qa);We(m,"RID","rpc"),We(m,"SID",u.K),We(m,"AID",u.T),We(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(m,"TO",u.ja),We(m,"TYPE","xmlhttp"),Ya(u,m),u.m&&u.o&&Bt(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ba(Tn(m)),y.m=null,y.P=!0,Xi(y,u)}i.Za=function(){this.C!=null&&(this.C=null,zs(this),cl(this),at(19))};function Fs(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function Xc(u,m){var y=null;if(u.g==m){Fs(u),Wa(u),u.g=null;var T=2}else if(Jo(u.h,m))y=m.D,cn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var P=u.B;T=kr(),Ee(T,new Ot(T,y)),Bs(u)}else Yc(u);else if(P=m.s,P==3||P==0&&0<m.X||!(T==1&&Rd(u,m)||T==2&&cl(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),P){case 1:ir(u,5);break;case 4:ir(u,10);break;case 3:ir(u,6);break;default:ir(u,2)}}}function ul(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function ir(u,m){if(u.j.info("Error code "+m),m==2){var y=w(u.fb,u),T=u.Xa;const P=!T;T=new wt(T||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||za(T,"https"),Ba(T),P?qa(T.toString(),y):ni(T.toString(),y)}else at(2);u.G=0,u.l&&u.l.sa(m),$c(u),Kc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function $c(u){if(u.G=0,u.ka=[],u.l){const m=el(u.h);(m.length!=0||u.i.length!=0)&&(q(u.ka,m),q(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function Zc(u,m,y){var T=y instanceof wt?Tn(y):new wt(y);if(T.g!="")m&&(T.g=m+"."+T.g),Vr(T,T.s);else{var P=p.location;T=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var H=new wt(null);T&&za(H,T),m&&(H.g=m),P&&Vr(H,P),y&&(H.l=y),T=H}return y=u.D,m=u.ya,y&&m&&We(T,y,m),We(T,"VER",u.la),Ya(u,T),T}function Jc(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ge(new Ur({eb:y})):new Ge(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}i=eu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function qs(){}qs.prototype.g=function(u,m){return new un(u,m)};function un(u,m){Re.call(this),this.g=new Ls(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!oe(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Ai(this)}F(un,Re),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){ol(this.g)},un.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=on(u),u=y);m.i.push(new Bc(m.Ya++,u)),m.G==3&&Bs(m)},un.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,un.aa.N.call(this)};function tu(u){Yi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}F(tu,Yi);function nu(){Wo.call(this),this.status=1}F(nu,Wo);function Ai(u){this.g=u}F(Ai,eu),Ai.prototype.ua=function(){Ee(this.g,"a")},Ai.prototype.ta=function(u){Ee(this.g,new tu(u))},Ai.prototype.sa=function(u){Ee(this.g,new nu)},Ai.prototype.ra=function(){Ee(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,uE=function(){return new qs},cE=function(){return kr()},lE=gi,em={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,vh=jr,Wi.COMPLETE="complete",oE=Wi,Yo.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",Re.prototype.listen=Re.prototype.K,nc=Yo,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,sE=Ge}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",kb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Om("@firebase/firestore");function bo(){return xs.logLevel}function se(i,...e){if(xs.logLevel<=je.DEBUG){const n=e.map(eg);xs.debug(`Firestore (${qo}): ${i}`,...n)}}function Rr(i,...e){if(xs.logLevel<=je.ERROR){const n=e.map(eg);xs.error(`Firestore (${qo}): ${i}`,...n)}}function Ir(i,...e){if(xs.logLevel<=je.WARN){const n=e.map(eg);xs.warn(`Firestore (${qo}): ${i}`,...n)}}function eg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,hE(i,a,n)}function hE(i,e,n){let a=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Rr(a),new Error(a)}function Ke(i,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,i||hE(e,o,a)}function Ae(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rn.UNAUTHENTICATED))}shutdown(){}}class PC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VC{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let c=new va;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new va,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new va)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Ke(typeof a.accessToken=="string",31837,{l:a}),new dE(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class UC{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LC{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new UC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const a=c=>{c.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,se("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>a(c))};const o=c=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=BC(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function Ce(i,e){return i<e?-1:i>e?1:0}function tm(i,e){let n=0;for(;n<i.length&&n<e.length;){const a=i.codePointAt(n),o=e.codePointAt(n);if(a!==o){if(a<128&&o<128)return Ce(a,o);{const c=pE(),d=FC(c.encode(Mb(i,n)),c.encode(Mb(e,n)));return d!==0?d:Ce(a,o)}}n+=a>65535?2:1}return Ce(i.length,e.length)}function Mb(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function FC(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ce(i[n],e[n]);return Ce(i.length,e.length)}function No(i,e,n){return i.length===e.length&&i.every((a,o)=>n(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="__name__";class Ni{constructor(e,n,a){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&_e(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=Ni.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ce(e.length,n.length)}static compareSegments(e,n){const a=Ni.isNumericId(e),o=Ni.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Ni.extractNumericId(e).compare(Ni.extractNumericId(n)):tm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ga.fromString(e.substring(4,e.length-2))}}class ht extends Ni{construct(e,n,a){return new ht(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ue(Z.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(o=>o.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const qC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Ni{construct(e,n,a){return new Qt(e,n,a)}static isValidIdentifier(e){return qC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jb}static keyField(){return new Qt([jb])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new ue(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ue(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ue(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(a+=p,o++):(c(),o++)}if(c(),d)throw new ue(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ht.fromString(e))}static fromName(e){return new pe(ht.fromString(e).popFirst(5))}static empty(){return new pe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(i,e,n){if(!n)throw new ue(Z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function mE(i,e,n,a){if(e===!0&&a===!0)throw new ue(Z.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pb(i){if(!pe.isDocumentKey(i))throw new ue(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function gE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function tg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_e(12329,{type:typeof i})}function Mo(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tg(i);throw new ue(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(i,e){const n={typeString:i};return e&&(n.value=e),n}function Oc(i,e){if(!gE(i))throw new ue(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const d=i[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new ue(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=-62135596800,Ub=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Ub);return new rt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vb)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ub}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:It("string",rt._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new rt(0,0))}static max(){return new we(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;function GC(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,o=we.fromTimestamp(a===1e9?new rt(n+1,0):new rt(n,a));return new ba(o,pe.empty(),e)}function KC(i){return new ba(i.readTime,i.key,yc)}class ba{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ba(we.min(),pe.empty(),yc)}static max(){return new ba(we.max(),pe.empty(),yc)}}function QC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(i){if(i.code!==Z.FAILED_PRECONDITION||i.message!==YC)throw i;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(a,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,a)=>{n(e)})}static reject(e){return new $((n,a)=>{a(e)})}static waitFor(e){return new $((n,a)=>{let o=0,c=0,d=!1;e.forEach(p=>{++o,p.next(()=>{++c,d&&c===o&&n()},g=>a(g))}),d=!0,c===o&&n()})}static or(e){let n=$.resolve(!1);for(const a of e)n=n.next(o=>o?$.resolve(o):a());return n}static forEach(e,n){const a=[];return e.forEach((o,c)=>{a.push(n.call(this,o,c))}),this.waitFor(a)}static mapArray(e,n){return new $((a,o)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const _=g;n(e[_]).next(x=>{d[_]=x,++p,p===c&&a(d)},x=>o(x))}})}static doWhile(e,n){return new $((a,o)=>{const c=()=>{e()===!0?n().next(()=>{c()},o):a()};c()})}}function XC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this._e(a),this.ae=a=>n.writeSequenceNumber(a))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ad.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function sd(i){return i==null}function Mh(i){return i===0&&1/i==-1/0}function $C(i){return typeof i=="number"&&Number.isInteger(i)&&!Mh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="";function ZC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Lb(e)),e=JC(i.get(n),e);return Lb(e)}function JC(i,e){let n=e;const a=i.length;for(let o=0;o<a;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case vE:n+="";break;default:n+=c}}return n}function Lb(i){return i+vE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function As(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function yE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?a(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,a,o,c){this.key=e,this.value=n,this.color=a??en.RED,this.left=o??en.EMPTY,this.right=c??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,c){return new en(e??this.key,n??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,a),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,a,o,c){return this}insert(e,n,a){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bb(this.data.getIterator())}getIteratorFrom(e){return new Bb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class Bb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new li([])}unionWith(e){let n=new Ut(Qt.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new li(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,a)=>n.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new _E("Invalid base64 string: "+c):c}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const eD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(i){if(Ke(!!i,39018),typeof i=="string"){let e=0;const n=eD.exec(i);if(Ke(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:xt(i.seconds),nanos:xt(i.nanos)}}function xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ea(i){return typeof i=="string"?Yt.fromBase64String(i):Yt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="server_timestamp",xE="__type__",EE="__previous_value__",TE="__local_write_time__";function ig(i){var e,n;return((n=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xE])===null||n===void 0?void 0:n.stringValue)===bE}function od(i){const e=i.mapValue.fields[EE];return ig(e)?od(e):e}function _c(i){const e=xa(i.mapValue.fields[TE].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,a,o,c,d,p,g,_,x){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=x}}const jh="(default)";class jo{constructor(e,n){this.projectId=e,this.database=n||jh}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database===jh}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="__type__",nD="__max__",lh={mapValue:{}},AE="__vector__",Ph="value";function Ta(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:rD(i)?9007199254740991:iD(i)?10:11:_e(28295,{value:i})}function zi(i,e){if(i===e)return!0;const n=Ta(i);if(n!==Ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _c(i).isEqual(_c(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=xa(o.timestampValue),p=xa(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return Ea(o.bytesValue).isEqual(Ea(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return xt(o.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return xt(o.integerValue)===xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=xt(o.doubleValue),p=xt(c.doubleValue);return d===p?Mh(d)===Mh(p):isNaN(d)&&isNaN(p)}return!1}(i,e);case 9:return No(i.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},p=c.mapValue.fields||{};if(zb(d)!==zb(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!zi(d[g],p[g])))return!1;return!0}(i,e);default:return _e(52216,{left:i})}}function bc(i,e){return(i.values||[]).find(n=>zi(n,e))!==void 0}function Po(i,e){if(i===e)return 0;const n=Ta(i),a=Ta(e);if(n!==a)return Ce(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,d){const p=xt(c.integerValue||c.doubleValue),g=xt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(i,e);case 3:return Fb(i.timestampValue,e.timestampValue);case 4:return Fb(_c(i),_c(e));case 5:return tm(i.stringValue,e.stringValue);case 6:return function(c,d){const p=Ea(c),g=Ea(d);return p.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const p=c.split("/"),g=d.split("/");for(let _=0;_<p.length&&_<g.length;_++){const x=Ce(p[_],g[_]);if(x!==0)return x}return Ce(p.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const p=Ce(xt(c.latitude),xt(d.latitude));return p!==0?p:Ce(xt(c.longitude),xt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return qb(i.arrayValue,e.arrayValue);case 10:return function(c,d){var p,g,_,x;const S=c.fields||{},w=d.fields||{},U=(p=S[Ph])===null||p===void 0?void 0:p.arrayValue,F=(g=w[Ph])===null||g===void 0?void 0:g.arrayValue,G=Ce(((_=U?.values)===null||_===void 0?void 0:_.length)||0,((x=F?.values)===null||x===void 0?void 0:x.length)||0);return G!==0?G:qb(U,F)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===lh.mapValue&&d===lh.mapValue)return 0;if(c===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),_=d.fields||{},x=Object.keys(_);g.sort(),x.sort();for(let S=0;S<g.length&&S<x.length;++S){const w=tm(g[S],x[S]);if(w!==0)return w;const U=Po(p[g[S]],_[x[S]]);if(U!==0)return U}return Ce(g.length,x.length)}(i.mapValue,e.mapValue);default:throw _e(23264,{le:n})}}function Fb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=xa(i),a=xa(e),o=Ce(n.seconds,a.seconds);return o!==0?o:Ce(n.nanos,a.nanos)}function qb(i,e){const n=i.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const c=Po(n[o],a[o]);if(c)return c}return Ce(n.length,a.length)}function Vo(i){return nm(i)}function nm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const a=xa(n);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Ea(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return pe.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let a="[",o=!0;for(const c of n.values||[])o?o=!1:a+=",",a+=nm(c);return a+"]"}(i.arrayValue):"mapValue"in i?function(n){const a=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of a)c?c=!1:o+=",",o+=`${d}:${nm(n.fields[d])}`;return o+"}"}(i.mapValue):_e(61005,{value:i})}function yh(i){switch(Ta(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(i);return e?16+yh(e):16;case 5:return 2*i.stringValue.length;case 6:return Ea(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,c)=>o+yh(c),0)}(i.arrayValue);case 10:case 11:return function(a){let o=0;return As(a.fields,(c,d)=>{o+=c.length+yh(d)}),o}(i.mapValue);default:throw _e(13486,{value:i})}}function im(i){return!!i&&"integerValue"in i}function rg(i){return!!i&&"arrayValue"in i}function Hb(i){return!!i&&"nullValue"in i}function Gb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function _h(i){return!!i&&"mapValue"in i}function iD(i){var e,n;return((n=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[wE])===null||n===void 0?void 0:n.stringValue)===AE}function cc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return As(i.mapValue.fields,(n,a)=>e.mapValue.fields[n]=cc(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(i.arrayValue.values[n]);return e}return Object.assign({},i)}function rD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===nD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!_h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=Qt.emptyPath(),a={},o=[];e.forEach((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,o),a={},o=[],n=p.popLast()}d?a[p.lastSegment()]=cc(d):o.push(p.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,a,o)}delete(e){const n=this.field(e.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];_h(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){As(n,(o,c)=>e[o]=c);for(const o of a)delete e[o]}clone(){return new Qn(cc(this.value))}}function SE(i){const e=[];return As(i.fields,(n,a)=>{const o=new Qt([n]);if(_h(a)){const c=SE(a.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,a,o,c,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new an(e,0,we.min(),we.min(),we.min(),Qn.empty(),0)}static newFoundDocument(e,n,a,o){return new an(e,1,n,we.min(),a,o,0)}static newNoDocument(e,n){return new an(e,2,n,we.min(),we.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,we.min(),we.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function Kb(i,e,n){let a=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?a=pe.comparator(pe.fromName(d.referenceValue),n.key):a=Po(d,n.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function Qb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!zi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n="asc"){this.field=e,this.dir=n}}function aD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{}class Pt extends RE{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new oD(e,n,a):n==="array-contains"?new uD(e,a):n==="in"?new hD(e,a):n==="not-in"?new dD(e,a):n==="array-contains-any"?new fD(e,a):new Pt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new lD(e,a):new cD(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Po(n,this.value)):n!==null&&Ta(this.value)===Ta(n)&&this.matchesComparison(Po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends RE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Bi(e,n)}matches(e){return IE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function IE(i){return i.op==="and"}function CE(i){return sD(i)&&IE(i)}function sD(i){for(const e of i.filters)if(e instanceof Bi)return!1;return!0}function rm(i){if(i instanceof Pt)return i.field.canonicalString()+i.op.toString()+Vo(i.value);if(CE(i))return i.filters.map(e=>rm(e)).join(",");{const e=i.filters.map(n=>rm(n)).join(",");return`${i.op}(${e})`}}function DE(i,e){return i instanceof Pt?function(a,o){return o instanceof Pt&&a.op===o.op&&a.field.isEqual(o.field)&&zi(a.value,o.value)}(i,e):i instanceof Bi?function(a,o){return o instanceof Bi&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((c,d,p)=>c&&DE(d,o.filters[p]),!0):!1}(i,e):void _e(19439)}function OE(i){return i instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Vo(n.value)}`}(i):i instanceof Bi?function(n){return n.op.toString()+" {"+n.getFilters().map(OE).join(" ,")+"}"}(i):"Filter"}class oD extends Pt{constructor(e,n,a){super(e,n,a),this.key=pe.fromName(a.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class lD extends Pt{constructor(e,n){super(e,"in",n),this.keys=kE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cD extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=kE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kE(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(a=>pe.fromName(a.referenceValue))}class uD extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&bc(n.arrayValue,this.value)}}class hD extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bc(this.value.arrayValue,n)}}class dD extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bc(this.value.arrayValue,n)}}class fD extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>bc(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n=null,a=[],o=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=d,this.endAt=p,this.Pe=null}}function Yb(i,e=null,n=[],a=[],o=null,c=null,d=null){return new pD(i,e,n,a,o,c,d)}function ag(i){const e=Ae(i);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>rm(a)).join(","),n+="|ob:",n+=e.orderBy.map(a=>function(c){return c.field.canonicalString()+c.dir}(a)).join(","),sd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>Vo(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>Vo(a)).join(",")),e.Pe=n}return e.Pe}function sg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!aD(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!DE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Qb(i.startAt,e.startAt)&&Qb(i.endAt,e.endAt)}function am(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n=null,a=[],o=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mD(i,e,n,a,o,c,d,p){return new ld(i,e,n,a,o,c,d,p)}function og(i){return new ld(i)}function Wb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function gD(i){return i.collectionGroup!==null}function uc(i){const e=Ae(i);if(e.Te===null){e.Te=[];const n=new Set;for(const c of e.explicitOrderBy)e.Te.push(c),n.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ut(Qt.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Te.push(new Uh(c,a))}),n.has(Qt.keyField().canonicalString())||e.Te.push(new Uh(Qt.keyField(),a))}return e.Te}function Vi(i){const e=Ae(i);return e.Ie||(e.Ie=vD(e,uc(i))),e.Ie}function vD(i,e){if(i.limitType==="F")return Yb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Uh(o.field,c)});const n=i.endAt?new Vh(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new Vh(i.startAt.position,i.startAt.inclusive):null;return Yb(i.path,i.collectionGroup,e,i.filters,i.limit,n,a)}}function sm(i,e,n){return new ld(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function cd(i,e){return sg(Vi(i),Vi(e))&&i.limitType===e.limitType}function NE(i){return`${ag(Vi(i))}|lt:${i.limitType}`}function xo(i){return`Query(target=${function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map(o=>OE(o)).join(", ")}]`),sd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map(o=>Vo(o)).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map(o=>Vo(o)).join(",")),`Target(${a})`}(Vi(i))}; limitType=${i.limitType})`}function ud(i,e){return e.isFoundDocument()&&function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):pe.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)}(i,e)&&function(a,o){for(const c of uc(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(a,o){return!(a.startAt&&!function(d,p,g){const _=Kb(d,p,g);return d.inclusive?_<=0:_<0}(a.startAt,uc(a),o)||a.endAt&&!function(d,p,g){const _=Kb(d,p,g);return d.inclusive?_>=0:_>0}(a.endAt,uc(a),o))}(i,e)}function yD(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ME(i){return(e,n)=>{let a=!1;for(const o of uc(i)){const c=_D(o,e,n);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function _D(i,e,n){const a=i.field.isKeyField()?pe.comparator(e.key,n.key):function(c,d,p){const g=d.data.field(c),_=p.data.field(c);return g!==null&&_!==null?Po(g,_):_e(42886)}(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return _e(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,a)=>{for(const[o,c]of a)e(o,c)})}isEmpty(){return yE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=new dt(pe.comparator);function Cr(){return bD}const jE=new dt(pe.comparator);function ic(...i){let e=jE;for(const n of i)e=e.insert(n.key,n);return e}function PE(i){let e=jE;return i.forEach((n,a)=>e=e.insert(n,a.overlayedDocument)),e}function ps(){return hc()}function VE(){return hc()}function hc(){return new Ss(i=>i.toString(),(i,e)=>i.isEqual(e))}const xD=new dt(pe.comparator),ED=new Ut(pe.comparator);function Pe(...i){let e=ED;for(const n of i)e=e.add(n);return e}const TD=new Ut(Ce);function wD(){return TD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function UE(i){return{integerValue:""+i}}function AD(i,e){return $C(e)?UE(e):lg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function SD(i,e,n){return i instanceof Lh?function(o,c){const d={fields:{[xE]:{stringValue:bE},[TE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ig(c)&&(c=od(c)),c&&(d.fields[EE]=c),{mapValue:d}}(n,e):i instanceof xc?zE(i,e):i instanceof Ec?BE(i,e):function(o,c){const d=LE(o,c),p=Xb(d)+Xb(o.Ee);return im(d)&&im(o.Ee)?UE(p):lg(o.serializer,p)}(i,e)}function RD(i,e,n){return i instanceof xc?zE(i,e):i instanceof Ec?BE(i,e):n}function LE(i,e){return i instanceof zh?function(a){return im(a)||function(c){return!!c&&"doubleValue"in c}(a)}(e)?e:{integerValue:0}:null}class Lh extends hd{}class xc extends hd{constructor(e){super(),this.elements=e}}function zE(i,e){const n=FE(e);for(const a of i.elements)n.some(o=>zi(o,a))||n.push(a);return{arrayValue:{values:n}}}class Ec extends hd{constructor(e){super(),this.elements=e}}function BE(i,e){let n=FE(e);for(const a of i.elements)n=n.filter(o=>!zi(o,a));return{arrayValue:{values:n}}}class zh extends hd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Xb(i){return xt(i.integerValue||i.doubleValue)}function FE(i){return rg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ID(i,e){return i.field.isEqual(e.field)&&function(a,o){return a instanceof xc&&o instanceof xc||a instanceof Ec&&o instanceof Ec?No(a.elements,o.elements,zi):a instanceof zh&&o instanceof zh?zi(a.Ee,o.Ee):a instanceof Lh&&o instanceof Lh}(i.transform,e.transform)}class CD{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class dd{}function qE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new GE(i.key,Tr.none()):new kc(i.key,i.data,Tr.none());{const n=i.data,a=Qn.empty();let o=new Ut(Qt.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?a.delete(c):a.set(c,d),o=o.add(c)}return new Rs(i.key,a,new li(o.toArray()),Tr.none())}}function DD(i,e,n){i instanceof kc?function(o,c,d){const p=o.value.clone(),g=Zb(o.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(i,e,n):i instanceof Rs?function(o,c,d){if(!bh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Zb(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(HE(o)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,n):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function dc(i,e,n,a){return i instanceof kc?function(c,d,p,g){if(!bh(c.precondition,d))return p;const _=c.value.clone(),x=Jb(c.fieldTransforms,g,d);return _.setAll(x),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(i,e,n,a):i instanceof Rs?function(c,d,p,g){if(!bh(c.precondition,d))return p;const _=Jb(c.fieldTransforms,g,d),x=d.data;return x.setAll(HE(c)),x.setAll(_),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(S=>S.field))}(i,e,n,a):function(c,d,p){return bh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p}(i,e,n)}function OD(i,e){let n=null;for(const a of i.fieldTransforms){const o=e.data.field(a.field),c=LE(a.transform,o||null);c!=null&&(n===null&&(n=Qn.empty()),n.set(a.field,c))}return n||null}function $b(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&No(a,o,(c,d)=>ID(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class kc extends dd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends dd{constructor(e,n,a,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function HE(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}}),e}function Zb(i,e,n){const a=new Map;Ke(i.length===n.length,32656,{Ae:n.length,Re:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,p=e.data.field(c.field);a.set(c.field,RD(d,p,n[o]))}return a}function Jb(i,e,n){const a=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);a.set(o.field,SD(c,d,e))}return a}class GE extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kD extends dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&DD(c,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=dc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=dc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=VE();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(o.key)?null:p;const g=qE(d,p);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(we.min())}),a}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,a)=>$b(n,a))&&No(this.baseMutations,e.baseMutations,(n,a)=>$b(n,a))}}class cg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Ke(e.mutations.length===a.length,58842,{Ve:e.mutations.length,me:a.length});let o=function(){return xD}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,a[d].version);return new cg(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,ze;function PD(i){switch(i){case Z.OK:return _e(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return _e(15467,{code:i})}}function KE(i){if(i===void 0)return Rr("GRPC error has no .code"),Z.UNKNOWN;switch(i){case Rt.OK:return Z.OK;case Rt.CANCELLED:return Z.CANCELLED;case Rt.UNKNOWN:return Z.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return Z.INTERNAL;case Rt.UNAVAILABLE:return Z.UNAVAILABLE;case Rt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Rt.NOT_FOUND:return Z.NOT_FOUND;case Rt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Rt.ABORTED:return Z.ABORTED;case Rt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Rt.DATA_LOSS:return Z.DATA_LOSS;default:return _e(39323,{code:i})}}(ze=Rt||(Rt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new ga([4294967295,4294967295],0);function ex(i){const e=pE().encode(i),n=new aE;return n.update(e),new Uint8Array(n.digest())}function tx(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ga([n,a],0),new ga([o,c],0)]}class ug{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new rc(`Invalid padding: ${n}`);if(a<0)throw new rc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new rc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new rc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ga.fromNumber(this.fe)}pe(e,n,a){let o=e.add(n.multiply(ga.fromNumber(a)));return o.compare(VD)===1&&(o=new ga([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=ex(e),[a,o]=tx(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(a,o,c);if(!this.ye(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new ug(c,o,n);return a.forEach(p=>d.insert(p)),d}insert(e){if(this.fe===0)return;const n=ex(e),[a,o]=tx(n);for(let c=0;c<this.hashCount;c++){const d=this.pe(a,o,c);this.we(d)}}we(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n,a,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new fd(we.min(),o,new dt(Ce),Cr(),Pe())}}class Nc{constructor(e,n,a,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Nc(a,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.be=o}}class QE{constructor(e,n){this.targetId=e,this.De=n}}class YE{constructor(e,n,a=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class nx{constructor(){this.ve=0,this.Ce=ix(),this.Fe=Yt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),n=Pe(),a=Pe();return this.Ce.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:_e(38017,{changeType:c})}}),new Nc(this.Fe,this.Me,e,n,a)}ke(){this.xe=!1,this.Ce=ix()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class UD{constructor(e){this.We=e,this.Ge=new Map,this.ze=Cr(),this.je=ch(),this.Je=ch(),this.He=new dt(Ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const a=this.tt(n);switch(e.state){case 0:this.nt(n)&&a.Be(e.resumeToken);break;case 1:a.Ue(),a.Oe||a.ke(),a.Be(e.resumeToken);break;case 2:a.Ue(),a.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(a.Ke(),a.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),a.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((a,o)=>{this.nt(o)&&n(o)})}it(e){const n=e.targetId,a=e.De.count,o=this.st(n);if(o){const c=o.target;if(am(c))if(a===0){const d=new pe(c.path);this.Xe(n,d,an.newNoDocument(d,we.min()))}else Ke(a===1,20013,{expectedCount:a});else{const d=this.ot(n);if(d!==a){const p=this._t(e),g=p?this.ut(p,e,d):1;if(g!==0){this.rt(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,_)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=n;let d,p;try{d=Ea(a).toUint8Array()}catch(g){if(g instanceof _E)return Ir("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ug(d,o,c)}catch(g){return Ir(g instanceof rc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.fe===0?null:p}ut(e,n,a){return n.De.count===a-this.ht(e,n.targetId)?0:2}ht(e,n){const a=this.We.getRemoteKeysForTarget(n);let o=0;return a.forEach(c=>{const d=this.We.lt(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.Xe(n,c,null),o++)}),o}Pt(e){const n=new Map;this.Ge.forEach((c,d)=>{const p=this.st(d);if(p){if(c.current&&am(p.target)){const g=new pe(p.target.path);this.Tt(g).has(d)||this.It(d,g)||this.Xe(d,g,an.newNoDocument(g,e))}c.Ne&&(n.set(d,c.Le()),c.ke())}});let a=Pe();this.Je.forEach((c,d)=>{let p=!0;d.forEachWhile(g=>{const _=this.st(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(a=a.add(c))}),this.ze.forEach((c,d)=>d.setReadTime(e));const o=new fd(e,n,this.He,this.ze,a);return this.ze=Cr(),this.je=ch(),this.Je=ch(),this.He=new dt(Ce),o}Ze(e,n){if(!this.nt(e))return;const a=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,a),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,a){if(!this.nt(e))return;const o=this.tt(e);this.It(e,n)?o.qe(n,1):o.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),a&&(this.ze=this.ze.insert(n,a))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new nx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ut(Ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ut(Ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nx),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ch(){return new dt(pe.comparator)}function ix(){return new dt(pe.comparator)}const LD={asc:"ASCENDING",desc:"DESCENDING"},zD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BD={and:"AND",or:"OR"};class FD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function om(i,e){return i.useProto3Json||sd(e)?e:{value:e}}function Bh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function qD(i,e){return Bh(i,e.toTimestamp())}function Ui(i){return Ke(!!i,49232),we.fromTimestamp(function(n){const a=xa(n);return new rt(a.seconds,a.nanos)}(i))}function hg(i,e){return lm(i,e).canonicalString()}function lm(i,e){const n=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function XE(i){const e=ht.fromString(i);return Ke(tT(e),10190,{key:e.toString()}),e}function cm(i,e){return hg(i.databaseId,e.path)}function jp(i,e){const n=XE(e);if(n.get(1)!==i.databaseId.projectId)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ue(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new pe(ZE(n))}function $E(i,e){return hg(i.databaseId,e)}function HD(i){const e=XE(i);return e.length===4?ht.emptyPath():ZE(e)}function um(i){return new ht(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ZE(i){return Ke(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function rx(i,e,n){return{name:cm(i,e),fields:n.value.mapValue.fields}}function GD(i,e){let n;if("targetChange"in e){e.targetChange;const a=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:_e(39313,{state:_})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(_,x){return _.useProto3Json?(Ke(x===void 0||typeof x=="string",58123),Yt.fromBase64String(x||"")):(Ke(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Yt.fromUint8Array(x||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(_){const x=_.code===void 0?Z.UNKNOWN:KE(_.code);return new ue(x,_.message||"")}(d);n=new YE(a,o,c,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=jp(i,a.document.name),c=Ui(a.document.updateTime),d=a.document.createTime?Ui(a.document.createTime):we.min(),p=new Qn({mapValue:{fields:a.document.fields}}),g=an.newFoundDocument(o,c,d,p),_=a.targetIds||[],x=a.removedTargetIds||[];n=new xh(_,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=jp(i,a.document),c=a.readTime?Ui(a.readTime):we.min(),d=an.newNoDocument(o,c),p=a.removedTargetIds||[];n=new xh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=jp(i,a.document),c=a.removedTargetIds||[];n=new xh([],c,o,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,d=new jD(o,c),p=a.targetId;n=new QE(p,d)}}return n}function KD(i,e){let n;if(e instanceof kc)n={update:rx(i,e.key,e.value)};else if(e instanceof GE)n={delete:cm(i,e.key)};else if(e instanceof Rs)n={update:rx(i,e.key,e.data),updateMask:tO(e.fieldMask)};else{if(!(e instanceof kD))return _e(16599,{Rt:e.type});n={verify:cm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(c,d){const p=d.transform;if(p instanceof Lh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof xc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ec)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof zh)return{fieldPath:d.field.canonicalString(),increment:p.Ee};throw _e(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(n.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:qD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)}(i,e.precondition)),n}function QD(i,e){return i&&i.length>0?(Ke(e!==void 0,14353),i.map(n=>function(o,c){let d=o.updateTime?Ui(o.updateTime):Ui(c);return d.isEqual(we.min())&&(d=Ui(c)),new CD(d,o.transformResults||[])}(n,e))):[]}function YD(i,e){return{documents:[$E(i,e.path)]}}function WD(i,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=$E(i,o);const c=function(_){if(_.length!==0)return eT(Bi.create(_,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(_){if(_.length!==0)return _.map(x=>function(w){return{field:Eo(w.field),direction:ZD(w.dir)}}(x))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=om(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{Vt:n,parent:o}}function XD(i){let e=HD(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Ke(a===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=function(S){const w=JE(S);return w instanceof Bi&&CE(w)?w.getFilters():[w]}(n.where));let d=[];n.orderBy&&(d=function(S){return S.map(w=>function(F){return new Uh(To(F.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(w))}(n.orderBy));let p=null;n.limit&&(p=function(S){let w;return w=typeof S=="object"?S.value:S,sd(w)?null:w}(n.limit));let g=null;n.startAt&&(g=function(S){const w=!!S.before,U=S.values||[];return new Vh(U,w)}(n.startAt));let _=null;return n.endAt&&(_=function(S){const w=!S.before,U=S.values||[];return new Vh(U,w)}(n.endAt)),mD(e,o,d,c,p,"F",g,_)}function $D(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JE(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=To(n.unaryFilter.field);return Pt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=To(n.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=To(n.unaryFilter.field);return Pt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=To(n.unaryFilter.field);return Pt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(i):i.fieldFilter!==void 0?function(n){return Pt.create(To(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Bi.create(n.compositeFilter.filters.map(a=>JE(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(i):_e(30097,{filter:i})}function ZD(i){return LD[i]}function JD(i){return zD[i]}function eO(i){return BD[i]}function Eo(i){return{fieldPath:i.canonicalString()}}function To(i){return Qt.fromServerFormat(i.fieldPath)}function eT(i){return i instanceof Pt?function(n){if(n.op==="=="){if(Gb(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NAN"}};if(Hb(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gb(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NAN"}};if(Hb(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(n.field),op:JD(n.op),value:n.value}}}(i):i instanceof Bi?function(n){const a=n.getFilters().map(o=>eT(o));return a.length===1?a[0]:{compositeFilter:{op:eO(n.op),filters:a}}}(i):_e(54877,{filter:i})}function tO(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,a,o,c=we.min(),d=we.min(),p=Yt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.gt=e}}function iO(i){const e=XD({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?sm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Dn=new aO}addToCollectionParentIndex(e,n){return this.Dn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(ba.min())}updateCollectionGroup(e,n,a){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class aO{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Ut(ht.comparator),c=!o.has(a);return this.index[n]=o.add(a),c}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Ut(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nT=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(nT,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Uo(0)}static ur(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="LruGarbageCollector",sO=1048576;function ox([i,e],[n,a]){const o=Ce(i,n);return o===0?Ce(e,a):o}class oO{constructor(e){this.Tr=e,this.buffer=new Ut(ox),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();ox(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lO{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){se(sx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Go(n)?se(sx,"Ignoring IndexedDB error during garbage collection: ",n):await Ho(n)}await this.Rr(3e5)})}}class cO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(a=>Math.floor(n/100*a))}nthSequenceNumber(e,n){if(n===0)return $.resolve(ad.ue);const a=new oO(n);return this.Vr.forEachTarget(e,o=>a.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>a.Er(o))).next(()=>a.maxValue)}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(ax)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ax):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let a,o,c,d,p,g,_;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(a=S,p=Date.now(),this.removeTargets(e,a,n))).next(S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,a))).next(S=>(_=Date.now(),bo()<=je.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(_-g)+`ms
Total Duration: ${_-x}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S})))}}function uO(i,e){return new cO(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?$.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(a!==null&&dc(a.mutation,o,li.empty(),rt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.getLocalViewOfDocuments(e,a,Pe()).next(()=>a))}getLocalViewOfDocuments(e,n,a=Pe()){const o=ps();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,a).next(c=>{let d=ic();return c.forEach((p,g)=>{d=d.insert(p,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const a=ps();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,Pe()))}populateOverlays(e,n,a){const o=[];return a.forEach(c=>{n.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,p)=>{n.set(d,p)})})}computeViews(e,n,a,o){let c=Cr();const d=hc(),p=function(){return hc()}();return n.forEach((g,_)=>{const x=a.get(_.key);o.has(_.key)&&(x===void 0||x.mutation instanceof Rs)?c=c.insert(_.key,_):x!==void 0?(d.set(_.key,x.mutation.getFieldMask()),dc(x.mutation,_,x.mutation.getFieldMask(),rt.now())):d.set(_.key,li.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((_,x)=>d.set(_,x)),n.forEach((_,x)=>{var S;return p.set(_,new dO(x,(S=d.get(_))!==null&&S!==void 0?S:null))}),p))}recalculateAndSaveOverlays(e,n){const a=hc();let o=new dt((d,p)=>d-p),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const p of d)p.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let x=a.get(g)||li.empty();x=p.applyToLocalView(_,x),a.set(g,x);const S=(o.get(p.batchId)||Pe()).add(g);o=o.insert(p.batchId,S)})}).next(()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),_=g.key,x=g.value,S=VE();x.forEach(w=>{if(!c.has(w)){const U=qE(n.get(w),a.get(w));U!==null&&S.set(w,U),c=c.add(w)}}),d.push(this.documentOverlayCache.saveOverlays(e,_,S))}return $.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,n,a,o){return function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-c.size):$.resolve(ps());let p=yc,g=c;return d.next(_=>$.forEach(_,(x,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(x)?$.resolve():this.remoteDocumentCache.getEntry(e,x).next(w=>{g=g.insert(x,w)}))).next(()=>this.populateOverlays(e,_,c)).next(()=>this.computeViews(e,g,_,Pe())).next(x=>({batchId:p,changes:PE(x)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(a=>{let o=ic();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const c=n.collectionGroup;let d=ic();return this.indexManager.getCollectionParents(e,c).next(p=>$.forEach(p,g=>{const _=function(S,w){return new ld(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next(x=>{x.forEach((S,w)=>{d=d.insert(S,w)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,c,o))).next(d=>{c.forEach((g,_)=>{const x=_.getKey();d.get(x)===null&&(d=d.insert(x,an.newInvalidDocument(x)))});let p=ic();return d.forEach((g,_)=>{const x=c.get(g);x!==void 0&&dc(x.mutation,_,li.empty(),rt.now()),ud(n,_)&&(p=p.insert(g,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ui(o.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(o){return{name:o.name,query:iO(o.bundledQuery),readTime:Ui(o.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.overlays=new dt(pe.comparator),this.kr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const a=ps();return $.forEach(n,o=>this.getOverlay(e,o).next(c=>{c!==null&&a.set(o,c)})).next(()=>a)}saveOverlays(e,n,a){return a.forEach((o,c)=>{this.wt(e,n,c)}),$.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.kr.get(a);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.kr.delete(a)),$.resolve()}getOverlaysForCollection(e,n,a){const o=ps(),c=n.length+1,d=new pe(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===c&&g.largestBatchId>a&&o.set(g.getKey(),g)}return $.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let c=new dt((_,x)=>_-x);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>a){let x=c.get(_.largestBatchId);x===null&&(x=ps(),c=c.insert(_.largestBatchId,x)),x.set(_.getKey(),_)}}const p=ps(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,x)=>p.set(_,x)),!(p.size()>=o)););return $.resolve(p)}wt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.kr.get(o.largestBatchId).delete(a.key);this.kr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new MD(n,a));let c=this.kr.get(n);c===void 0&&(c=Pe(),this.kr.set(n,c)),this.kr.set(n,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.qr=new Ut(Kt.Qr),this.$r=new Ut(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const a=new Kt(e,n);this.qr=this.qr.add(a),this.$r=this.$r.add(a)}Kr(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.Wr(new Kt(e,n))}Gr(e,n){e.forEach(a=>this.removeReference(a,n))}zr(e){const n=new pe(new ht([])),a=new Kt(n,e),o=new Kt(n,e+1),c=[];return this.$r.forEachInRange([a,o],d=>{this.Wr(d),c.push(d.key)}),c}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new pe(new ht([])),a=new Kt(n,e),o=new Kt(n,e+1);let c=Pe();return this.$r.forEachInRange([a,o],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new Kt(e,0),a=this.qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Kt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return pe.comparator(e.key,n.key)||Ce(e.Hr,n.Hr)}static Ur(e,n){return Ce(e.Hr,n.Hr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Kt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const c=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new ND(c,n,a,o);this.mutationQueue.push(d);for(const p of o)this.Yr=this.Yr.add(new Kt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),c=o<0?0:o;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ng:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),c=[];return this.Yr.forEachInRange([a,o],d=>{const p=this.Zr(d.Hr);c.push(p)}),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Ut(Ce);return n.forEach(o=>{const c=new Kt(o,0),d=new Kt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([c,d],p=>{a=a.add(p.Hr)})}),$.resolve(this.ei(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let c=a;pe.isDocumentKey(c)||(c=c.child(""));const d=new Kt(new pe(c),0);let p=new Ut(Ce);return this.Yr.forEachWhile(g=>{const _=g.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(p=p.add(g.Hr)),!0)},d),$.resolve(this.ei(p))}ei(e){const n=[];return e.forEach(a=>{const o=this.Zr(a);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ke(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Yr;return $.forEach(n.mutations,o=>{const c=new Kt(o.key,n.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=a})}rr(e){}containsKey(e,n){const a=new Kt(n,0),o=this.Yr.firstAfterOrEqual(a);return $.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.ni=e,this.docs=function(){return new dt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),c=o?o.size:0,d=this.ni(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return $.resolve(a?a.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let a=Cr();return n.forEach(o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():an.newInvalidDocument(o))}),$.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let c=Cr();const d=n.path,p=new pe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:_,value:{document:x}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||QC(KC(x),a)<=0||(o.has(x.key)||ud(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,a,o){_e(9500)}ri(e,n){return $.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new _O(this)}getSize(e){return $.resolve(this.size)}}class _O extends hO{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?n.push(this.Or.addEntry(e,o)):this.Or.removeEntry(a)}),$.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.persistence=e,this.ii=new Ss(n=>ag(n),sg),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.si=0,this.oi=new dg,this.targetCount=0,this._i=Uo.ar()}forEachTarget(e,n){return this.ii.forEach((a,o)=>n(o)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.si&&(this.si=n),$.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Uo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.hr(n),$.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,a){let o=0;const c=[];return this.ii.forEach((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ii.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),$.waitFor(c).next(()=>o)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const a=this.ii.get(n)||null;return $.resolve(a)}addMatchingKeys(e,n,a){return this.oi.Kr(n,a),$.resolve()}removeMatchingKeys(e,n,a){this.oi.Gr(n,a);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const a=this.oi.Jr(n);return $.resolve(a)}containsKey(e,n){return $.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.ai={},this.overlays={},this.ui=new ad(0),this.ci=!1,this.ci=!0,this.li=new gO,this.referenceDelegate=e(this),this.hi=new bO(this),this.indexManager=new rO,this.remoteDocumentCache=function(o){return new yO(o)}(a=>this.referenceDelegate.Pi(a)),this.serializer=new nO(n),this.Ti=new pO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ai[e.toKey()];return a||(a=new vO(n,this.referenceDelegate),this.ai[e.toKey()]=a),a}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,a){se("MemoryPersistence","Starting transaction:",e);const o=new xO(this.ui.next());return this.referenceDelegate.Ii(),a(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ei(e,n){return $.or(Object.values(this.ai).map(a=>()=>a.containsKey(e,n)))}}class xO extends WC{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ai=new dg,this.Ri=null}static Vi(e){return new fg(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,n,a){return this.Ai.addReference(a,n),this.mi.delete(a.toString()),$.resolve()}removeReference(e,n,a){return this.Ai.removeReference(a,n),this.mi.add(a.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(o=>this.mi.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(c=>this.mi.add(c.toString()))}).next(()=>a.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,a=>{const o=pe.fromPath(a);return this.fi(e,o).next(c=>{c||n.removeEntry(o,we.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(a=>{a?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Fh{constructor(e,n){this.persistence=e,this.gi=new Ss(a=>ZC(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=uO(this,n)}static Vi(e,n){return new Fh(e,n)}Ii(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>n.next(o=>a+o))}yr(e){let n=0;return this.gr(e,a=>{n++}).next(()=>n)}gr(e,n){return $.forEach(this.gi,(a,o)=>this.Sr(e,a,o).next(c=>c?$.resolve():n(o)))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ri(e,d=>this.Sr(e,d,n).next(p=>{p||(a++,c.removeEntry(d,we.min()))})).next(()=>c.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.gi.set(a,e.currentSequenceNumber),$.resolve()}removeReference(e,n,a){return this.gi.set(a,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yh(e.data.value)),n}Sr(e,n,a){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.gi.get(n);return $.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Is=a,this.ds=o}static Es(e,n){let a=Pe(),o=Pe();for(const c of n.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new pg(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return MS()?8:XC(sn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,a,o){const c={result:null};return this.ps(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ys(e,n,o,a).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new EO;return this.ws(e,n,d).next(p=>{if(c.result=p,this.Rs)return this.Ss(e,n,d,p.size)})}).next(()=>c.result)}Ss(e,n,a,o){return a.documentReadCount<this.Vs?(bo()<=je.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(bo()<=je.DEBUG&&se("QueryEngine","Query:",xo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.fs*o?(bo()<=je.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):$.resolve())}ps(e,n){if(Wb(n))return $.resolve(null);let a=Vi(n);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=sm(n,null,"F"),a=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next(c=>{const d=Pe(...c);return this.gs.getDocuments(e,d).next(p=>this.indexManager.getMinOffset(e,a).next(g=>{const _=this.bs(n,p);return this.Ds(n,_,d,g.readTime)?this.ps(e,sm(n,null,"F")):this.vs(e,_,n,g)}))})))}ys(e,n,a,o){return Wb(n)||o.isEqual(we.min())?$.resolve(null):this.gs.getDocuments(e,a).next(c=>{const d=this.bs(n,c);return this.Ds(n,d,a,o)?$.resolve(null):(bo()<=je.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(n)),this.vs(e,d,n,GC(o,yc)).next(p=>p))})}bs(e,n){let a=new Ut(ME(e));return n.forEach((o,c)=>{ud(e,c)&&(a=a.add(c))}),a}Ds(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ws(e,n,a){return bo()<=je.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",xo(n)),this.gs.getDocumentsMatchingQuery(e,n,ba.min(),a)}vs(e,n,a,o){return this.gs.getDocumentsMatchingQuery(e,a,o).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",wO=3e8;class AO{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.Fs=new dt(Ce),this.Ms=new Ss(c=>ag(c),sg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(a)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function SO(i,e,n,a){return new AO(i,e,n,a)}async function rT(i,e){const n=Ae(i);return await n.persistence.runTransaction("Handle user change","readonly",a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next(c=>(o=c,n.Ns(e),n.mutationQueue.getAllMutationBatches(a))).next(c=>{const d=[],p=[];let g=Pe();for(const _ of o){d.push(_.batchId);for(const x of _.mutations)g=g.add(x.key)}for(const _ of c){p.push(_.batchId);for(const x of _.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(a,g).next(_=>({Bs:_,removedBatchIds:d,addedBatchIds:p}))})})}function RO(i,e){const n=Ae(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),c=n.Os.newChangeBuffer({trackRemovals:!0});return function(p,g,_,x){const S=_.batch,w=S.keys();let U=$.resolve();return w.forEach(F=>{U=U.next(()=>x.getEntry(g,F)).next(G=>{const q=_.docVersions.get(F);Ke(q!==null,48541),G.version.compareTo(q)<0&&(S.applyToRemoteDocument(G,_),G.isValidDocument()&&(G.setReadTime(_.commitVersion),x.addEntry(G)))})}),U.next(()=>p.mutationQueue.removeMutationBatch(g,S))}(n,a,e,c).next(()=>c.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(p){let g=Pe();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(g=g.add(p.batch.mutations[_].key));return g}(e))).next(()=>n.localDocuments.getDocuments(a,o))})}function aT(i){const e=Ae(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function IO(i,e){const n=Ae(i),a=e.snapshotVersion;let o=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.Os.newChangeBuffer({trackRemovals:!0});o=n.Fs;const p=[];e.targetChanges.forEach((x,S)=>{const w=o.get(S);if(!w)return;p.push(n.hi.removeMatchingKeys(c,x.removedDocuments,S).next(()=>n.hi.addMatchingKeys(c,x.addedDocuments,S)));let U=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?U=U.withResumeToken(Yt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):x.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(x.resumeToken,a)),o=o.insert(S,U),function(G,q,ie){return G.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=wO?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0}(w,U,x)&&p.push(n.hi.updateTargetData(c,U))});let g=Cr(),_=Pe();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))}),p.push(CO(c,d,e.documentUpdates).next(x=>{g=x.Ls,_=x.ks})),!a.isEqual(we.min())){const x=n.hi.getLastRemoteSnapshotVersion(c).next(S=>n.hi.setTargetsMetadata(c,c.currentSequenceNumber,a));p.push(x)}return $.waitFor(p).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,g,_)).next(()=>g)}).then(c=>(n.Fs=o,c))}function CO(i,e,n){let a=Pe(),o=Pe();return n.forEach(c=>a=a.add(c)),e.getEntries(i,a).next(c=>{let d=Cr();return n.forEach((p,g)=>{const _=c.get(p);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):se(mg,"Ignoring outdated watch update for ",p,". Current version:",_.version," Watch version:",g.version)}),{Ls:d,ks:o}})}function DO(i,e){const n=Ae(i);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=ng),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function OO(i,e){const n=Ae(i);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return n.hi.getTargetData(a,e).next(c=>c?(o=c,$.resolve(o)):n.hi.allocateTargetId(a).next(d=>(o=new fa(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.hi.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=n.Fs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(a.targetId,a),n.Ms.set(e,a.targetId)),a})}async function hm(i,e,n){const a=Ae(i),o=a.Fs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",c,d=>a.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Go(d))throw d;se(mg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Fs=a.Fs.remove(e),a.Ms.delete(o.target)}function lx(i,e,n){const a=Ae(i);let o=we.min(),c=Pe();return a.persistence.runTransaction("Execute query","readwrite",d=>function(g,_,x){const S=Ae(g),w=S.Ms.get(x);return w!==void 0?$.resolve(S.Fs.get(w)):S.hi.getTargetData(_,x)}(a,d,Vi(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.hi.getMatchingKeysForTargetId(d,p.targetId).next(g=>{c=g})}).next(()=>a.Cs.getDocumentsMatchingQuery(d,e,n?o:we.min(),n?c:Pe())).next(p=>(kO(a,yD(e),p),{documents:p,qs:c})))}function kO(i,e,n){let a=i.xs.get(e)||we.min();n.forEach((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)}),i.xs.set(e,a)}class cx{constructor(){this.activeTargetIds=wD()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NO{constructor(){this.Fo=new cx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,a){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new cx,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="ConnectivityMonitor";class hx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){se(ux,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){se(ux,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uh=null;function dm(){return uh===null?uh=function(){return 268435456+Math.round(2147483648*Math.random())}():uh++,"0x"+uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="RestConnection",jO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PO{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.Ko=this.databaseId.database===jh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,c){const d=dm(),p=this.Go(e,n.toUriEncodedString());se(Pp,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(g,o,c);const{host:_}=new URL(p),x=Ia(_);return this.jo(e,p,g,a,x).then(S=>(se(Pp,`Received RPC '${e}' ${d}: `,S),S),S=>{throw Ir(Pp,`RPC '${e}' ${d} failed with error: `,S,"url: ",p,"request:",a),S})}Jo(e,n,a,o,c,d){return this.Wo(e,n,a,o,c)}zo(e,n,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,c)=>e[c]=o),a&&a.headers.forEach((o,c)=>e[c]=o)}Go(e,n){const a=jO[e];return`${this.$o}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class UO extends PO{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,a,o,c){const d=dm();return new Promise((p,g)=>{const _=new sE;_.setWithCredentials(!0),_.listenOnce(oE.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case vh.NO_ERROR:const S=_.getResponseJson();se(nn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),p(S);break;case vh.TIMEOUT:se(nn,`RPC '${e}' ${d} timed out`),g(new ue(Z.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const w=_.getStatus();if(se(nn,`RPC '${e}' ${d} failed with status:`,w,"response text:",_.getResponseText()),w>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const F=U?.error;if(F&&F.status&&F.message){const G=function(ie){const oe=ie.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(oe)>=0?oe:Z.UNKNOWN}(F.status);g(new ue(G,F.message))}else g(new ue(Z.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ue(Z.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:d,l_:_.getLastErrorCode(),h_:_.getLastError()})}}finally{se(nn,`RPC '${e}' ${d} completed.`)}});const x=JSON.stringify(o);se(nn,`RPC '${e}' ${d} sending request:`,o),_.send(n,"POST",x,a,15)})}P_(e,n,a){const o=dm(),c=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=uE(),p=cE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.zo(g.initMessageHeaders,n,a),g.encodeInitMessageHeaders=!0;const x=c.join("");se(nn,`Creating RPC '${e}' stream ${o}: ${x}`,g);const S=d.createWebChannel(x,g);this.T_(S);let w=!1,U=!1;const F=new VO({Ho:q=>{U?se(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(w||(se(nn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),w=!0),se(nn,`RPC '${e}' stream ${o} sending:`,q),S.send(q))},Yo:()=>S.close()}),G=(q,ie,oe)=>{q.listen(ie,ae=>{try{oe(ae)}catch(ee){setTimeout(()=>{throw ee},0)}})};return G(S,nc.EventType.OPEN,()=>{U||(se(nn,`RPC '${e}' stream ${o} transport opened.`),F.s_())}),G(S,nc.EventType.CLOSE,()=>{U||(U=!0,se(nn,`RPC '${e}' stream ${o} transport closed`),F.__(),this.I_(S))}),G(S,nc.EventType.ERROR,q=>{U||(U=!0,Ir(nn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),F.__(new ue(Z.UNAVAILABLE,"The operation could not be completed")))}),G(S,nc.EventType.MESSAGE,q=>{var ie;if(!U){const oe=q.data[0];Ke(!!oe,16349);const ae=oe,ee=ae?.error||((ie=ae[0])===null||ie===void 0?void 0:ie.error);if(ee){se(nn,`RPC '${e}' stream ${o} received error:`,ee);const ge=ee.status;let be=function(C){const k=Rt[C];if(k!==void 0)return KE(k)}(ge),D=ee.message;be===void 0&&(be=Z.INTERNAL,D="Unknown error status: "+ge+" with message "+ee.message),U=!0,F.__(new ue(be,D)),S.close()}else se(nn,`RPC '${e}' stream ${o} received:`,oe),F.a_(oe)}}),G(p,lE.STAT_EVENT,q=>{q.stat===em.PROXY?se(nn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===em.NOPROXY&&se(nn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.o_()},0),F}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(i){return new FD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=n,this.d_=a,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),a=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-a);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="PersistentStream";class oT{constructor(e,n,a,o,c,d,p,g){this.Fi=e,this.w_=a,this.S_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sT(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.b_===n&&this.W_(a,o)},a=>{e(()=>{const o=new ue(Z.UNKNOWN,"Fetching auth token failed: "+a.message);return this.G_(o)})})}W_(e,n){const a=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{a(()=>this.listener.Zo())}),this.stream.e_(()=>{a(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{a(()=>this.G_(o))}),this.stream.onMessage(o=>{a(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return se(dx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(se(dx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LO extends oT{constructor(e,n,a,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=GD(this.serializer,e),a=function(c){if(!("targetChange"in c))return we.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?Ui(d.readTime):we.min()}(e);return this.listener.J_(n,a)}H_(e){const n={};n.database=um(this.serializer),n.addTarget=function(c,d){let p;const g=d.target;if(p=am(g)?{documents:YD(c,g)}:{query:WD(c,g).Vt},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=WE(c,d.resumeToken);const _=om(c,d.expectedCount);_!==null&&(p.expectedCount=_)}else if(d.snapshotVersion.compareTo(we.min())>0){p.readTime=Bh(c,d.snapshotVersion.toTimestamp());const _=om(c,d.expectedCount);_!==null&&(p.expectedCount=_)}return p}(this.serializer,e);const a=$D(this.serializer,e);a&&(n.labels=a),this.k_(n)}Y_(e){const n={};n.database=um(this.serializer),n.removeTarget=e,this.k_(n)}}class zO extends oT{constructor(e,n,a,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=QD(e.writeResults,e.commitTime),a=Ui(e.commitTime);return this.listener.ta(a,n)}na(){const e={};e.database=um(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>KD(this.serializer,a))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{}class FO extends BO{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,lm(n,a),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(Z.UNKNOWN,c.toString())})}Jo(e,n,a,o,c){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,p])=>this.connection.Jo(e,lm(n,a),o,d,p,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(Z.UNKNOWN,d.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class qO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Rr(n),this._a=!1):se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="RemoteStore";class HO{constructor(e,n,a,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=c,this.Ea.xo(d=>{a.enqueueAndForget(async()=>{Is(this)&&(se(Es,"Restarting streams for network reachability change."),await async function(g){const _=Ae(g);_.Ia.add(4),await Mc(_),_.Aa.set("Unknown"),_.Ia.delete(4),await md(_)}(this))})}),this.Aa=new qO(a,o)}}async function md(i){if(Is(i))for(const e of i.da)await e(!0)}async function Mc(i){for(const e of i.da)await e(!1)}function lT(i,e){const n=Ae(i);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),_g(n)?yg(n):Ko(n).x_()&&vg(n,e))}function gg(i,e){const n=Ae(i),a=Ko(n);n.Ta.delete(e),a.x_()&&cT(n,e),n.Ta.size===0&&(a.x_()?a.B_():Is(n)&&n.Aa.set("Unknown"))}function vg(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ko(i).H_(e)}function cT(i,e){i.Ra.$e(e),Ko(i).Y_(e)}function yg(i){i.Ra=new UD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Ko(i).start(),i.Aa.aa()}function _g(i){return Is(i)&&!Ko(i).M_()&&i.Ta.size>0}function Is(i){return Ae(i).Ia.size===0}function uT(i){i.Ra=void 0}async function GO(i){i.Aa.set("Online")}async function KO(i){i.Ta.forEach((e,n)=>{vg(i,e)})}async function QO(i,e){uT(i),_g(i)?(i.Aa.la(e),yg(i)):i.Aa.set("Unknown")}async function YO(i,e,n){if(i.Aa.set("Online"),e instanceof YE&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const p of c.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ta.delete(p),o.Ra.removeTarget(p))}(i,e)}catch(a){se(Es,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await qh(i,a)}else if(e instanceof xh?i.Ra.Ye(e):e instanceof QE?i.Ra.it(e):i.Ra.et(e),!n.isEqual(we.min()))try{const a=await aT(i.localStore);n.compareTo(a)>=0&&await function(c,d){const p=c.Ra.Pt(d);return p.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ta.get(_);x&&c.Ta.set(_,x.withResumeToken(g.resumeToken,d))}}),p.targetMismatches.forEach((g,_)=>{const x=c.Ta.get(g);if(!x)return;c.Ta.set(g,x.withResumeToken(Yt.EMPTY_BYTE_STRING,x.snapshotVersion)),cT(c,g);const S=new fa(x.target,g,_,x.sequenceNumber);vg(c,S)}),c.remoteSyncer.applyRemoteEvent(p)}(i,n)}catch(a){se(Es,"Failed to raise snapshot:",a),await qh(i,a)}}async function qh(i,e,n){if(!Go(e))throw e;i.Ia.add(1),await Mc(i),i.Aa.set("Offline"),n||(n=()=>aT(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{se(Es,"Retrying IndexedDB access"),await n(),i.Ia.delete(1),await md(i)})}function hT(i,e){return e().catch(n=>qh(i,n,e))}async function gd(i){const e=Ae(i),n=wa(e);let a=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ng;for(;WO(e);)try{const o=await DO(e.localStore,a);if(o===null){e.Pa.length===0&&n.B_();break}a=o.batchId,XO(e,o)}catch(o){await qh(e,o)}dT(e)&&fT(e)}function WO(i){return Is(i)&&i.Pa.length<10}function XO(i,e){i.Pa.push(e);const n=wa(i);n.x_()&&n.Z_&&n.X_(e.mutations)}function dT(i){return Is(i)&&!wa(i).M_()&&i.Pa.length>0}function fT(i){wa(i).start()}async function $O(i){wa(i).na()}async function ZO(i){const e=wa(i);for(const n of i.Pa)e.X_(n.mutations)}async function JO(i,e,n){const a=i.Pa.shift(),o=cg.from(a,e,n);await hT(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await gd(i)}async function ek(i,e){e&&wa(i).Z_&&await async function(a,o){if(function(d){return PD(d)&&d!==Z.ABORTED}(o.code)){const c=a.Pa.shift();wa(a).N_(),await hT(a,()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o)),await gd(a)}}(i,e),dT(i)&&fT(i)}async function fx(i,e){const n=Ae(i);n.asyncQueue.verifyOperationInProgress(),se(Es,"RemoteStore received new credentials");const a=Is(n);n.Ia.add(3),await Mc(n),a&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await md(n)}async function tk(i,e){const n=Ae(i);e?(n.Ia.delete(2),await md(n)):e||(n.Ia.add(2),await Mc(n),n.Aa.set("Unknown"))}function Ko(i){return i.Va||(i.Va=function(n,a,o){const c=Ae(n);return c.ia(),new LO(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:GO.bind(null,i),e_:KO.bind(null,i),n_:QO.bind(null,i),J_:YO.bind(null,i)}),i.da.push(async e=>{e?(i.Va.N_(),_g(i)?yg(i):i.Aa.set("Unknown")):(await i.Va.stop(),uT(i))})),i.Va}function wa(i){return i.ma||(i.ma=function(n,a,o){const c=Ae(n);return c.ia(),new zO(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:$O.bind(null,i),n_:ek.bind(null,i),ea:ZO.bind(null,i),ta:JO.bind(null,i)}),i.da.push(async e=>{e?(i.ma.N_(),await gd(i)):(await i.ma.stop(),i.Pa.length>0&&(se(Es,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))})),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const d=Date.now()+a,p=new bg(e,n,d,o,c);return p.start(a),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(i,e){if(Rr("AsyncQueue",`${e}: ${i}`),Go(i))return new ue(Z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||pe.comparator(n.key,a.key):(n,a)=>pe.comparator(n.key,a.key),this.keyedMap=ic(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Co;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.fa=new dt(pe.comparator)}track(e){const n=e.doc.key,a=this.fa.get(n);a?e.type!==0&&a.type===3?this.fa=this.fa.insert(n,e):e.type===3&&a.type!==1?this.fa=this.fa.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.fa=this.fa.remove(n):e.type===1&&a.type===2?this.fa=this.fa.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):_e(63341,{At:e,ga:a}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,a)=>{e.push(a)}),e}}class Lo{constructor(e,n,a,o,c,d,p,g,_){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,n,a,o,c){const d=[];return n.forEach(p=>{d.push({type:0,doc:p})}),new Lo(e,n,Co.emptySet(n),d,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class ik{constructor(){this.queries=mx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,a){const o=Ae(n),c=o.queries;o.queries=mx(),c.forEach((d,p)=>{for(const g of p.wa)g.onError(a)})})(this,new ue(Z.ABORTED,"Firestore shutting down"))}}function mx(){return new Ss(i=>NE(i),cd)}async function rk(i,e){const n=Ae(i);let a=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.ba()&&(a=2):(c=new nk,a=e.ba()?0:1);try{switch(a){case 0:c.ya=await n.onListen(o,!0);break;case 1:c.ya=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=xg(d,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.wa.push(e),e.va(n.onlineState),c.ya&&e.Ca(c.ya)&&Eg(n)}async function ak(i,e){const n=Ae(i),a=e.query;let o=3;const c=n.queries.get(a);if(c){const d=c.wa.indexOf(e);d>=0&&(c.wa.splice(d,1),c.wa.length===0?o=e.ba()?0:1:!c.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function sk(i,e){const n=Ae(i);let a=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const p of d.wa)p.Ca(o)&&(a=!0);d.ya=o}}a&&Eg(n)}function ok(i,e,n){const a=Ae(i),o=a.queries.get(e);if(o)for(const c of o.wa)c.onError(n);a.queries.delete(e)}function Eg(i){i.Da.forEach(e=>{e.next()})}var fm,gx;(gx=fm||(fm={})).Fa="default",gx.Cache="cache";class lk{constructor(e,n,a){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=a||{}}Ca(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Lo(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const a=n!=="Offline";return(!this.options.ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class ck{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=ME(e),this.eu=new Co(this.Xa)}get tu(){return this.Ha}nu(e,n){const a=n?n.ru:new px,o=n?n.eu:this.eu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,S)=>{const w=o.get(x),U=ud(this.query,S)?S:null,F=!!w&&this.mutatedKeys.has(w.key),G=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let q=!1;w&&U?w.data.isEqual(U.data)?F!==G&&(a.track({type:3,doc:U}),q=!0):this.iu(w,U)||(a.track({type:2,doc:U}),q=!0,(g&&this.Xa(U,g)>0||_&&this.Xa(U,_)<0)&&(p=!0)):!w&&U?(a.track({type:0,doc:U}),q=!0):w&&!U&&(a.track({type:1,doc:w}),q=!0,(g||_)&&(p=!0)),q&&(U?(d=d.add(U),c=G?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),a.track({type:1,doc:x})}return{eu:d,ru:a,Ds:p,mutatedKeys:c}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const c=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const d=e.ru.pa();d.sort((x,S)=>function(U,F){const G=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:q})}};return G(U)-G(F)}(x.type,S.type)||this.Xa(x.doc,S.doc)),this.su(a),o=o!=null&&o;const p=n&&!o?this.ou():[],g=this.Za.size===0&&this.current&&!o?1:0,_=g!==this.Ya;return this.Ya=g,d.length!==0||_?{snapshot:new Lo(this.query,e.eu,c,d,e.mutatedKeys,g===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new px,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach(a=>{this.au(a.key)&&(this.Za=this.Za.add(a.key))});const n=[];return e.forEach(a=>{this.Za.has(a)||n.push(new mT(a))}),this.Za.forEach(a=>{e.has(a)||n.push(new pT(a))}),n}uu(e){this.Ha=e.qs,this.Za=Pe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Lo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tg="SyncEngine";class uk{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class hk{constructor(e){this.key=e,this.lu=!1}}class dk{constructor(e,n,a,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.hu={},this.Pu=new Ss(p=>NE(p),cd),this.Tu=new Map,this.Iu=new Set,this.du=new dt(pe.comparator),this.Eu=new Map,this.Au=new dg,this.Ru={},this.Vu=new Map,this.mu=Uo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function fk(i,e,n=!0){const a=xT(i);let o;const c=a.Pu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.cu()):o=await gT(a,e,n,!0),o}async function pk(i,e){const n=xT(i);await gT(n,e,!0,!1)}async function gT(i,e,n,a){const o=await OO(i.localStore,Vi(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let p;return a&&(p=await mk(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&lT(i.remoteStore,o),p}async function mk(i,e,n,a,o){i.gu=(S,w,U)=>async function(G,q,ie,oe){let ae=q.view.nu(ie);ae.Ds&&(ae=await lx(G.localStore,q.query,!1).then(({documents:D})=>q.view.nu(D,ae)));const ee=oe&&oe.targetChanges.get(q.targetId),ge=oe&&oe.targetMismatches.get(q.targetId)!=null,be=q.view.applyChanges(ae,G.isPrimaryClient,ee,ge);return yx(G,q.targetId,be._u),be.snapshot}(i,S,w,U);const c=await lx(i.localStore,e,!0),d=new ck(e,c.qs),p=d.nu(c.documents),g=Nc.createSynthesizedTargetChangeForCurrentChange(n,a&&i.onlineState!=="Offline",o),_=d.applyChanges(p,i.isPrimaryClient,g);yx(i,n,_._u);const x=new uk(e,n,d);return i.Pu.set(e,x),i.Tu.has(n)?i.Tu.get(n).push(e):i.Tu.set(n,[e]),_.snapshot}async function gk(i,e,n){const a=Ae(i),o=a.Pu.get(e),c=a.Tu.get(o.targetId);if(c.length>1)return a.Tu.set(o.targetId,c.filter(d=>!cd(d,e))),void a.Pu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),n&&gg(a.remoteStore,o.targetId),pm(a,o.targetId)}).catch(Ho)):(pm(a,o.targetId),await hm(a.localStore,o.targetId,!0))}async function vk(i,e){const n=Ae(i),a=n.Pu.get(e),o=n.Tu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),gg(n.remoteStore,a.targetId))}async function yk(i,e,n){const a=Ak(i);try{const o=await function(d,p){const g=Ae(d),_=rt.now(),x=p.reduce((U,F)=>U.add(F.key),Pe());let S,w;return g.persistence.runTransaction("Locally write mutations","readwrite",U=>{let F=Cr(),G=Pe();return g.Os.getEntries(U,x).next(q=>{F=q,F.forEach((ie,oe)=>{oe.isValidDocument()||(G=G.add(ie))})}).next(()=>g.localDocuments.getOverlayedDocuments(U,F)).next(q=>{S=q;const ie=[];for(const oe of p){const ae=OD(oe,S.get(oe.key).overlayedDocument);ae!=null&&ie.push(new Rs(oe.key,ae,SE(ae.value.mapValue),Tr.exists(!0)))}return g.mutationQueue.addMutationBatch(U,_,ie,p)}).next(q=>{w=q;const ie=q.applyToLocalDocumentSet(S,G);return g.documentOverlayCache.saveOverlays(U,q.batchId,ie)})}).then(()=>({batchId:w.batchId,changes:PE(S)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(d,p,g){let _=d.Ru[d.currentUser.toKey()];_||(_=new dt(Ce)),_=_.insert(p,g),d.Ru[d.currentUser.toKey()]=_}(a,o.batchId,n),await jc(a,o.changes),await gd(a.remoteStore)}catch(o){const c=xg(o,"Failed to persist write");n.reject(c)}}async function vT(i,e){const n=Ae(i);try{const a=await IO(n.localStore,e);e.targetChanges.forEach((o,c)=>{const d=n.Eu.get(c);d&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.lu=!0:o.modifiedDocuments.size>0?Ke(d.lu,14607):o.removedDocuments.size>0&&(Ke(d.lu,42227),d.lu=!1))}),await jc(n,a,e)}catch(a){await Ho(a)}}function vx(i,e,n){const a=Ae(i);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Pu.forEach((c,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)}),function(d,p){const g=Ae(d);g.onlineState=p;let _=!1;g.queries.forEach((x,S)=>{for(const w of S.wa)w.va(p)&&(_=!0)}),_&&Eg(g)}(a.eventManager,e),o.length&&a.hu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function _k(i,e,n){const a=Ae(i);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Eu.get(e),c=o&&o.key;if(c){let d=new dt(pe.comparator);d=d.insert(c,an.newNoDocument(c,we.min()));const p=Pe().add(c),g=new fd(we.min(),new Map,new dt(Ce),d,p);await vT(a,g),a.du=a.du.remove(c),a.Eu.delete(e),wg(a)}else await hm(a.localStore,e,!1).then(()=>pm(a,e,n)).catch(Ho)}async function bk(i,e){const n=Ae(i),a=e.batch.batchId;try{const o=await RO(n.localStore,e);_T(n,a,null),yT(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await jc(n,o)}catch(o){await Ho(o)}}async function xk(i,e,n){const a=Ae(i);try{const o=await function(d,p){const g=Ae(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let x;return g.mutationQueue.lookupMutationBatch(_,p).next(S=>(Ke(S!==null,37113),x=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,x,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,x)).next(()=>g.localDocuments.getDocuments(_,x))})}(a.localStore,e);_T(a,e,n),yT(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await jc(a,o)}catch(o){await Ho(o)}}function yT(i,e){(i.Vu.get(e)||[]).forEach(n=>{n.resolve()}),i.Vu.delete(e)}function _T(i,e,n){const a=Ae(i);let o=a.Ru[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),a.Ru[a.currentUser.toKey()]=o}}function pm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Tu.get(e))i.Pu.delete(a),n&&i.hu.pu(a,n);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach(a=>{i.Au.containsKey(a)||bT(i,a)})}function bT(i,e){i.Iu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(gg(i.remoteStore,n),i.du=i.du.remove(e),i.Eu.delete(n),wg(i))}function yx(i,e,n){for(const a of n)a instanceof pT?(i.Au.addReference(a.key,e),Ek(i,a)):a instanceof mT?(se(Tg,"Document no longer in limbo: "+a.key),i.Au.removeReference(a.key,e),i.Au.containsKey(a.key)||bT(i,a.key)):_e(19791,{yu:a})}function Ek(i,e){const n=e.key,a=n.path.canonicalString();i.du.get(n)||i.Iu.has(a)||(se(Tg,"New document in limbo: "+n),i.Iu.add(a),wg(i))}function wg(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const n=new pe(ht.fromString(e)),a=i.mu.next();i.Eu.set(a,new hk(n)),i.du=i.du.insert(n,a),lT(i.remoteStore,new fa(Vi(og(n.path)),a,"TargetPurposeLimboResolution",ad.ue))}}async function jc(i,e,n){const a=Ae(i),o=[],c=[],d=[];a.Pu.isEmpty()||(a.Pu.forEach((p,g)=>{d.push(a.gu(g,e,n).then(_=>{var x;if((_||n)&&a.isPrimaryClient){const S=_?!_.fromCache:(x=n?.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;a.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(_){o.push(_);const S=pg.Es(g.targetId,_);c.push(S)}}))}),await Promise.all(d),a.hu.J_(o),await async function(g,_){const x=Ae(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>$.forEach(_,w=>$.forEach(w.Is,U=>x.persistence.referenceDelegate.addReference(S,w.targetId,U)).next(()=>$.forEach(w.ds,U=>x.persistence.referenceDelegate.removeReference(S,w.targetId,U)))))}catch(S){if(!Go(S))throw S;se(mg,"Failed to update sequence numbers: "+S)}for(const S of _){const w=S.targetId;if(!S.fromCache){const U=x.Fs.get(w),F=U.snapshotVersion,G=U.withLastLimboFreeSnapshotVersion(F);x.Fs=x.Fs.insert(w,G)}}}(a.localStore,c))}async function Tk(i,e){const n=Ae(i);if(!n.currentUser.isEqual(e)){se(Tg,"User change. New user:",e.toKey());const a=await rT(n.localStore,e);n.currentUser=e,function(c,d){c.Vu.forEach(p=>{p.forEach(g=>{g.reject(new ue(Z.CANCELLED,d))})}),c.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await jc(n,a.Bs)}}function wk(i,e){const n=Ae(i),a=n.Eu.get(e);if(a&&a.lu)return Pe().add(a.key);{let o=Pe();const c=n.Tu.get(e);if(!c)return o;for(const d of c){const p=n.Pu.get(d);o=o.unionWith(p.view.tu)}return o}}function xT(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_k.bind(null,e),e.hu.J_=sk.bind(null,e.eventManager),e.hu.pu=ok.bind(null,e.eventManager),e}function Ak(i){const e=Ae(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xk.bind(null,e),e}class Hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return SO(this.persistence,new TO,e.initialUser,this.serializer)}Du(e){return new iT(fg.Vi,this.serializer)}bu(e){return new NO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hh.provider={build:()=>new Hh};class Sk extends Hh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ke(this.persistence.referenceDelegate instanceof Fh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new lO(a,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new iT(a=>Fh.Vi(a,n),this.serializer)}}class mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>vx(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tk.bind(null,this.syncEngine),await tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ik}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),a=function(c){return new UO(c)}(e.databaseInfo);return function(c,d,p,g){return new FO(c,d,p,g)}(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return function(a,o,c,d,p){return new HO(a,o,c,d,p)}(this.localStore,this.datastore,e.asyncQueue,n=>vx(this.syncEngine,n,0),function(){return hx.C()?new hx:new MO}())}createSyncEngine(e,n){return function(o,c,d,p,g,_,x){const S=new dk(o,c,d,p,g,_);return x&&(S.fu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const c=Ae(o);se(Es,"RemoteStore shutting down."),c.Ia.add(5),await Mc(c),c.Ea.shutdown(),c.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="FirestoreClient";class Ik{constructor(e,n,a,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,async d=>{se(Aa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(se(Aa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=xg(n,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Up(i,e){i.asyncQueue.verifyOperationInProgress(),se(Aa,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener(async o=>{a.isEqual(o)||(await rT(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>{Ir("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then(()=>{se("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Ir("Terminating Firestore due to IndexedDb database deletion failed",o)})}),i._offlineComponents=e}async function _x(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Ck(i);se(Aa,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(a=>fx(e.remoteStore,a)),i.setAppCheckTokenChangeListener((a,o)=>fx(e.remoteStore,o)),i._onlineComponents=e}async function Ck(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){se(Aa,"Using user provided OfflineComponentProvider");try{await Up(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ir("Error using user provided cache. Falling back to memory cache: "+n),await Up(i,new Hh)}}else se(Aa,"Using default OfflineComponentProvider"),await Up(i,new Sk(void 0));return i._offlineComponents}async function ET(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(se(Aa,"Using user provided OnlineComponentProvider"),await _x(i,i._uninitializedComponentsProvider._online)):(se(Aa,"Using default OnlineComponentProvider"),await _x(i,new mm))),i._onlineComponents}function Dk(i){return ET(i).then(e=>e.syncEngine)}async function Ok(i){const e=await ET(i),n=e.eventManager;return n.onListen=fk.bind(null,e.syncEngine),n.onUnlisten=gk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),n}function kk(i,e,n={}){const a=new va;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,p,g,_){const x=new Rk({next:w=>{x.Ou(),d.enqueueAndForget(()=>ak(c,S));const U=w.docs.has(p);!U&&w.fromCache?_.reject(new ue(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&w.fromCache&&g&&g.source==="server"?_.reject(new ue(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(w)},error:w=>_.reject(w)}),S=new lk(og(p.path),x,{includeMetadataChanges:!0,ka:!0});return rk(c,S)}(await Ok(i),i.asyncQueue,e,n,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firestore.googleapis.com",xx=!0;class Ex{constructor(e){var n,a;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wT,this.ssl=xx}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:xx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sO)throw new ue(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ue(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ag{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ex({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ex(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new fE;switch(a.type){case"firstParty":return new LC(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ue(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const a=bx.get(n);a&&(se("ComponentProvider","Removing Datastore"),bx.delete(n),a.terminate())}(this),Promise.resolve()}}function AT(i,e,n,a={}){var o;i=Mo(i,Ag);const c=Ia(e),d=i._getSettings(),p=Object.assign(Object.assign({},d),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${n}`;c&&(Cm(`https://${g}`),Dm("Firestore",!0)),d.host!==wT&&d.host!==g&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _=Object.assign(Object.assign({},d),{host:g,ssl:c,emulatorOptions:a});if(!gs(_,p)&&(i._setSettings(_),a.mockUserToken)){let x,S;if(typeof a.mockUserToken=="string")x=a.mockUserToken,S=rn.MOCK_USER;else{x=a0(a.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new ue(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new rn(w)}i._authCredentials=new PC(new dE(x,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new vd(this.firestore,e,this._query)}}class Vt{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Oc(n,Vt._jsonSchema))return new Vt(e,a||null,new pe(ht.fromString(n.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:It("string",Vt._jsonSchemaVersion),referencePath:It("string")};class zo extends vd{constructor(e,n,a){super(e,n,og(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new pe(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function Nk(i,e,...n){if(i=Lt(i),arguments.length===1&&(e=rd.newId()),HC("doc","path",e),i instanceof Ag){const a=ht.fromString(e,...n);return Pb(a),new Vt(i,null,new pe(a))}{if(!(i instanceof Vt||i instanceof zo))throw new ue(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(ht.fromString(e,...n));return Pb(a),new Vt(i.firestore,i instanceof zo?i.converter:null,new pe(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="AsyncQueue";class wx{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sT(this,"async_queue_retry"),this.oc=()=>{const a=Vp();a&&se(Tx,"Visibility state changed to "+a.visibilityState),this.F_.y_()},this._c=e;const n=Vp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new va;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Go(e))throw e;se(Tx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(a=>{throw this.tc=a,this.nc=!1,Rr("INTERNAL UNHANDLED ERROR: ",Ax(a)),a}).then(a=>(this.nc=!1,a))));return this._c=n,n}enqueueAfterDelay(e,n,a){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const o=bg.createAndSchedule(this,e,n,a,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&_e(47125,{hc:Ax(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Ax(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class yd extends Ag{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new wx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wx(e),this._firestoreClient=void 0,await e}}}function ST(i,e){const n=typeof i=="object"?i:Nm(),a=typeof i=="string"?i:jh,o=Zh(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=n0("firestore");c&&AT(o,...c)}return o}function Sg(i){if(i._terminated)throw new ue(Z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Mk(i),i._firestoreClient}function Mk(i){var e,n,a;const o=i._freezeSettings(),c=function(p,g,_,x){return new tD(p,g,_,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,TT(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new Ik(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(p){const g=p?._online.build();return{_offline:p?._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Yt.fromBase64String(e))}catch(n){throw new ue(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:It("string",kn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:It("string",ui._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hi(e.vectorValues);throw new ue(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hi._jsonSchemaVersion="firestore/vectorValue/1.0",hi._jsonSchema={type:It("string",hi._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=/^__.*__$/;class Pk{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new kc(e,this.data,n,this.fieldTransforms)}}function RT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:i})}}class Ig{constructor(e,n,a,o,c,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Ac(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:a,mc:!1});return o.fc(e),o}gc(e){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Rc({path:a,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Gh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(RT(this.Ec)&&jk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Vk{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||pd(e)}Dc(e,n,a,o=!1){return new Ig({Ec:e,methodName:n,bc:a,path:Qt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uk(i){const e=i._freezeSettings(),n=pd(i._databaseId);return new Vk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Lk(i,e,n,a,o,c={}){const d=i.Dc(c.merge||c.mergeFields?2:0,e,n,o);OT("Data must be an object, but it was:",d,a);const p=CT(a,d);let g,_;if(c.merge)g=new li(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const S of c.mergeFields){const w=zk(e,S,n);if(!d.contains(w))throw new ue(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Fk(x,w)||x.push(w)}g=new li(x),_=d.fieldTransforms.filter(S=>g.covers(S.field))}else g=null,_=d.fieldTransforms;return new Pk(new Qn(p),g,_)}function IT(i,e){if(DT(i=Lt(i)))return OT("Unsupported field value:",e,i),CT(i,e);if(i instanceof Rg)return function(a,o){if(!RT(o.Ec))throw o.wc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(a,o){const c=[];let d=0;for(const p of a){let g=IT(p,o.yc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(i,e)}return function(a,o){if((a=Lt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return AD(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=rt.fromDate(a);return{timestampValue:Bh(o.serializer,c)}}if(a instanceof rt){const c=new rt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,c)}}if(a instanceof ui)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof kn)return{bytesValue:WE(o.serializer,a._byteString)};if(a instanceof Vt){const c=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw o.wc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:hg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof hi)return function(d,p){return{mapValue:{fields:{[wE]:{stringValue:AE},[Ph]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw p.wc("VectorValues must only contain numeric values.");return lg(p.serializer,_)})}}}}}}(a,o);throw o.wc(`Unsupported field value: ${tg(a)}`)}(i,e)}function CT(i,e){const n={};return yE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(i,(a,o)=>{const c=IT(o,e.Vc(a));c!=null&&(n[a]=c)}),{mapValue:{fields:n}}}function DT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof rt||i instanceof ui||i instanceof kn||i instanceof Vt||i instanceof Rg||i instanceof hi)}function OT(i,e,n){if(!DT(n)||!gE(n)){const a=tg(n);throw a==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+a)}}function zk(i,e,n){if((e=Lt(e))instanceof _d)return e._internalPath;if(typeof e=="string")return kT(i,e);throw Gh("Field path arguments must be of type string or ",i,!1,void 0,n)}const Bk=new RegExp("[~\\*/\\[\\]]");function kT(i,e,n){if(e.search(Bk)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new _d(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Gh(i,e,n,a,o){const c=a&&!a.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new ue(Z.INVALID_ARGUMENT,p+i+g)}function Fk(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(MT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qk extends NT{data(){return super.data()}}function MT(i,e){return typeof e=="string"?kT(i,e):e instanceof _d?e._internalPath:e._delegate._internalPath}class jT{convertValue(e,n="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return As(e,(o,c)=>{a[o]=this.convertValue(c,n)}),a}convertVectorValue(e){var n,a,o;const c=(o=(a=(n=e.fields)===null||n===void 0?void 0:n[Ph].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(d=>xt(d.doubleValue));return new hi(c)}convertGeoPoint(e){return new ui(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=od(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=xa(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=ht.fromString(e);Ke(tT(a),9688,{name:e});const o=new jo(a.get(1),a.get(3)),c=new pe(a.popFirst(5));return o.isEqual(n)||Rr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends NT{constructor(e,n,a,o,c,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(MT("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ya._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:It("string",ya._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class fc extends ya{data(e={}){return super.data(e)}}class Do{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Ao(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new fc(this._firestore,this._userDataWriter,a.key,a,new Ao(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(p=>{const g=new fc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ao(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>c||p.type!==3).map(p=>{const g=new fc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Ao(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,x=-1;return p.type!==0&&(_=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:Gk(p.type),doc:g,oldIndex:_,newIndex:x}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Gk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(i){i=Mo(i,Vt);const e=Mo(i.firestore,yd);return kk(Sg(e),i._key).then(n=>Wk(e,i,n))}Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:It("string",Do._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Qk extends jT{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function Yk(i,e,n){i=Mo(i,Vt);const a=Mo(i.firestore,yd),o=Hk(i.converter,e,n);return PT(a,[Lk(Uk(a),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Tr.none())])}function PT(i,e){return function(a,o){const c=new va;return a.asyncQueue.enqueueAndForget(async()=>yk(await Dk(a),o,c)),c.promise}(Sg(i),e)}function Wk(i,e,n){const a=n.docs.get(e._key),o=new Qk(i);return new ya(i,o,e._key,a,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){qo=o})(Ts),vs(new _a("firestore",(a,{instanceIdentifier:o,options:c})=>{const d=a.getProvider("app").getImmediate(),p=new yd(new VC(a.getProvider("auth-internal")),new zC(d,a.getProvider("app-check-internal")),function(_,x){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ue(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(_.options.projectId,x)}(d,o),d);return c=Object.assign({useFetchStreams:n},c),p._setSettings(c),p},"PUBLIC").setMultipleInstances(!0)),ji(Ob,kb,e),ji(Ob,kb,"esm2017")})();const VT=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:jT,Bytes:kn,CollectionReference:zo,DocumentReference:Vt,DocumentSnapshot:ya,FieldPath:_d,FieldValue:Rg,Firestore:yd,FirestoreError:ue,GeoPoint:ui,Query:vd,QueryDocumentSnapshot:fc,QuerySnapshot:Do,SnapshotMetadata:Ao,Timestamp:rt,VectorValue:hi,_AutoId:rd,_ByteString:Yt,_DatabaseId:jo,_DocumentKey:pe,_EmptyAuthCredentialsProvider:fE,_FieldPath:Qt,_cast:Mo,_logWarn:Ir,_validateIsNotUsedTogether:mE,connectFirestoreEmulator:AT,doc:Nk,ensureFirestoreConfigured:Sg,executeWrite:PT,getDoc:Kk,getFirestore:ST,setDoc:Yk},Symbol.toStringTag,{value:"Module"})),Xk={apiKey:"AIzaSyCVEbEE2vwOEh1vsRfLffaDHviDTmG6aRA",authDomain:void 0,projectId:void 0,storageBucket:"gs://tei-saas.firebasestorage.app",messagingSenderId:void 0,appId:void 0,measurementId:void 0},Cg=l0(Xk),Sa=MC(Cg),bd=mI(Cg),$k=ST(Cg),UT=Object.freeze(Object.defineProperty({__proto__:null,auth:Sa,db:$k,storage:bd},Symbol.toStringTag,{value:"Module"})),Zk={files:[],isLoading:!1,error:null,uploadProgress:0},Eh=Im("files/uploadFile",async({file:i,userId:e},{rejectWithValue:n})=>{try{const a=Bm(bd,`files/${e}/${i.name}`),o=await dI(a,i),c=await A0(o.ref);return{id:o.ref.name,name:i.name,size:i.size,type:i.type,url:c,createdAt:new Date,updatedAt:new Date,userId:e}}catch(a){return n(a instanceof Error?a.message:"Upload failed")}}),Th=Im("files/fetchUserFiles",async(i,{rejectWithValue:e})=>{try{const n=Bm(bd,`files/${i}`),a=await fI(n),o=[];for(const c of a.items)try{const d=await A0(c);o.push({id:c.name,name:c.name,size:0,type:"application/octet-stream",url:d,createdAt:new Date,updatedAt:new Date,userId:i})}catch(d){console.error(`Error getting download URL for ${c.name}:`,d)}return o}catch(n){return e(n instanceof Error?n.message:"Failed to fetch files")}}),wh=Im("files/deleteFile",async({fileName:i,userId:e},{rejectWithValue:n})=>{try{const a=Bm(bd,`files/${e}/${i}`);return await pI(a),i}catch(a){return n(a instanceof Error?a.message:"Delete failed")}}),Jk=Xx({name:"files",initialState:Zk,reducers:{clearFiles:i=>{i.files=[],i.error=null},setUploadProgress:(i,e)=>{i.uploadProgress=e.payload},clearError:i=>{i.error=null}},extraReducers:i=>{i.addCase(Eh.pending,e=>{e.isLoading=!0,e.error=null,e.uploadProgress=0}).addCase(Eh.fulfilled,(e,n)=>{e.isLoading=!1,e.files.push(n.payload),e.uploadProgress=100}).addCase(Eh.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload,e.uploadProgress=0}).addCase(Th.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Th.fulfilled,(e,n)=>{e.isLoading=!1,e.files=n.payload}).addCase(Th.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(wh.pending,e=>{e.isLoading=!0,e.error=null}).addCase(wh.fulfilled,(e,n)=>{e.isLoading=!1,e.files=e.files.filter(a=>a.name!==n.payload)}).addCase(wh.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload})}}),eN=Jk.reducer,tN=oS({reducer:{user:gS,files:eN}}),nN=TA({palette:{primary:{main:"#1f2937",light:"#374151",dark:"#111827",contrastText:"#ffffff"},secondary:{main:"#fbbf24",light:"#fcd34d",dark:"#f59e0b",contrastText:"#1f2937"},background:{default:"#f5f5f4",paper:"#fefefe"},text:{primary:"#1f2937",secondary:"#6b7280"},grey:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700,fontSize:"2.5rem",lineHeight:1.2},h2:{fontWeight:700,fontSize:"2rem",lineHeight:1.3},h3:{fontWeight:700,fontSize:"1.75rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.4},h5:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1.125rem",lineHeight:1.4},body1:{fontSize:"1rem",lineHeight:1.6},body2:{fontSize:"0.875rem",lineHeight:1.6},button:{fontWeight:600,textTransform:"none"}},shape:{borderRadius:12},components:{MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.04)",background:"linear-gradient(135deg, #fefefe 0%, #fafaf9 100%)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",border:"1px solid rgba(0, 0, 0, 0.04)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)"}}},MuiButton:{styleOverrides:{root:{borderRadius:12,fontWeight:600,textTransform:"none",padding:"10px 24px",fontSize:"0.875rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)"}},contained:{"&.MuiButton-containedPrimary":{background:"linear-gradient(135deg, #1f2937 0%, #374151 100%)","&:hover":{background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)"}},"&.MuiButton-containedSecondary":{background:"linear-gradient(135deg, #fbbf24 0%, #fcd34d 100%)",color:"#1f2937","&:hover":{background:"linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)"}}},outlined:{borderWidth:"2px","&:hover":{borderWidth:"2px"}}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiLinearProgress:{styleOverrides:{root:{borderRadius:8,height:8},bar:{borderRadius:8}}},MuiCircularProgress:{styleOverrides:{root:{color:"#fbbf24"}}}}}),iN="modulepreload",rN=function(i){return"/teiapp/"+i},Sx={},Kh=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let g=function(_){return Promise.all(_.map(x=>Promise.resolve(x).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=g(n.map(_=>{if(_=rN(_),_ in Sx)return;Sx[_]=!0;const x=_.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${S}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":iN,x||(w.as="script"),w.crossOrigin="",w.href=_,p&&w.setAttribute("nonce",p),document.head.appendChild(w),x)return new Promise((U,F)=>{w.addEventListener("load",U),w.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${_}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})},LT=i=>{if(!i)return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return"Please enter a valid email address"},zT=(i,e=!1)=>{if(!i)return"Password is required";if(e&&i.length<6)return"Password must be at least 6 characters long"},aN=i=>{if(!i)return"First name is required";if(i.length<2)return"First name must be at least 2 characters long"},sN=i=>{if(!i)return"Last name is required";if(i.length<2)return"Last name must be at least 2 characters long"},oN=i=>{if(!i)return"Address is required";if(i.length<10)return"Address must be at least 10 characters long"},lN=i=>{if(!i)return"University is required";if(i.length<3)return"University must be at least 3 characters long"},cN=i=>{const e={},n=LT(i.email);n&&(e.email=n);const a=zT(i.password,!0);a&&(e.password=a);const o=aN(i.firstName);o&&(e.firstName=o);const c=sN(i.lastName);c&&(e.lastName=c);const d=oN(i.address);d&&(e.address=d);const p=lN(i.university);return p&&(e.university=p),e},uN=(i,e=!1)=>{const n={},a=LT(i.email);a&&(n.email=a);const o=zT(i.password,e);return o&&(n.password=o),n},gm=i=>{switch(i){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection and try again.";case"auth/popup-closed-by-user":return"Sign-in popup was closed. Please try again.";case"auth/cancelled-popup-request":return"Sign-in was cancelled. Please try again.";case"auth/popup-blocked":return"Sign-in popup was blocked. Please allow popups and try again.";default:return"An error occurred. Please try again."}},hN=async(i,e)=>{try{const{doc:n,setDoc:a}=await Kh(async()=>{const{doc:c,setDoc:d}=await Promise.resolve().then(()=>VT);return{doc:c,setDoc:d}},void 0),{db:o}=await Kh(async()=>{const{db:c}=await Promise.resolve().then(()=>UT);return{db:c}},void 0);return await a(n(o,"users",i),{...e,createdAt:new Date,updatedAt:new Date}),{success:!0}}catch(n){return console.error("Error storing user profile:",n),{success:!1,error:n}}},Rx=async i=>{try{const{doc:e,getDoc:n}=await Kh(async()=>{const{doc:d,getDoc:p}=await Promise.resolve().then(()=>VT);return{doc:d,getDoc:p}},void 0),{db:a}=await Kh(async()=>{const{db:d}=await Promise.resolve().then(()=>UT);return{db:d}},void 0),o=e(a,"users",i),c=await n(o);if(c.exists()){const d=c.data();return d&&typeof d.firstName=="string"&&typeof d.lastName=="string"&&typeof d.address=="string"&&typeof d.university=="string"?{success:!0,data:{firstName:d.firstName,lastName:d.lastName,address:d.address,university:d.university}}:{success:!1,data:null}}else return{success:!1,data:null}}catch(e){return console.error("Error getting user profile:",e),{success:!1,error:e}}},dN=()=>{const i=Fi(),e=Ra(),[n,a]=ce.useState({email:"",password:"",firstName:"",lastName:"",address:"",university:""}),[o,c]=ce.useState({}),[d,p]=ce.useState(!1),g=()=>{const S=cN(n);return c(S),Object.keys(S).length===0},_=S=>w=>{const U=w.target.value;a(F=>({...F,[S]:U})),o[S]&&c(F=>({...F,[S]:void 0}))},x=async S=>{if(S.preventDefault(),!!g()){p(!0),c({});try{const U=(await _2(Sa,n.email,n.password)).user,F={firstName:n.firstName,lastName:n.lastName,address:n.address,university:n.university,email:n.email};if((await hN(U.uid,F)).success)e(wo(U)),e(Fp(F)),i("/");else throw new Error("Failed to store profile data")}catch(w){const U=w;let F="An error occurred during signup. Please try again.";F=gm(U.code),console.error("Signup error:",U.code,U.message),c({general:F})}finally{p(!1)}}};return v.jsx(Oo,{component:"main",maxWidth:"md",children:v.jsx(J,{sx:{marginTop:4,marginBottom:4,display:"flex",flexDirection:"column",alignItems:"center"},children:v.jsxs(Li,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[v.jsx(Y,{component:"h1",variant:"h4",gutterBottom:!0,children:"FocusApp"}),v.jsx(Y,{component:"h2",variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Create your account"}),o.general&&v.jsx(xr,{severity:"error",sx:{width:"100%",mb:2},children:o.general}),v.jsxs(J,{component:"form",onSubmit:x,sx:{mt:1,width:"100%"},children:[v.jsxs(ut,{container:!0,spacing:2,children:[v.jsx(ut,{size:{xs:12,sm:6},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"given-name",autoFocus:!0,value:n.firstName,onChange:_("firstName"),error:!!o.firstName,helperText:o.firstName,disabled:d})}),v.jsx(ut,{size:{xs:12,sm:6},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:n.lastName,onChange:_("lastName"),error:!!o.lastName,helperText:o.lastName,disabled:d})}),v.jsx(ut,{size:{xs:12},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:n.email,onChange:_("email"),error:!!o.email,helperText:o.email,disabled:d})}),v.jsx(ut,{size:{xs:12},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"address",label:"Address",name:"address",autoComplete:"street-address",multiline:!0,rows:2,value:n.address,onChange:_("address"),error:!!o.address,helperText:o.address||"Enter your full address",disabled:d})}),v.jsx(ut,{size:{xs:12},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"university",label:"University",name:"university",autoComplete:"organization",value:n.university,onChange:_("university"),error:!!o.university,helperText:o.university,disabled:d})}),v.jsx(ut,{size:{xs:12},children:v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:n.password,onChange:_("password"),error:!!o.password,helperText:o.password||"Password must be at least 6 characters long",disabled:d})})]}),v.jsx(ot,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:d,children:d?v.jsxs(v.Fragment,{children:[v.jsx(pc,{size:20,sx:{mr:1}}),"Creating Account..."]}):"Sign Up"}),v.jsx(J,{sx:{textAlign:"center"},children:v.jsxs(Y,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",v.jsx(zx,{component:Wx,to:"/auth/signin",variant:"body2",children:"Sign in"})]})})]})]})})})},fN=()=>{const i=Fi(),e=Ra(),[n,a]=ce.useState({email:"",password:""}),[o,c]=ce.useState({}),[d,p]=ce.useState(!1),[g,_]=ce.useState(!1),x=()=>{const F=uN(n,!1);return c(F),Object.keys(F).length===0},S=F=>G=>{const q=G.target.value;a(ie=>({...ie,[F]:q})),o[F]&&c(ie=>({...ie,[F]:void 0}))},w=async()=>{_(!0),c({});try{const F=new yr,q=(await q2(Sa,F)).user,ie=await Rx(q.uid);ie.success&&ie.data?(e(wo(q)),e(Fp(ie.data))):e(wo(q)),i("/")}catch(F){const G=F;let q="An error occurred during Google sign-in. Please try again.";q=gm(G.code),console.error("Google sign-in error:",G.code,G.message),c({general:q})}finally{_(!1)}},U=async F=>{if(F.preventDefault(),!!x()){p(!0),c({});try{const q=(await b2(Sa,n.email,n.password)).user,ie=await Rx(q.uid);ie.success&&ie.data?(e(wo(q)),e(Fp(ie.data))):e(wo(q)),i("/")}catch(G){const q=G;let ie="An error occurred during signin. Please try again.";ie=gm(q.code),console.error("Signin error:",q.code,q.message),c({general:ie})}finally{p(!1)}}};return v.jsx(Oo,{component:"main",maxWidth:"sm",children:v.jsx(J,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:v.jsxs(Li,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[v.jsx(Y,{component:"h1",variant:"h4",gutterBottom:!0,children:"FocusApp"}),v.jsx(Y,{component:"h2",variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Sign in to your account"}),o.general&&v.jsx(xr,{severity:"error",sx:{width:"100%",mb:2},children:o.general}),v.jsx(ot,{fullWidth:!0,variant:"outlined",startIcon:v.jsx(wA,{}),onClick:w,disabled:g||d,sx:{mb:3,py:1.5,borderColor:"#4285f4",color:"#4285f4","&:hover":{borderColor:"#3367d6",bgcolor:"rgba(66, 133, 244, 0.04)"}},children:g?v.jsxs(v.Fragment,{children:[v.jsx(pc,{size:20,sx:{mr:1}}),"Signing in with Google..."]}):"Sign in with Google"}),v.jsx(ko,{sx:{width:"100%",mb:3},children:v.jsx(Y,{variant:"body2",color:"text.secondary",children:"or"})}),v.jsxs(J,{component:"form",onSubmit:U,sx:{mt:1,width:"100%"},children:[v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:n.email,onChange:S("email"),error:!!o.email,helperText:o.email,disabled:d||g}),v.jsx(oa,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n.password,onChange:S("password"),error:!!o.password,helperText:o.password,disabled:d||g}),v.jsx(ot,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:d||g,children:d?v.jsxs(v.Fragment,{children:[v.jsx(pc,{size:20,sx:{mr:1}}),"Signing In..."]}):"Sign In"}),v.jsx(J,{sx:{textAlign:"center"},children:v.jsxs(Y,{variant:"body2",color:"text.secondary",children:["Don't have an account?"," ",v.jsx(zx,{component:Wx,to:"/auth/signup",variant:"body2",children:"Sign up"})]})})]})]})})})},pN=()=>{const i=wr(o=>o.user.user),e=Ra(),n=Fi(),a=async()=>{try{await $m(Sa),e(Xh()),n("/",{replace:!0})}catch(o){console.error("Error signing out:",o)}};return i?v.jsxs(J,{sx:{flexGrow:1},children:[v.jsx(Bx,{position:"static",children:v.jsxs(Fx,{children:[v.jsx(Em,{sx:{mr:2}}),v.jsx(Y,{variant:"h6",component:"div",sx:{flexGrow:1},children:"FocusApp Dashboard"}),v.jsxs(J,{sx:{display:"flex",alignItems:"center",mr:2},children:[v.jsx(Ah,{sx:{mr:1,bgcolor:"secondary.main"},children:v.jsx(qx,{})}),v.jsx(Y,{variant:"body2",children:i.email})]}),v.jsx(ot,{color:"inherit",startIcon:v.jsx(Hx,{}),onClick:a,children:"Sign Out"})]})}),v.jsxs(Oo,{maxWidth:"lg",sx:{mt:4},children:[v.jsxs(Y,{variant:"h4",gutterBottom:!0,children:["Welcome back, ",i.email?.split("@")[0],"!"]}),v.jsxs(J,{sx:{display:"flex",gap:3,mt:2,flexWrap:"wrap"},children:[v.jsx(On,{sx:{flex:"1 1 300px",minWidth:"250px"},children:v.jsxs(Tm,{children:[v.jsx(Y,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),v.jsx(ot,{variant:"contained",fullWidth:!0,sx:{mb:1},onClick:()=>n("/"),children:"Go to Home"}),v.jsx(ot,{variant:"outlined",fullWidth:!0,sx:{mb:1},onClick:()=>n("/dashboard/settings"),children:"Settings"})]})}),v.jsxs(Li,{sx:{p:3,flex:"2 1 400px",minWidth:"300px"},children:[v.jsx(Y,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:"No recent activity to display."})]})]})]})]}):null},BT=()=>{const i=wr(n=>n.user.user),e=wr(n=>n.user.isLoading);return{user:i,isAuthenticated:!!i,isLoading:e}},mN=()=>{const i=Ra(),e=Fi();return{logout:async()=>{try{await $m(Sa),i(Xh()),e("/",{replace:!0})}catch(a){console.error("Error signing out:",a)}}}},gN=[{title:"TEI XML Viewer",icon:v.jsx(AA,{sx:{fontSize:40,color:"#4DCCA6"}}),description:"Visualize and navigate TEI-encoded texts in a friendly UI."},{title:"Search & Filter",icon:v.jsx(SA,{sx:{fontSize:40,color:"#4DCCA6"}}),description:"Quickly locate specific elements across your corpus."},{title:"Annotation Editor",icon:v.jsx(RA,{sx:{fontSize:40,color:"#4DCCA6"}}),description:"Create, edit, and export custom TEI annotations."}];function vN(){const i=Fi(),{isAuthenticated:e}=BT(),{logout:n}=mN();return v.jsx(Bx,{position:"static",color:"transparent",elevation:0,children:v.jsxs(Fx,{sx:{justifyContent:"space-between"},children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",color:"#4DCCA6"},children:"FocusApp"}),v.jsxs(J,{children:[["About","Features","Docs","Contact"].map(a=>v.jsx(ot,{color:"inherit",children:a},a)),e?v.jsxs(v.Fragment,{children:[v.jsx(ot,{variant:"contained",sx:{ml:2},startIcon:v.jsx(Em,{}),onClick:()=>i("/"),children:"Home"}),v.jsx(ot,{variant:"outlined",sx:{ml:1},startIcon:v.jsx(Hx,{}),onClick:n,children:"Logout"})]}):v.jsx(ot,{variant:"outlined",sx:{ml:2},onClick:()=>i("/auth/signin"),children:"Login"})]})]})})}function yN(){const i=Fi(),{isAuthenticated:e}=BT();return v.jsxs(J,{sx:{position:"relative",overflow:"hidden",minHeight:"80vh"},children:[v.jsx(J,{sx:{position:"absolute",top:0,left:"-10%",width:"70%",height:"120%",bgcolor:"#FFFBEA",borderRadius:"50% 50% 0 0",transform:"rotate(-10deg)"}}),v.jsx(J,{sx:{position:"absolute",top:0,right:"-5%",width:"50%",height:"60%",bgcolor:"#4DCCA6",borderRadius:"0 0 50% 50%"}}),v.jsxs(Oo,{sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center",py:8},children:[v.jsxs(J,{sx:{flex:1,pr:4},children:[v.jsx(Y,{variant:"h3",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Unlock Insights from Your Texts"}),v.jsx(Y,{variant:"h6",gutterBottom:!0,children:"Explore and annotate your documents with the power of TEI."}),v.jsx(Y,{variant:"body1",paragraph:!0,children:"FocusApp gives you an interactive interface to view, search, and edit TEI-encoded manuscripts. Structure your analysis, customize annotations, and export your work in one place."}),e?v.jsx(ot,{variant:"contained",size:"large",startIcon:v.jsx(Em,{}),onClick:()=>i("/"),children:"Go to Home"}):v.jsx(ot,{variant:"contained",size:"large",onClick:()=>i("/auth/signup"),children:"Get Started"})]}),v.jsx(J,{sx:{flex:1,display:"flex",gap:3,flexWrap:"wrap"},children:gN.map(n=>v.jsx(On,{sx:{boxShadow:3,flex:"1 1 300px",minWidth:"250px"},children:v.jsxs(Tm,{sx:{textAlign:"center"},children:[n.icon,v.jsx(Y,{variant:"h6",gutterBottom:!0,children:n.title}),v.jsx(Y,{variant:"body2",children:n.description})]})},n.title))})]})]})}function _N(){return v.jsxs(J,{sx:{py:4,textAlign:"center"},children:[v.jsx(Y,{variant:"caption",display:"block",gutterBottom:!0,children:"As featured in"}),v.jsx(J,{component:"img",src:"/logos/tei-consortium.svg",alt:"TEI Consortium",sx:{mx:2,height:32}}),v.jsx(J,{component:"img",src:"/logos/dh-logo.svg",alt:"Digital Humanities",sx:{mx:2,height:32}}),v.jsx(J,{component:"img",src:"/logos/library-logo.svg",alt:"Scholarly Libraries",sx:{mx:2,height:32}})]})}function bN(){return v.jsxs(v.Fragment,{children:[v.jsx(vN,{}),v.jsx(yN,{}),v.jsx(_N,{})]})}const xN=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Bo(i,e,n){const a=EN(i),{webkitRelativePath:o}=i,c=typeof e=="string"?e:typeof o=="string"&&o.length>0?o:`./${i.name}`;return typeof a.path!="string"&&Ix(a,"path",c),Ix(a,"relativePath",c),a}function EN(i){const{name:e}=i;if(e&&e.lastIndexOf(".")!==-1&&!i.type){const a=e.split(".").pop().toLowerCase(),o=xN.get(a);o&&Object.defineProperty(i,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return i}function Ix(i,e,n){Object.defineProperty(i,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const TN=[".DS_Store","Thumbs.db"];function wN(i){return ws(this,void 0,void 0,function*(){return Qh(i)&&AN(i.dataTransfer)?CN(i.dataTransfer,i.type):SN(i)?RN(i):Array.isArray(i)&&i.every(e=>"getFile"in e&&typeof e.getFile=="function")?IN(i):[]})}function AN(i){return Qh(i)}function SN(i){return Qh(i)&&Qh(i.target)}function Qh(i){return typeof i=="object"&&i!==null}function RN(i){return vm(i.target.files).map(e=>Bo(e))}function IN(i){return ws(this,void 0,void 0,function*(){return(yield Promise.all(i.map(n=>n.getFile()))).map(n=>Bo(n))})}function CN(i,e){return ws(this,void 0,void 0,function*(){if(i.items){const n=vm(i.items).filter(o=>o.kind==="file");if(e!=="drop")return n;const a=yield Promise.all(n.map(DN));return Cx(FT(a))}return Cx(vm(i.files).map(n=>Bo(n)))})}function Cx(i){return i.filter(e=>TN.indexOf(e.name)===-1)}function vm(i){if(i===null)return[];const e=[];for(let n=0;n<i.length;n++){const a=i[n];e.push(a)}return e}function DN(i){if(typeof i.webkitGetAsEntry!="function")return Dx(i);const e=i.webkitGetAsEntry();return e&&e.isDirectory?qT(e):Dx(i,e)}function FT(i){return i.reduce((e,n)=>[...e,...Array.isArray(n)?FT(n):[n]],[])}function Dx(i,e){return ws(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof i.getAsFileSystemHandle=="function"){const c=yield i.getAsFileSystemHandle();if(c===null)throw new Error(`${i} is not a File`);if(c!==void 0){const d=yield c.getFile();return d.handle=c,Bo(d)}}const a=i.getAsFile();if(!a)throw new Error(`${i} is not a File`);return Bo(a,(n=e?.fullPath)!==null&&n!==void 0?n:void 0)})}function ON(i){return ws(this,void 0,void 0,function*(){return i.isDirectory?qT(i):kN(i)})}function qT(i){const e=i.createReader();return new Promise((n,a)=>{const o=[];function c(){e.readEntries(d=>ws(this,void 0,void 0,function*(){if(d.length){const p=Promise.all(d.map(ON));o.push(p),c()}else try{const p=yield Promise.all(o);n(p)}catch(p){a(p)}}),d=>{a(d)})}c()})}function kN(i){return ws(this,void 0,void 0,function*(){return new Promise((e,n)=>{i.file(a=>{const o=Bo(a,i.fullPath);e(o)},a=>{n(a)})})})}var hh={},Ox;function NN(){return Ox||(Ox=1,hh.__esModule=!0,hh.default=function(i,e){if(i&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var a=i.name||"",o=(i.type||"").toLowerCase(),c=o.replace(/\/.*$/,"");return n.some(function(d){var p=d.trim().toLowerCase();return p.charAt(0)==="."?a.toLowerCase().endsWith(p):p.endsWith("/*")?c===p.replace(/\/.*$/,""):o===p})}return!0}),hh}var MN=NN();const Lp=nS(MN);function kx(i){return VN(i)||PN(i)||GT(i)||jN()}function jN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PN(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function VN(i){if(Array.isArray(i))return ym(i)}function Nx(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,a)}return n}function Mx(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nx(Object(n),!0).forEach(function(a){HT(i,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(n,a))})}return i}function HT(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Tc(i,e){return zN(i)||LN(i,e)||GT(i,e)||UN()}function UN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GT(i,e){if(i){if(typeof i=="string")return ym(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ym(i,e)}}function ym(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=i[n];return a}function LN(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var a=[],o=!0,c=!1,d,p;try{for(n=n.call(i);!(o=(d=n.next()).done)&&(a.push(d.value),!(e&&a.length===e));o=!0);}catch(g){c=!0,p=g}finally{try{!o&&n.return!=null&&n.return()}finally{if(c)throw p}}return a}}function zN(i){if(Array.isArray(i))return i}var BN=typeof Lp=="function"?Lp:Lp.default,FN="file-invalid-type",qN="file-too-large",HN="file-too-small",GN="too-many-files",KN=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),a=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:FN,message:"File type must be ".concat(a)}},jx=function(e){return{code:qN,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Px=function(e){return{code:HN,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},QN={code:GN,message:"Too many files"};function KT(i,e){var n=i.type==="application/x-moz-file"||BN(i,e);return[n,n?null:KN(e)]}function QT(i,e,n){if(ds(i.size))if(ds(e)&&ds(n)){if(i.size>n)return[!1,jx(n)];if(i.size<e)return[!1,Px(e)]}else{if(ds(e)&&i.size<e)return[!1,Px(e)];if(ds(n)&&i.size>n)return[!1,jx(n)]}return[!0,null]}function ds(i){return i!=null}function YN(i){var e=i.files,n=i.accept,a=i.minSize,o=i.maxSize,c=i.multiple,d=i.maxFiles,p=i.validator;return!c&&e.length>1||c&&d>=1&&e.length>d?!1:e.every(function(g){var _=KT(g,n),x=Tc(_,1),S=x[0],w=QT(g,a,o),U=Tc(w,1),F=U[0],G=p?p(g):null;return S&&F&&!G})}function Yh(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function dh(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!i.target&&!!i.target.files}function Vx(i){i.preventDefault()}function WN(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function XN(i){return i.indexOf("Edge/")!==-1}function $N(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return WN(i)||XN(i)}function ki(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return function(a){for(var o=arguments.length,c=new Array(o>1?o-1:0),d=1;d<o;d++)c[d-1]=arguments[d];return e.some(function(p){return!Yh(a)&&p&&p.apply(void 0,[a].concat(c)),Yh(a)})}}function ZN(){return"showOpenFilePicker"in window}function JN(i){if(ds(i)){var e=Object.entries(i).filter(function(n){var a=Tc(n,2),o=a[0],c=a[1],d=!0;return YT(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(c)||!c.every(WT))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(n,a){var o=Tc(a,2),c=o[0],d=o[1];return Mx(Mx({},n),{},HT({},c,d))},{});return[{description:"Files",accept:e}]}return i}function e4(i){if(ds(i))return Object.entries(i).reduce(function(e,n){var a=Tc(n,2),o=a[0],c=a[1];return[].concat(kx(e),[o],kx(c))},[]).filter(function(e){return YT(e)||WT(e)}).join(",")}function t4(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function n4(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}function YT(i){return i==="audio/*"||i==="video/*"||i==="image/*"||i==="text/*"||i==="application/*"||/\w+\/[-+.\w]+/g.test(i)}function WT(i){return/^.*\.[\w]+$/.test(i)}var i4=["children"],r4=["open"],a4=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],s4=["refKey","onChange","onClick"];function o4(i){return u4(i)||c4(i)||XT(i)||l4()}function l4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c4(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function u4(i){if(Array.isArray(i))return _m(i)}function zp(i,e){return f4(i)||d4(i,e)||XT(i,e)||h4()}function h4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XT(i,e){if(i){if(typeof i=="string")return _m(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _m(i,e)}}function _m(i,e){(e==null||e>i.length)&&(e=i.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=i[n];return a}function d4(i,e){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var a=[],o=!0,c=!1,d,p;try{for(n=n.call(i);!(o=(d=n.next()).done)&&(a.push(d.value),!(e&&a.length===e));o=!0);}catch(g){c=!0,p=g}finally{try{!o&&n.return!=null&&n.return()}finally{if(c)throw p}}return a}}function f4(i){if(Array.isArray(i))return i}function Ux(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,a)}return n}function ct(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ux(Object(n),!0).forEach(function(a){bm(i,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Ux(Object(n)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(n,a))})}return i}function bm(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Wh(i,e){if(i==null)return{};var n=p4(i,e),a,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)a=c[o],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(i,a)&&(n[a]=i[a])}return n}function p4(i,e){if(i==null)return{};var n={},a=Object.keys(i),o,c;for(c=0;c<a.length;c++)o=a[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Dg=ce.forwardRef(function(i,e){var n=i.children,a=Wh(i,i4),o=ZT(a),c=o.open,d=Wh(o,r4);return ce.useImperativeHandle(e,function(){return{open:c}},[c]),IA.createElement(ce.Fragment,null,n(ct(ct({},d),{},{open:c})))});Dg.displayName="Dropzone";var $T={disabled:!1,getFilesFromEvent:wN,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dg.defaultProps=$T;Dg.propTypes={children:nt.func,accept:nt.objectOf(nt.arrayOf(nt.string)),multiple:nt.bool,preventDropOnDocument:nt.bool,noClick:nt.bool,noKeyboard:nt.bool,noDrag:nt.bool,noDragEventsBubbling:nt.bool,minSize:nt.number,maxSize:nt.number,maxFiles:nt.number,disabled:nt.bool,getFilesFromEvent:nt.func,onFileDialogCancel:nt.func,onFileDialogOpen:nt.func,useFsAccessApi:nt.bool,autoFocus:nt.bool,onDragEnter:nt.func,onDragLeave:nt.func,onDragOver:nt.func,onDrop:nt.func,onDropAccepted:nt.func,onDropRejected:nt.func,onError:nt.func,validator:nt.func};var xm={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ZT(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ct(ct({},$T),i),n=e.accept,a=e.disabled,o=e.getFilesFromEvent,c=e.maxSize,d=e.minSize,p=e.multiple,g=e.maxFiles,_=e.onDragEnter,x=e.onDragLeave,S=e.onDragOver,w=e.onDrop,U=e.onDropAccepted,F=e.onDropRejected,G=e.onFileDialogCancel,q=e.onFileDialogOpen,ie=e.useFsAccessApi,oe=e.autoFocus,ae=e.preventDropOnDocument,ee=e.noClick,ge=e.noKeyboard,be=e.noDrag,D=e.noDragEventsBubbling,A=e.onError,C=e.validator,k=ce.useMemo(function(){return e4(n)},[n]),M=ce.useMemo(function(){return JN(n)},[n]),N=ce.useMemo(function(){return typeof q=="function"?q:Lx},[q]),R=ce.useMemo(function(){return typeof G=="function"?G:Lx},[G]),Oe=ce.useRef(null),Be=ce.useRef(null),K=ce.useReducer(m4,xm),te=zp(K,2),de=te[0],Se=te[1],He=de.isFocused,Et=de.isFileDialogActive,ke=ce.useRef(typeof window<"u"&&window.isSecureContext&&ie&&ZN()),xe=function(){!ke.current&&Et&&setTimeout(function(){if(Be.current){var fe=Be.current.files;fe.length||(Se({type:"closeDialog"}),R())}},300)};ce.useEffect(function(){return window.addEventListener("focus",xe,!1),function(){window.removeEventListener("focus",xe,!1)}},[Be,Et,R,ke]);var Je=ce.useRef([]),Ct=function(fe){Oe.current&&Oe.current.contains(fe.target)||(fe.preventDefault(),Je.current=[])};ce.useEffect(function(){return ae&&(document.addEventListener("dragover",Vx,!1),document.addEventListener("drop",Ct,!1)),function(){ae&&(document.removeEventListener("dragover",Vx),document.removeEventListener("drop",Ct))}},[Oe,ae]),ce.useEffect(function(){return!a&&oe&&Oe.current&&Oe.current.focus(),function(){}},[Oe,oe,a]);var zt=ce.useCallback(function(re){A?A(re):console.error(re)},[A]),Nn=ce.useCallback(function(re){re.preventDefault(),re.persist(),Xn(re),Je.current=[].concat(o4(Je.current),[re.target]),dh(re)&&Promise.resolve(o(re)).then(function(fe){if(!(Yh(re)&&!D)){var Re=fe.length,Ee=Re>0&&YN({files:fe,accept:k,minSize:d,maxSize:c,multiple:p,maxFiles:g,validator:C}),et=Re>0&&!Ee;Se({isDragAccept:Ee,isDragReject:et,isDragActive:!0,type:"setDraggedFiles"}),_&&_(re)}}).catch(function(fe){return zt(fe)})},[o,_,zt,D,k,d,c,p,g,C]),Hi=ce.useCallback(function(re){re.preventDefault(),re.persist(),Xn(re);var fe=dh(re);if(fe&&re.dataTransfer)try{re.dataTransfer.dropEffect="copy"}catch{}return fe&&S&&S(re),!1},[S,D]),Wn=ce.useCallback(function(re){re.preventDefault(),re.persist(),Xn(re);var fe=Je.current.filter(function(Ee){return Oe.current&&Oe.current.contains(Ee)}),Re=fe.indexOf(re.target);Re!==-1&&fe.splice(Re,1),Je.current=fe,!(fe.length>0)&&(Se({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),dh(re)&&x&&x(re))},[Oe,x,D]),En=ce.useCallback(function(re,fe){var Re=[],Ee=[];re.forEach(function(et){var ft=KT(et,k),$n=zp(ft,2),Ma=$n[0],Zn=$n[1],Jn=QT(et,d,c),Mn=zp(Jn,2),on=Mn[0],mi=Mn[1],ei=C?C(et):null;if(Ma&&on&&!ei)Re.push(et);else{var Ki=[Zn,mi];ei&&(Ki=Ki.concat(ei)),Ee.push({file:et,errors:Ki.filter(function(ja){return ja})})}}),(!p&&Re.length>1||p&&g>=1&&Re.length>g)&&(Re.forEach(function(et){Ee.push({file:et,errors:[QN]})}),Re.splice(0)),Se({acceptedFiles:Re,fileRejections:Ee,isDragReject:Ee.length>0,type:"setFiles"}),w&&w(Re,Ee,fe),Ee.length>0&&F&&F(Ee,fe),Re.length>0&&U&&U(Re,fe)},[Se,p,k,d,c,g,w,U,F,C]),mn=ce.useCallback(function(re){re.preventDefault(),re.persist(),Xn(re),Je.current=[],dh(re)&&Promise.resolve(o(re)).then(function(fe){Yh(re)&&!D||En(fe,re)}).catch(function(fe){return zt(fe)}),Se({type:"reset"})},[o,En,zt,D]),gn=ce.useCallback(function(){if(ke.current){Se({type:"openDialog"}),N();var re={multiple:p,types:M};window.showOpenFilePicker(re).then(function(fe){return o(fe)}).then(function(fe){En(fe,null),Se({type:"closeDialog"})}).catch(function(fe){t4(fe)?(R(fe),Se({type:"closeDialog"})):n4(fe)?(ke.current=!1,Be.current?(Be.current.value=null,Be.current.click()):zt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):zt(fe)});return}Be.current&&(Se({type:"openDialog"}),N(),Be.current.value=null,Be.current.click())},[Se,N,R,ie,En,zt,M,p]),di=ce.useCallback(function(re){!Oe.current||!Oe.current.isEqualNode(re.target)||(re.key===" "||re.key==="Enter"||re.keyCode===32||re.keyCode===13)&&(re.preventDefault(),gn())},[Oe,gn]),fi=ce.useCallback(function(){Se({type:"focus"})},[]),Dr=ce.useCallback(function(){Se({type:"blur"})},[]),ka=ce.useCallback(function(){ee||($N()?setTimeout(gn,0):gn())},[ee,gn]),Dt=function(fe){return a?null:fe},Na=function(fe){return ge?null:Dt(fe)},pi=function(fe){return be?null:Dt(fe)},Xn=function(fe){D&&fe.stopPropagation()},Gi=ce.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=re.refKey,Re=fe===void 0?"ref":fe,Ee=re.role,et=re.onKeyDown,ft=re.onFocus,$n=re.onBlur,Ma=re.onClick,Zn=re.onDragEnter,Jn=re.onDragOver,Mn=re.onDragLeave,on=re.onDrop,mi=Wh(re,a4);return ct(ct(bm({onKeyDown:Na(ki(et,di)),onFocus:Na(ki(ft,fi)),onBlur:Na(ki($n,Dr)),onClick:Dt(ki(Ma,ka)),onDragEnter:pi(ki(Zn,Nn)),onDragOver:pi(ki(Jn,Hi)),onDragLeave:pi(ki(Mn,Wn)),onDrop:pi(ki(on,mn)),role:typeof Ee=="string"&&Ee!==""?Ee:"presentation"},Re,Oe),!a&&!ge?{tabIndex:0}:{}),mi)}},[Oe,di,fi,Dr,ka,Nn,Hi,Wn,mn,ge,be,a]),Qo=ce.useCallback(function(re){re.stopPropagation()},[]),Or=ce.useMemo(function(){return function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=re.refKey,Re=fe===void 0?"ref":fe,Ee=re.onChange,et=re.onClick,ft=Wh(re,s4),$n=bm({accept:k,multiple:p,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Dt(ki(Ee,mn)),onClick:Dt(ki(et,Qo)),tabIndex:-1},Re,Be);return ct(ct({},$n),ft)}},[Be,n,p,mn,a]);return ct(ct({},de),{},{isFocused:He&&!a,getRootProps:Gi,getInputProps:Or,rootRef:Oe,inputRef:Be,open:Dt(gn)})}function m4(i,e){switch(e.type){case"focus":return ct(ct({},i),{},{isFocused:!0});case"blur":return ct(ct({},i),{},{isFocused:!1});case"openDialog":return ct(ct({},xm),{},{isFileDialogActive:!0});case"closeDialog":return ct(ct({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":return ct(ct({},i),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ct(ct({},i),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ct({},xm);default:return i}}function Lx(){}const g4=({open:i,onClose:e,userId:n})=>{const a=Ra(),[o,c]=ce.useState(0),[d,p]=ce.useState(!1),[g,_]=ce.useState([]),[x,S]=ce.useState(null),w=ce.useCallback(async ee=>{if(ee.length!==0){p(!0),S(null),_([]),c(0);try{for(let ge=0;ge<ee.length;ge++){const be=ee[ge],D=setInterval(()=>{c(A=>{const C=Math.random()*20;return Math.min(A+C,90)})},200);await a(Eh({file:be,userId:n})).unwrap(),clearInterval(D),c(100),_(A=>[...A,be.name]),ge<ee.length-1&&c(0)}setTimeout(()=>{e(),p(!1),c(0),_([])},1500)}catch(ge){S(ge instanceof Error?ge.message:"Upload failed"),p(!1),c(0)}}},[a,n,e]),{getRootProps:U,getInputProps:F,isDragActive:G,acceptedFiles:q}=ZT({onDrop:w,multiple:!0,disabled:d}),ie=ee=>ee.startsWith("image/")?v.jsx(wm,{sx:{fontSize:24,color:"primary.main"}}):ee==="application/pdf"?v.jsx(Am,{sx:{fontSize:24,color:"error.main"}}):ee.startsWith("text/")?v.jsx(Sm,{sx:{fontSize:24,color:"info.main"}}):v.jsx(Rm,{sx:{fontSize:24,color:"grey.500"}}),oe=ee=>{if(ee===0)return"0 Bytes";const ge=1024,be=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(ee)/Math.log(ge));return parseFloat((ee/Math.pow(ge,D)).toFixed(2))+" "+be[D]},ae=()=>{d||(e(),c(0),_([]),S(null))};return v.jsxs(CA,{open:i,onClose:ae,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #fefefe 0%, #fafaf9 100%)"}},children:[v.jsxs(DA,{sx:{pb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:2},children:[v.jsx(ac,{sx:{fontSize:28,color:"secondary.main"}}),v.jsx(Y,{variant:"h5",sx:{fontWeight:"bold",color:"text.primary"},children:"Upload Files"})]}),v.jsx(si,{onClick:ae,disabled:d,sx:{color:"text.secondary"},children:v.jsx(OA,{})})]}),v.jsxs(kA,{sx:{pt:2},children:[x&&v.jsx(xr,{severity:"error",sx:{mb:3},children:x}),d?v.jsxs(J,{sx:{textAlign:"center",py:4},children:[v.jsx(Y,{variant:"h6",sx:{mb:3,color:"text.primary"},children:"Uploading Files..."}),v.jsx(Jl,{variant:"determinate",value:o,sx:{height:8,borderRadius:4,mb:3,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:"secondary.main"}}}),v.jsxs(Y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[o.toFixed(0),"% Complete"]}),g.length>0&&v.jsxs(J,{sx:{mt:3},children:[v.jsx(Y,{variant:"subtitle2",sx:{mb:2,color:"text.primary"},children:"Successfully uploaded:"}),g.map((ee,ge)=>v.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:1,mb:1,p:1,bgcolor:"success.main",color:"white",borderRadius:2},children:[v.jsx(NA,{sx:{fontSize:20}}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"medium"},children:ee})]},ge))]})]}):v.jsxs(J,{children:[v.jsxs(J,{...U(),sx:{border:"2px dashed",borderColor:G?"secondary.main":"grey.300",borderRadius:3,p:4,textAlign:"center",cursor:"pointer",bgcolor:G?"rgba(251, 191, 36, 0.05)":"rgba(0,0,0,0.02)",transition:"all 0.3s ease","&:hover":{borderColor:"secondary.main",bgcolor:"rgba(251, 191, 36, 0.05)"}},children:[v.jsx("input",{...F()}),v.jsx(ac,{sx:{fontSize:64,color:G?"secondary.main":"grey.400",mb:2}}),v.jsx(Y,{variant:"h6",sx:{mb:1,color:"text.primary"},children:G?"Drop files here":"Drag & drop files here"}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"or click to select files"}),v.jsx(ot,{variant:"outlined",sx:{borderColor:"secondary.main",color:"secondary.main","&:hover":{borderColor:"secondary.dark",bgcolor:"secondary.main",color:"white"}},children:"Choose Files"})]}),q.length>0&&v.jsxs(J,{sx:{mt:3},children:[v.jsxs(Y,{variant:"subtitle2",sx:{mb:2,color:"text.primary"},children:["Selected Files (",q.length,"):"]}),v.jsx(J,{sx:{maxHeight:200,overflow:"auto"},children:q.map((ee,ge)=>v.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:2,p:2,mb:1,bgcolor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px solid",borderColor:"grey.200"},children:[ie(ee.type),v.jsxs(J,{sx:{flex:1},children:[v.jsx(Y,{variant:"body2",sx:{fontWeight:"medium"},children:ee.name}),v.jsx(Y,{variant:"caption",color:"text.secondary",children:oe(ee.size)})]}),v.jsx(fn,{label:ee.type.split("/")[1]?.toUpperCase()||"UNKNOWN",size:"small",variant:"outlined",sx:{borderRadius:2}})]},ge))})]})]})]}),v.jsxs(MA,{sx:{p:3,pt:1},children:[v.jsx(ot,{onClick:ae,disabled:d,sx:{color:"text.secondary"},children:"Cancel"}),!d&&q.length>0&&v.jsxs(ot,{variant:"contained",onClick:()=>w([...q]),startIcon:v.jsx(ac,{}),sx:{bgcolor:"secondary.main",color:"secondary.contrastText","&:hover":{bgcolor:"secondary.dark"}},children:["Upload ",q.length," File",q.length!==1?"s":""]})]})]})},Og=({message:i="Loading...",size:e=60,fullHeight:n=!1})=>v.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:n?"100vh":"auto",p:4,children:[v.jsx(pc,{size:e}),v.jsx(Y,{variant:"h6",sx:{mt:2,color:"text.secondary"},children:i})]}),v4=({userId:i})=>{const e=Ra(),n=Fi(),{files:a,isLoading:o,error:c}=wr(w=>w.files);ce.useEffect(()=>{i&&e(Th(i))},[e,i]);const d=w=>{window.confirm(`Are you sure you want to delete "${w}"?`)&&e(wh({fileName:w,userId:i}))},p=w=>{const U=document.createElement("a");U.href=w.url,U.download=w.name,document.body.appendChild(U),U.click(),document.body.removeChild(U)},g=w=>{n(`/detail?url=${encodeURIComponent(w.url)}&fileName=${encodeURIComponent(w.name)}`)},_=w=>w.startsWith("image/")?v.jsx(wm,{sx:{fontSize:32,color:"primary.main"}}):w==="application/pdf"?v.jsx(Am,{sx:{fontSize:32,color:"error.main"}}):w.startsWith("text/")?v.jsx(Sm,{sx:{fontSize:32,color:"info.main"}}):v.jsx(Rm,{sx:{fontSize:32,color:"grey.500"}}),x=w=>{if(w===0)return"0 Bytes";const U=1024,F=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(w)/Math.log(U));return parseFloat((w/Math.pow(U,G)).toFixed(2))+" "+F[G]},S=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o?v.jsx(Og,{message:"Loading files..."}):c?v.jsx(xr,{severity:"error",sx:{mb:2},children:c}):v.jsx(J,{children:a.length===0?v.jsxs(J,{sx:{textAlign:"center",py:6,bgcolor:"rgba(0,0,0,0.02)",borderRadius:3,border:"2px dashed",borderColor:"grey.300"},children:[v.jsx(ac,{sx:{fontSize:64,color:"grey.400",mb:2}}),v.jsx(Y,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No files uploaded yet"}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Start by uploading your first file to get organized"})]}):v.jsx(ut,{container:!0,spacing:3,children:a.map(w=>v.jsx(ut,{size:{xs:12,sm:6,md:4,lg:3},children:v.jsxs(On,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.15)"}},children:[v.jsxs(Tm,{sx:{flexGrow:1,textAlign:"center",p:3,"&:last-child":{pb:3}},children:[v.jsx(J,{sx:{mb:3,display:"flex",justifyContent:"center",alignItems:"center",width:64,height:64,mx:"auto",bgcolor:"rgba(0,0,0,0.02)",borderRadius:3},children:_(w.type)}),v.jsx(Y,{variant:"h6",noWrap:!0,gutterBottom:!0,sx:{cursor:"pointer",color:"primary.main",fontWeight:"bold",mb:2,"&:hover":{color:"primary.dark",textDecoration:"underline"}},onClick:()=>g(w),title:"Click to view file details",children:w.name}),v.jsxs(J,{sx:{mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:x(w.size)}),v.jsx(fn,{label:w.type.split("/")[1]?.toUpperCase()||"UNKNOWN",size:"small",variant:"outlined",sx:{mb:1,borderRadius:2,fontWeight:"medium"}}),v.jsx(Y,{variant:"caption",color:"text.secondary",display:"block",children:S(w.createdAt)})]})]}),v.jsxs(J,{sx:{p:2,pt:0,display:"flex",justifyContent:"center",gap:1,borderTop:"1px solid",borderColor:"grey.100"},children:[v.jsx(da,{title:"View Details",children:v.jsx(si,{size:"small",onClick:()=>g(w),sx:{color:"primary.main","&:hover":{bgcolor:"primary.main",color:"white"}},children:v.jsx(Gx,{})})}),v.jsx(da,{title:"Download",children:v.jsx(si,{size:"small",onClick:()=>p(w),sx:{color:"secondary.main","&:hover":{bgcolor:"secondary.main",color:"white"}},children:v.jsx(Kx,{})})}),v.jsx(da,{title:"Delete",children:v.jsx(si,{size:"small",onClick:()=>d(w.name),sx:{color:"error.main","&:hover":{bgcolor:"error.main",color:"white"}},children:v.jsx(jA,{})})})]})]})},w.id))})})},y4=()=>{const i=wr(G=>G.user.user),{files:e}=wr(G=>G.files),n=Ra(),a=Fi(),[o,c]=ce.useState(!1),[d,p]=ce.useState(null),g=()=>{c(!0)},_=G=>{p(G.currentTarget)},x=()=>{p(null)},S=async()=>{try{await $m(Sa),n(Xh()),a("/welcome",{replace:!0})}catch(G){console.error("Error signing out:",G)}};if(!i)return null;const w=e.length,U=e.reduce((G,q)=>G+(q.size||0),0),F=e.slice(0,3);return v.jsxs(J,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f5f4 0%, #e7e5e4 100%)",p:3},children:[v.jsxs(On,{sx:{maxWidth:1400,mx:"auto",background:"linear-gradient(135deg, #fefefe 0%, #fafaf9 100%)",borderRadius:4,overflow:"hidden"},children:[v.jsxs(J,{sx:{p:3,borderBottom:"1px solid rgba(0, 0, 0, 0.06)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsx(ot,{variant:"contained",sx:{bgcolor:"white",color:"primary.main",borderRadius:2,px:3,py:1,fontWeight:"bold",fontSize:"1.1rem",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:"FocusApp"}),v.jsx(J,{sx:{display:"flex",gap:1},children:[{label:"Dashboard",active:!0},{label:"Files",active:!1},{label:"Analytics",active:!1},{label:"Settings",active:!1}].map(G=>v.jsx(ot,{variant:G.active?"contained":"text",sx:{bgcolor:G.active?"primary.main":"transparent",color:G.active?"white":"text.primary",borderRadius:2,px:2,py:1,minWidth:"auto","&:hover":{bgcolor:G.active?"primary.dark":"rgba(0, 0, 0, 0.04)"}},children:G.label},G.label))}),v.jsxs(J,{sx:{display:"flex",gap:1},children:[v.jsx(si,{sx:{color:"text.primary"},children:v.jsx(PA,{})}),v.jsx(si,{sx:{color:"text.primary"},children:v.jsx(VA,{})}),v.jsx(si,{sx:{color:"text.primary"},onClick:_,children:v.jsx(Qx,{})})]})]}),v.jsxs(UA,{anchorEl:d,open:!!d,onClose:x,PaperProps:{sx:{mt:1,minWidth:280,borderRadius:3,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",border:"1px solid rgba(0, 0, 0, 0.08)"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[v.jsxs(J,{sx:{p:3,textAlign:"center",borderBottom:"1px solid rgba(0, 0, 0, 0.08)"},children:[v.jsx(Ah,{sx:{width:64,height:64,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"1.5rem"},children:i.email?.charAt(0).toUpperCase()}),v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:i.email?.split("@")[0]}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:i.email})]}),v.jsxs(_p,{sx:{py:2,px:3},children:[v.jsx(bp,{children:v.jsx(LA,{sx:{color:"primary.main"}})}),v.jsx(xp,{primary:"Account Details",secondary:"View and edit your profile"})]}),v.jsxs(_p,{sx:{py:2,px:3},children:[v.jsx(bp,{children:v.jsx(zA,{sx:{color:"primary.main"}})}),v.jsx(xp,{primary:"Email Settings",secondary:"Manage notifications and preferences"})]}),v.jsx(ko,{sx:{my:1}}),v.jsxs(_p,{onClick:S,sx:{py:2,px:3,color:"error.main","&:hover":{bgcolor:"error.main",color:"white"}},children:[v.jsx(bp,{children:v.jsx(BA,{sx:{color:"inherit"}})}),v.jsx(xp,{primary:"Sign Out",secondary:"Log out of your account"})]})]}),v.jsx(J,{sx:{p:3},children:v.jsxs(ut,{container:!0,spacing:3,children:[v.jsxs(ut,{size:{xs:12,lg:8},children:[v.jsxs(On,{sx:{mb:3,p:3},children:[v.jsxs(Y,{variant:"h4",sx:{fontWeight:"bold",mb:3,color:"text.primary"},children:["Welcome in, ",i.email?.split("@")[0]]}),v.jsxs(ut,{container:!0,spacing:2,children:[v.jsxs(ut,{size:{xs:6,sm:3},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Files Uploaded"}),v.jsx(Jl,{variant:"determinate",value:Math.min(w/50*100,100),sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:"primary.main"}}}),v.jsxs(Y,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[w,"/50 files"]})]}),v.jsxs(ut,{size:{xs:6,sm:3},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Storage Used"}),v.jsx(Jl,{variant:"determinate",value:Math.min(U/(100*1024*1024)*100,100),sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:"secondary.main"}}}),v.jsxs(Y,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[Math.round(U/(1024*1024))," MB / 100 MB"]})]}),v.jsxs(ut,{size:{xs:6,sm:3},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Recent Activity"}),v.jsx(Jl,{variant:"determinate",value:60,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:"grey.400",backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,0.3) 4px, rgba(255,255,255,0.3) 8px)"}}}),v.jsx(Y,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"60% active"})]}),v.jsxs(ut,{size:{xs:6,sm:3},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Performance"}),v.jsx(Jl,{variant:"determinate",value:85,sx:{height:8,borderRadius:4,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:"grey.300"}}}),v.jsx(Y,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"85% optimal"})]})]})]}),v.jsx(On,{sx:{mb:3,p:3,bgcolor:"rgba(251, 191, 36, 0.1)"},children:v.jsxs(ut,{container:!0,spacing:3,children:[v.jsx(ut,{size:{xs:12,sm:4},children:v.jsxs(J,{sx:{textAlign:"center"},children:[v.jsx(qx,{sx:{fontSize:40,color:"primary.main",mb:1}}),v.jsx(Y,{variant:"h3",sx:{fontWeight:"bold",color:"text.primary"},children:w}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Total Files"})]})}),v.jsx(ut,{size:{xs:12,sm:4},children:v.jsxs(J,{sx:{textAlign:"center"},children:[v.jsx(FA,{sx:{fontSize:40,color:"primary.main",mb:1}}),v.jsx(Y,{variant:"h3",sx:{fontWeight:"bold",color:"text.primary"},children:Math.round(U/(1024*1024))}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:"MB Used"})]})}),v.jsx(ut,{size:{xs:12,sm:4},children:v.jsxs(J,{sx:{textAlign:"center"},children:[v.jsx(qA,{sx:{fontSize:40,color:"primary.main",mb:1}}),v.jsx(Y,{variant:"h3",sx:{fontWeight:"bold",color:"text.primary"},children:F.length}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Recent Files"})]})})]})}),v.jsxs(On,{sx:{mb:3,p:3},children:[v.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[v.jsx(Y,{variant:"h5",sx:{fontWeight:"bold",color:"text.primary"},children:"File Management"}),v.jsx(ot,{variant:"contained",startIcon:v.jsx(ac,{}),onClick:g,sx:{bgcolor:"secondary.main",color:"secondary.contrastText","&:hover":{bgcolor:"secondary.dark"}},children:"Upload Files"})]}),v.jsx(v4,{userId:i.uid})]})]}),v.jsx(ut,{size:{xs:12,lg:4},children:v.jsxs(On,{sx:{mb:3,p:3,textAlign:"center"},children:[v.jsx(Ah,{sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"2rem"},children:i.email?.charAt(0).toUpperCase()}),v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:i.email?.split("@")[0]}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"File Manager"}),v.jsx(fn,{label:`${w} files managed`,sx:{bgcolor:"primary.main",color:"white",fontWeight:"bold"}})]})})]})})]}),v.jsx(g4,{open:o,onClose:()=>c(!1),userId:i.uid})]})};class _4{xmlDoc=null;constructor(e){try{const n=new DOMParser;this.xmlDoc=n.parseFromString(e,"text/xml");const a=this.xmlDoc.querySelector("parsererror");if(a)throw new Error("XML parsing failed: "+a.textContent)}catch(n){throw console.error("Error parsing TEI XML:",n),n}}parse(){if(!this.xmlDoc)throw new Error("No XML document to parse");const e=[];this.xmlDoc.querySelectorAll("text").forEach(o=>{const c=this.parseTextSection(o);c&&e.push(c)});const a=this.parseMetadata();return{sections:e,metadata:a}}parseTextSection(e){const n=e.getAttribute("type")||"unknown",a=e.getAttribute("xml:lang")||"unknown",o=e.getAttribute("xml:id")||"unknown",c=[];return e.querySelectorAll("seg").forEach(p=>{const g=this.parseSegment(p);g&&c.push(g)}),{type:n,language:a,id:o,segments:c}}parseSegment(e){const n=e.getAttribute("xml:id")||"",a=this.extractTextContent(e),o=[],c=[];return e.querySelectorAll("w").forEach(g=>{const _=this.parseWord(g);_&&o.push(_)}),e.querySelectorAll("l").forEach(g=>{const _=g.getAttribute("xml:id")||"";if(_){const x=_.match(/\.(\d+)\.(\d+)/);if(x){const[,S,w]=x;c.push(`${S}.${w}`)}}}),{id:n,content:a,words:o,lineNumbers:c}}parseWord(e){const n=e.getAttribute("xml:id")||"",a=this.extractTextContent(e),o=[];return e.querySelectorAll("anchor").forEach(d=>{const p=d.getAttribute("xml:id")||"",g=d.textContent||"";o.push({id:p,content:g})}),{id:n,content:a,anchors:o}}parseMetadata(){const e=this.xmlDoc?.querySelector('title[type="main"]'),n=this.xmlDoc?.querySelector("author"),a=this.xmlDoc?.querySelector("editor"),o=this.xmlDoc?.querySelector("date"),c=this.xmlDoc?.querySelector('langUsage language[ana="source"]');return{title:e?.textContent?.trim()||"Unknown Title",author:n?.textContent?.trim()||"Unknown Author",editor:a?.textContent?.trim()||"Unknown Editor",date:o?.textContent?.trim()||"Unknown Date",language:c?.textContent?.trim()||"Unknown Language"}}extractTextContent(e){let n="";const a=e.querySelectorAll("lb");if(a.length>0){const o=e.cloneNode(!0);a.forEach(c=>{c.replaceWith(document.createTextNode(`
`))}),n=o.textContent||""}else n=e.textContent||"";return n.trim()}getSegmentsByIdPattern(e){const n=[];return this.xmlDoc?.querySelectorAll(`seg[xml\\:id*="${e}"]`).forEach(a=>{const o=this.parseSegment(a);o&&n.push(o)}),n}findCorrespondingSegments(e){const n=[],a=e.match(/\.(\d+\.\d+)$/);if(a){const o=a[1];this.xmlDoc?.querySelectorAll(`seg[xml\\:id*="${o}"]`).forEach(c=>{const d=this.parseSegment(c);d&&n.push(d)})}return n}}const b4=i=>new _4(i).parse(),x4=i=>{const e=i.match(/\.(\d+\.\d+)$/);return e?e[1]:null},E4=i=>{const e=new Map;return i.forEach(n=>{n.segments.forEach(a=>{const o=x4(a.id);o&&(e.has(o)||e.set(o,[]),e.get(o).push(a))})}),e},T4=({word:i})=>{const e=()=>v.jsxs(J,{sx:{maxWidth:300,p:1},children:[v.jsx(Y,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1},children:i.content}),i.anchors.length>0&&v.jsxs(v.Fragment,{children:[v.jsx(ko,{sx:{my:1}}),v.jsx(Y,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Critical Apparatus:"}),i.anchors.map((n,a)=>v.jsxs(J,{sx:{mb:1},children:[v.jsxs(Y,{variant:"caption",sx:{fontWeight:"bold",color:"primary.main"},children:[n.id,":"]}),v.jsx(Y,{variant:"caption",sx:{ml:1},children:n.content||"No content"})]},a))]}),v.jsx(ko,{sx:{my:1}}),v.jsxs(Y,{variant:"caption",color:"text.secondary",children:["Word ID: ",i.id]})]});return v.jsx(da,{title:e(),arrow:!0,placement:"top",enterDelay:500,leaveDelay:200,PopperProps:{sx:{"& .MuiTooltip-tooltip":{bgcolor:"background.paper",color:"text.primary",border:"1px solid",borderColor:"divider",boxShadow:3,fontSize:"0.75rem",maxWidth:350}}},children:v.jsx(fn,{label:i.content,size:"small",variant:"outlined",sx:{cursor:"help",borderColor:"primary.main",color:"primary.main",fontWeight:"bold","&:hover":{bgcolor:"primary.main",color:"white"},transition:"all 0.2s ease-in-out"}})})},w4=({section:i,segments:e,onSegmentClick:n,highlightedSegmentId:a})=>{const o=(_,x)=>{switch(_){case"source":return x==="la"?"Latin Source":"Source Text";case"translation":return x==="it"?"Italian Translation":"Translation";case"commentary":return x==="it"?"Italian Commentary":"Commentary";default:return"Text Section"}},c=_=>{switch(_){case"source":return"primary.main";case"translation":return"secondary.main";case"commentary":return"success.main";default:return"grey.500"}},d=_=>{if(!_.content)return null;const x=_.content.split(`
`);return v.jsx(J,{children:x.map((S,w)=>v.jsx(Y,{variant:"body2",sx:{mb:w<x.length-1?1:0,lineHeight:1.6,whiteSpace:"pre-wrap"},children:S},w))})},p=_=>_.words.length===0?null:v.jsxs(J,{sx:{mt:1},children:[v.jsx(Y,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Annotated words:"}),v.jsx(J,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:_.words.map(x=>v.jsx(T4,{word:x},x.id))})]}),g=_=>_.lineNumbers.length===0?null:v.jsxs(J,{sx:{mt:1},children:[v.jsx(Y,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Lines:"}),v.jsx(J,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:_.lineNumbers.map((x,S)=>v.jsx(fn,{label:x,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:"20px","& .MuiChip-label":{px:1}}},S))})]});return v.jsxs(J,{sx:{height:"100%"},children:[v.jsxs(Li,{elevation:2,sx:{p:2,mb:2,bgcolor:"background.paper",border:`2px solid ${c(i.type)}`,borderRadius:2},children:[v.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",color:c(i.type)},children:o(i.type,i.language)}),v.jsx(fn,{label:i.language.toUpperCase(),size:"small",sx:{bgcolor:c(i.type),color:"white",fontWeight:"bold"}})]}),v.jsxs(Y,{variant:"body2",color:"text.secondary",children:[i.segments.length," segments"]})]}),v.jsx(J,{sx:{height:"calc(100% - 120px)",overflow:"auto"},children:e.map(_=>v.jsxs(Li,{elevation:1,sx:{p:2,mb:2,cursor:n?"pointer":"default",border:a===_.id?`2px solid ${c(i.type)}`:"1px solid",borderColor:a===_.id?c(i.type):"divider",bgcolor:a===_.id?"action.hover":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:2,transform:"translateY(-1px)"}},onClick:()=>n?.(_.id),children:[v.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[v.jsx(Y,{variant:"subtitle2",sx:{fontWeight:"bold",color:c(i.type),fontFamily:"monospace"},children:_.id}),_.lineNumbers.length>0&&v.jsx(fn,{label:`${_.lineNumbers.length} lines`,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}})]}),v.jsx(ko,{sx:{mb:1.5}}),d(_),p(_),g(_)]},_.id))})]})},A4=({parsedDocument:i,isLoading:e=!1,error:n=null})=>{const[a,o]=ce.useState(null),[c,d]=ce.useState(!1),[p,g]=ce.useState(1),_=ce.useMemo(()=>E4(i.sections),[i.sections]),x=ce.useMemo(()=>Array.from(_.keys()).sort((ie,oe)=>{const[ae,ee]=ie.split(".").map(Number),[ge,be]=oe.split(".").map(Number);return ae!==ge?ae-ge:ee-be}),[_]),S=q=>{o(q),setTimeout(()=>{o(null)},3e3)},w=()=>{d(!c)},U=()=>{g(q=>Math.min(q+.1,2))},F=()=>{g(q=>Math.max(q-.1,.5))},G=()=>{g(1)};return e?v.jsx(J,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:4},children:v.jsx(pc,{})}):n?v.jsx(xr,{severity:"error",sx:{m:2},children:n}):i.sections.length?v.jsxs(J,{sx:{height:c?"100vh":"auto",bgcolor:"background.default",p:c?0:2,overflow:"hidden"},children:[v.jsxs(Li,{elevation:2,sx:{p:2,mb:2,bgcolor:"background.paper",borderRadius:2},children:[v.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[v.jsxs(J,{children:[v.jsx(Y,{variant:"h5",sx:{fontWeight:"bold",mb:1},children:i.metadata.title}),v.jsxs(Y,{variant:"body2",color:"text.secondary",children:["by ",i.metadata.author,"  Edited by ",i.metadata.editor,"  ",i.metadata.date]})]}),v.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:1},children:[v.jsx(fn,{label:i.metadata.language,size:"small",sx:{fontWeight:"bold"}}),v.jsx(da,{title:"Zoom In",children:v.jsx(si,{size:"small",onClick:U,children:v.jsx(HA,{})})}),v.jsx(da,{title:"Zoom Out",children:v.jsx(si,{size:"small",onClick:F,children:v.jsx(GA,{})})}),v.jsx(da,{title:"Reset Zoom",children:v.jsx(si,{size:"small",onClick:G,children:v.jsx(Yx,{})})}),v.jsx(ko,{orientation:"vertical",flexItem:!0}),v.jsx(da,{title:c?"Exit Fullscreen":"Enter Fullscreen",children:v.jsx(si,{size:"small",onClick:w,children:c?v.jsx(KA,{}):v.jsx(QA,{})})})]})]}),v.jsxs(J,{sx:{display:"flex",alignItems:"center",gap:2},children:[v.jsxs(Y,{variant:"body2",color:"text.secondary",children:[i.sections.length," text sections  ",x.length," segments"]}),a&&v.jsx(fn,{label:`Highlighted: ${a}`,size:"small",color:"primary",variant:"outlined"})]})]}),v.jsx(J,{sx:{height:c?"calc(100vh - 120px)":"auto",overflow:"auto",transform:`scale(${p})`,transformOrigin:"top left",transition:"transform 0.2s ease-in-out"},children:v.jsx(ut,{container:!0,spacing:3,sx:{minHeight:"100%"},children:i.sections.map(q=>v.jsx(ut,{size:{xs:12,lg:12/i.sections.length},sx:{minHeight:"100%"},children:v.jsx(w4,{section:q,segments:q.segments,onSegmentClick:S,highlightedSegmentId:a||void 0})},q.id))})}),v.jsx(Li,{elevation:1,sx:{p:2,mt:2,bgcolor:"background.paper",borderRadius:2},children:v.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[v.jsxs(Y,{variant:"body2",color:"text.secondary",children:["TEI XML Document Viewer  Zoom: ",Math.round(p*100),"%"]}),v.jsx(J,{sx:{display:"flex",gap:1},children:v.jsx(Y,{variant:"caption",color:"text.secondary",children:"Click on segments to highlight corresponding content across columns"})})]})})]}):v.jsx(xr,{severity:"warning",sx:{m:2},children:"No text sections found in the document."})};function Bp(i){const{children:e,value:n,index:a,...o}=i;return v.jsx("div",{role:"tabpanel",hidden:n!==a,id:`file-tabpanel-${a}`,"aria-labelledby":`file-tab-${a}`,...o,children:n===a&&v.jsx(J,{sx:{pt:3},children:e})})}const S4=()=>{const[i]=iS(),e=Fi(),[n,a]=ce.useState(""),[o,c]=ce.useState(!0),[d,p]=ce.useState(null),[g,_]=ce.useState(null),[x,S]=ce.useState(0),[w,U]=ce.useState(null),[F,G]=ce.useState(null),q=wr(N=>N.user.user),ie=i.get("url"),oe=i.get("fileName"),ae=ce.useMemo(()=>g?.type==="text/xml"||oe?.endsWith(".xml"),[g?.type,oe]),ee=ce.useMemo(()=>ae&&n.includes("<TEI"),[ae,n]);ce.useEffect(()=>{if(!ie){p("No file URL provided"),c(!1);return}(async()=>{try{c(!0),p(null),G(null);const R=await fetch(ie);if(!R.ok)throw new Error(`Failed to fetch file: ${R.statusText}`);const Oe=await R.text();a(Oe);const Be=ie.split("/"),K=Be[Be.length-1];if(_({name:oe||K,type:R.headers.get("content-type")||"text/plain",size:R.headers.get("content-length")||"0",lastModified:R.headers.get("last-modified")||new Date().toISOString()}),ee)try{const te=b4(Oe);U(te)}catch(te){console.error("TEI parsing error:",te),G(te instanceof Error?te.message:"Failed to parse TEI document")}}catch(R){p(R instanceof Error?R.message:"Failed to load file content")}finally{c(!1)}})()},[ie,oe,ee]);const ge=()=>{e("/")},be=()=>{if(ie){const N=document.createElement("a");N.href=ie,N.download=oe||"download",document.body.appendChild(N),N.click(),document.body.removeChild(N)}},D=()=>{ie&&window.open(ie,"_blank")},A=(N,R)=>{S(R)},C=N=>N.startsWith("image/")?v.jsx(wm,{sx:{fontSize:48,color:"primary.main"}}):N==="application/pdf"?v.jsx(Am,{sx:{fontSize:48,color:"error.main"}}):N.startsWith("text/")?v.jsx(Sm,{sx:{fontSize:48,color:"info.main"}}):N==="text/xml"?v.jsx(q_,{sx:{fontSize:48,color:"warning.main"}}):v.jsx(Rm,{sx:{fontSize:48,color:"grey.500"}}),k=N=>{const R=parseInt(N);if(R===0)return"0 Bytes";const Oe=1024,Be=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(R)/Math.log(Oe));return parseFloat((R/Math.pow(Oe,K)).toFixed(2))+" "+Be[K]},M=N=>new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return o?v.jsx(Og,{message:"Loading file content...",fullHeight:!0}):d?v.jsxs(Oo,{maxWidth:"lg",sx:{mt:4},children:[v.jsx(xr,{severity:"error",sx:{mb:2},children:d}),v.jsx(ot,{variant:"contained",startIcon:v.jsx(F_,{}),onClick:ge,children:"Go Back"})]}):v.jsx(J,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f5f5f4 0%, #e7e5e4 100%)",p:3},children:v.jsxs(Oo,{maxWidth:"xl",children:[v.jsxs(J,{sx:{mb:4},children:[v.jsx(ot,{variant:"outlined",startIcon:v.jsx(F_,{}),onClick:ge,sx:{mb:3},children:"Back to Files"}),v.jsx(Y,{variant:"h3",sx:{fontWeight:"bold",mb:1,color:"text.primary"},children:g?.name||"File Details"}),v.jsx(Y,{variant:"body1",sx:{color:"text.secondary",mb:3},children:ee?"TEI XML Document Viewer":"View and analyze your document content"})]}),ee&&w&&v.jsx(J,{sx:{mb:4},children:v.jsx(A4,{parsedDocument:w,error:F})}),ee&&F&&v.jsxs(xr,{severity:"warning",sx:{mb:3},children:[v.jsxs(Y,{variant:"body2",sx:{mb:1},children:[v.jsx("strong",{children:"TEI Parsing Warning:"})," ",F]}),v.jsx(Y,{variant:"body2",children:"The document will be displayed as raw XML. Some features may not be available."})]}),v.jsxs(J,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",lg:"row"}},children:[v.jsxs(J,{sx:{flex:1},children:[v.jsxs(On,{sx:{mb:3,p:3},children:[v.jsx(Y,{variant:"h5",sx:{fontWeight:"bold",mb:3,color:"text.primary"},children:"File Information"}),v.jsxs(J,{sx:{display:"flex",alignItems:"center",mb:3},children:[v.jsx(J,{sx:{p:2,bgcolor:"rgba(0,0,0,0.02)",borderRadius:3,mr:3},children:C(g?.type||"")}),v.jsxs(J,{children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:g?.name||"Unknown File"}),v.jsx(Y,{variant:"body2",color:"text.secondary",children:g?.type||"Unknown Type"})]})]}),v.jsxs(J,{sx:{display:"flex",gap:2,flexWrap:"wrap",mb:3},children:[v.jsx(fn,{icon:v.jsx(YA,{}),label:`Size: ${k(g?.size||"0")}`,variant:"outlined",size:"medium",sx:{borderRadius:2}}),v.jsx(fn,{icon:v.jsx(WA,{}),label:`Modified: ${M(g?.lastModified||"")}`,variant:"outlined",size:"medium",sx:{borderRadius:2}}),ee&&v.jsx(fn,{icon:v.jsx(q_,{}),label:"TEI XML",variant:"outlined",size:"medium",color:"warning",sx:{borderRadius:2}})]}),v.jsxs(J,{sx:{display:"flex",gap:2},children:[v.jsx(ot,{variant:"contained",startIcon:v.jsx(Kx,{}),onClick:be,sx:{bgcolor:"secondary.main",color:"secondary.contrastText","&:hover":{bgcolor:"secondary.dark"}},children:"Download"}),v.jsx(ot,{variant:"outlined",startIcon:v.jsx(Gx,{}),onClick:D,sx:{borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.dark",bgcolor:"primary.main",color:"white"}},children:"View Original"})]})]}),v.jsxs(On,{sx:{p:3},children:[v.jsx(J,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:v.jsxs(XA,{value:x,onChange:A,"aria-label":"file content tabs",children:[v.jsx(Ep,{label:"Content Preview"}),ee&&v.jsx(Ep,{label:"Raw XML"}),v.jsx(Ep,{label:"Metadata"})]})}),v.jsxs(Bp,{value:x,index:0,children:[v.jsx(Y,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:"Content Preview"}),ee&&w?v.jsx(xr,{severity:"info",sx:{mb:2},children:"This is a TEI XML document. Use the TEI Viewer above for the best experience."}):g?.type?.startsWith("text/")?v.jsx(Li,{variant:"outlined",sx:{p:3,bgcolor:"rgba(0,0,0,0.02)",borderRadius:3,maxHeight:"600px",overflow:"auto",fontFamily:"monospace",fontSize:"14px",lineHeight:1.6,whiteSpace:"pre-wrap",wordBreak:"break-word",borderColor:"grey.300"},children:n||"No content available"}):g?.type?.startsWith("image/")?v.jsxs(J,{sx:{textAlign:"center"},children:[v.jsx("img",{src:ie||"",alt:g?.name||"Image",style:{maxWidth:"100%",maxHeight:"500px",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"}}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mt:2},children:"Image file - Content preview not available"})]}):v.jsxs(J,{sx:{textAlign:"center",py:4},children:[v.jsx(Y,{variant:"body1",color:"text.secondary",children:"Content preview not available for this file type"}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mt:1},children:'Use the "View Original" button to see the file content'})]})]}),ee&&v.jsxs(Bp,{value:x,index:1,children:[v.jsx(Y,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:"Raw XML Content"}),v.jsx(Li,{variant:"outlined",sx:{p:3,bgcolor:"rgba(0,0,0,0.02)",borderRadius:3,maxHeight:"600px",overflow:"auto",fontFamily:"monospace",fontSize:"12px",lineHeight:1.4,whiteSpace:"pre-wrap",wordBreak:"break-word",borderColor:"grey.300"},children:n||"No content available"})]}),v.jsxs(Bp,{value:x,index:ee?2:1,children:[v.jsx(Y,{variant:"subtitle1",sx:{fontWeight:"bold",mb:2},children:"File Metadata"}),v.jsxs(J,{sx:{space:2},children:[v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"File Name"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:g?.name||"Unknown"})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"File Type"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:g?.type?.split("/")[1]?.toUpperCase()||"UNKNOWN"})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"File Size"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:k(g?.size||"0")})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Last Modified"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:M(g?.lastModified||"")})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between"},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Status"}),v.jsx(fn,{label:"Active",size:"small",sx:{bgcolor:"success.main",color:"white",fontWeight:"bold"}})]})]})]})]})]}),v.jsxs(J,{sx:{width:{xs:"100%",lg:320}},children:[v.jsxs(On,{sx:{mb:3,p:3,textAlign:"center"},children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:3,color:"text.primary"},children:"Author Information"}),v.jsx(Ah,{sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:"2rem"},children:q?.email?.charAt(0).toUpperCase()||v.jsx(Qx,{})}),v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:q?.email?.split("@")[0]||"Unknown User"}),v.jsx(Y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Document Owner"}),v.jsx(fn,{label:"File Manager",sx:{bgcolor:"secondary.main",color:"secondary.contrastText",fontWeight:"bold"}})]}),ee&&w&&v.jsxs(On,{sx:{mb:3,p:3},children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:3,color:"text.primary"},children:"TEI Document Info"}),v.jsxs(J,{sx:{space:2},children:[v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Title"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:w.metadata.title})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Author"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:w.metadata.author})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Editor"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:w.metadata.editor})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Date"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:w.metadata.date})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between"},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Language"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:w.metadata.language})]})]})]}),v.jsxs(On,{sx:{p:3},children:[v.jsx(Y,{variant:"h6",sx:{fontWeight:"bold",mb:3,color:"text.primary"},children:"File Statistics"}),v.jsxs(J,{sx:{space:2},children:[v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"File Size"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:k(g?.size||"0")})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"File Type"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:g?.type?.split("/")[1]?.toUpperCase()||"UNKNOWN"})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Created"}),v.jsx(Y,{variant:"body2",sx:{fontWeight:"bold"},children:M(g?.lastModified||"")})]}),v.jsxs(J,{sx:{display:"flex",justifyContent:"space-between"},children:[v.jsx(Y,{variant:"body2",color:"text.secondary",children:"Status"}),v.jsx(fn,{label:"Active",size:"small",sx:{bgcolor:"success.main",color:"white",fontWeight:"bold"}})]})]})]})]})]})]})})},_o=({children:i,requireAuth:e=!0})=>{const n=wr(p=>p.user.isLoading),a=wr(p=>!!p.user.user),o=Ra(),c=Fi(),d=rS();return ce.useEffect(()=>{const p=T2(Sa,g=>{g?(o(wo(g)),d.pathname.startsWith("/auth/")&&c("/",{replace:!0})):(o(Xh()),e&&c("/welcome",{replace:!0}))});return()=>p()},[o,c,d.pathname,e]),ce.useEffect(()=>{o(mS(!1))},[o]),n?v.jsx(Og,{message:"Authenticating...",fullHeight:!0}):e&&!a||!e&&a?null:v.jsx(v.Fragment,{children:i})};class R4 extends ce.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?v.jsx(J,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:3,children:v.jsxs(Li,{elevation:3,sx:{p:4,textAlign:"center",maxWidth:500},children:[v.jsx(Y,{variant:"h4",color:"error",gutterBottom:!0,children:"Something went wrong"}),v.jsx(Y,{variant:"body1",color:"text.secondary",paragraph:!0,children:"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."}),this.state.error&&v.jsx(J,{sx:{mb:3,p:2,bgcolor:"grey.100",borderRadius:1},children:v.jsxs(Y,{variant:"caption",color:"text.secondary",children:["Error: ",this.state.error.message]})}),v.jsxs(J,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[v.jsx(ot,{variant:"contained",startIcon:v.jsx(Yx,{}),onClick:()=>window.location.reload(),children:"Refresh Page"}),v.jsx(ot,{variant:"outlined",startIcon:v.jsx($A,{}),onClick:this.handleGoHome,children:"Go Home"})]})]})}):this.props.children}}const I4=()=>window.location.hostname.includes("github.io")?"/teiapp":"/",C4=aS([{path:"/",element:v.jsx(_o,{requireAuth:!0,children:v.jsx(y4,{})}),errorElement:v.jsx("div",{children:"Something went wrong. Please try again."})},{path:"/welcome",element:v.jsx(_o,{requireAuth:!1,children:v.jsx(bN,{})})},{path:"/detail",element:v.jsx(_o,{requireAuth:!0,children:v.jsx(S4,{})})},{path:"/auth",children:[{path:"signup",element:v.jsx(_o,{requireAuth:!1,children:v.jsx(dN,{})})},{path:"signin",element:v.jsx(_o,{requireAuth:!1,children:v.jsx(fN,{})})}]},{path:"/dashboard",element:v.jsx(_o,{requireAuth:!0,children:v.jsx(pN,{})})},{path:"*",element:v.jsx("div",{children:"Page not found"})}],{basename:I4()});function D4(){return v.jsx(lS,{store:tN,children:v.jsxs(ZA,{theme:nN,children:[v.jsx(JA,{}),v.jsx(R4,{children:v.jsx(sS,{router:C4})})]})})}fS.createRoot(document.getElementById("root")).render(v.jsx(ce.StrictMode,{children:v.jsx(D4,{})}));
